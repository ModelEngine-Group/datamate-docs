<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://modelengine-group.github.io/datamate-docs/docs/><link rel=alternate type=application/rss+xml href=https://modelengine-group.github.io/datamate-docs/docs/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/datamate-docs/favicons/favicon.ico><link rel=apple-touch-icon href=/datamate-docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/datamate-docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/datamate-docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/datamate-docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/datamate-docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/datamate-docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/datamate-docs/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/datamate-docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/datamate-docs/favicons/android-192x192.png sizes=192x192><title>文档 | DataMate</title><meta name=description content="欢迎阅读DataMate的官方文档。在这里，您将找到有关我们项目的详细信息、使用指南和技术资源，帮助您更好地理解和使用我们的产品。无论您是新手还是有经验的用户，我们的文档都旨在为您提供所需的信息和支持。请随时浏览各个章节，发现更多内容！"><meta property="og:url" content="https://modelengine-group.github.io/datamate-docs/docs/"><meta property="og:site_name" content="DataMate"><meta property="og:title" content="文档"><meta property="og:description" content="欢迎阅读DataMate的官方文档。在这里，您将找到有关我们项目的详细信息、使用指南和技术资源，帮助您更好地理解和使用我们的产品。无论您是新手还是有经验的用户，我们的文档都旨在为您提供所需的信息和支持。请随时浏览各个章节，发现更多内容！"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta itemprop=name content="文档"><meta itemprop=description content="欢迎阅读DataMate的官方文档。在这里，您将找到有关我们项目的详细信息、使用指南和技术资源，帮助您更好地理解和使用我们的产品。无论您是新手还是有经验的用户，我们的文档都旨在为您提供所需的信息和支持。请随时浏览各个章节，发现更多内容！"><meta itemprop=dateModified content="2025-11-07T15:36:44+08:00"><meta itemprop=wordCount content="1"><meta name=twitter:card content="summary"><meta name=twitter:title content="文档"><meta name=twitter:description content="欢迎阅读DataMate的官方文档。在这里，您将找到有关我们项目的详细信息、使用指南和技术资源，帮助您更好地理解和使用我们的产品。无论您是新手还是有经验的用户，我们的文档都旨在为您提供所需的信息和支持。请随时浏览各个章节，发现更多内容！"><link rel=preload href=/datamate-docs/scss/main.min.74eef40c5172b0e2f11bd9c3ea40dba66c2dc642ac5294c208f5dc9ff772c0e9.css as=style integrity="sha256-dO70DFFysOLxG9nD6kDbpmwtxkKsUpTCCPXcn/dywOk=" crossorigin=anonymous><link href=/datamate-docs/scss/main.min.74eef40c5172b0e2f11bd9c3ea40dba66c2dc642ac5294c208f5dc9ff772c0e9.css rel=stylesheet integrity="sha256-dO70DFFysOLxG9nD6kDbpmwtxkKsUpTCCPXcn/dywOk=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/datamate-docs/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>DataMate</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/datamate-docs/about/><span>关于</span></a></li><li class=nav-item><a class="nav-link active" href=/datamate-docs/docs/><span>文档</span></a></li><li class=nav-item><a class=nav-link href=/datamate-docs/blog/><span>博客</span></a></li><li class=nav-item><a class=nav-link href=/datamate-docs/community/><span>社区</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 (Chinese)</a><ul class=dropdown-menu><li><a class=dropdown-item href=/datamate-docs/en/docs/>English</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder=站内搜索… aria-label=站内搜索… autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/datamate-docs/docs/>返回本页常规视图</a>.</p></div><h1 class=title>文档</h1><ul><li>1: <a href=#pg-f3b56000093113bd3bfb6c9c05e7e945>概述</a></li><li>2: <a href=#pg-17b09a9dc5200475d8a306f18e63a0f9>快速开始</a></li><ul><li>2.1: <a href=#pg-83a6a494c6472794a9acaa7a5e8e053a>安装部署指南</a></li><li>2.2: <a href=#pg-ffc590ea6468143712feda0ba56c1372>系统架构</a></li><li>2.3: <a href=#pg-4babb2f227d524ee394f6849feedff6a>开发环境搭建</a></li></ul><li>3: <a href=#pg-ecf7e357d2a131135219db95eddda49c>用户指南</a></li><ul><li>3.1: <a href=#pg-c4873d677bf0f352ce848879e4aac7d3>数据归集</a></li><li>3.2: <a href=#pg-76c0c8ccf8113c0cc0d32b9ab3cebfde>数据管理</a></li><li>3.3: <a href=#pg-864b2ebba5f4143d01ef58470643b684>数据清洗</a></li><li>3.4: <a href=#pg-1ca3726fbab055cfdbdbb9596409ab01>数据标注</a></li><li>3.5: <a href=#pg-2d6e9a304ed98aa8ed6dca2e193444c8>数据合成</a></li><li>3.6: <a href=#pg-884671239254986204060496ce6265f3>数据评估</a></li><li>3.7: <a href=#pg-e6ad9d99cac465d0b1e206dfa18e11ec>知识库管理</a></li><li>3.8: <a href=#pg-bd34218855ac7a39ca5b39c88f9631cc>算子市场</a></li><li>3.9: <a href=#pg-b5c0120d3c53b8b9f8998b17f3d9a42e>流水线编排</a></li><li>3.10: <a href=#pg-22481a161ee01b17ca5f4dc37b47f854>Agent 对话</a></li></ul><li>4: <a href=#pg-b5568d681972077a2a3f45e40a59d61a>API 参考</a></li><ul><li>4.1: <a href=#pg-0cadcf42d67715228dd8742bd09bda93>数据管理 API</a></li></ul><li>5: <a href=#pg-a7c9e10a31abdecaec5a338462a220a8>开发者指南</a></li><ul><li>5.1: <a href=#pg-c768b6c585558f98a900da28e99b9672>后端架构</a></li><li>5.2: <a href=#pg-a57f86b7d183589939dcda6681c444dc>前端架构</a></li></ul><li>6: <a href=#pg-6d3695a8bc8582995ad4b17a0b19e419>附录</a></li><ul><li>6.1: <a href=#pg-91328b5917bfb7073458e7099a934d68>配置参数</a></li><li>6.2: <a href=#pg-5e253169ae19ef26ef3bcec70fa224fd>故障排查</a></li></ul><li>7: <a href=#pg-54889070d33ff8ba421707b96841ef23>贡献指南</a></li></ul><div class=content><p>欢迎阅读DataMate的官方文档。在这里，您将找到有关我们项目的详细信息、使用指南和技术资源，帮助您更好地理解和使用我们的产品。无论您是新手还是有经验的用户，我们的文档都旨在为您提供所需的信息和支持。请随时浏览各个章节，发现更多内容！</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-f3b56000093113bd3bfb6c9c05e7e945>1 - 概述</h1><div class=lead>DataMate — 企业级大模型数据处理平台，覆盖数据全生命周期管理</div><div class="pageinfo pageinfo-primary"><p>DataMate 是一个企业级的大模型数据处理平台，专为模型微调和 RAG 检索设计。平台提供数据采集、数据管理、数据清洗、数据标注、数据合成、数据评估、知识库管理等核心功能，支持可视化流水线编排，帮助企业和开发者高效构建高质量训练数据。</p></div><h2 id=产品定位>产品定位<a class=td-heading-self-link href=#%e4%ba%a7%e5%93%81%e5%ae%9a%e4%bd%8d aria-label="Heading self-link"></a></h2><p>DataMate 致力于解决大模型落地过程中的数据痛点，提供一站式数据治理解决方案：</p><ul><li><strong>全流程覆盖</strong>：从数据采集到数据评估，覆盖数据处理全生命周期</li><li><strong>企业级能力</strong>：支持千万级数据并发处理，提供私有化部署方案</li><li><strong>灵活扩展</strong>：内置丰富的数据处理算子，支持自定义算子开发</li><li><strong>可视化编排</strong>：拖拽式流水线设计，无需编码即可完成复杂的数据处理流程</li></ul><h2 id=核心功能>核心功能<a class=td-heading-self-link href=#%e6%a0%b8%e5%bf%83%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=数据采集>数据采集<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%87%87%e9%9b%86 aria-label="Heading self-link"></a></h3><ul><li>基于 DataX 的异构数据源采集能力</li><li>支持关系型数据库、NoSQL、文件系统等多种数据源</li><li>灵活的任务配置和监控机制</li></ul><h3 id=数据管理>数据管理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><ul><li>统一的数据集管理，支持图像、文本、音频、视频、多模态等多种数据类型</li><li>提供文件上传、下载、预览等完整的数据操作能力</li><li>支持标签和元数据管理，便于数据组织和检索</li></ul><h3 id=数据清洗>数据清洗<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97 aria-label="Heading self-link"></a></h3><ul><li>内置丰富的数据清洗算子</li><li>可视化清洗模板配置</li><li>支持批处理和流式处理模式</li></ul><h3 id=数据标注>数据标注<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><ul><li>集成 Label Studio 提供专业标注能力</li><li>支持图像分类、目标检测、文本分类等多种标注类型</li><li>提供标注审核和质量控制机制</li></ul><h3 id=数据合成>数据合成<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%90%88%e6%88%90 aria-label="Heading self-link"></a></h3><ul><li>基于大模型的数据增强和合成能力</li><li>支持指令模板管理和自定义</li><li>提供比例合成任务，满足多样化数据需求</li></ul><h3 id=数据评估>数据评估<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h3><ul><li>多维度数据质量评估指标</li><li>支持自动评估和手动评估</li><li>生成详细的评估报告</li></ul><h3 id=知识库管理rag>知识库管理（RAG）<a class=td-heading-self-link href=#%e7%9f%a5%e8%af%86%e5%ba%93%e7%ae%a1%e7%90%86rag aria-label="Heading self-link"></a></h3><ul><li>支持多种文档格式的知识库构建</li><li>自动化文本切分和向量化</li><li>集成向量检索能力，支持 RAG 应用</li></ul><h3 id=算子市场>算子市场<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e5%b8%82%e5%9c%ba aria-label="Heading self-link"></a></h3><ul><li>丰富的内置数据处理算子</li><li>支持算子发布和共享</li><li>提供自定义算子开发能力</li></ul><h3 id=流水线编排>流水线编排<a class=td-heading-self-link href=#%e6%b5%81%e6%b0%b4%e7%ba%bf%e7%bc%96%e6%8e%92 aria-label="Heading self-link"></a></h3><ul><li>可视化拖拽式流程设计</li><li>支持多种节点类型和配置</li><li>提供流程执行监控和调试能力</li></ul><h3 id=agent-对话>Agent 对话<a class=td-heading-self-link href=#agent-%e5%af%b9%e8%af%9d aria-label="Heading self-link"></a></h3><ul><li>集成大模型对话能力</li><li>支持知识库问答</li><li>提供对话历史管理</li></ul><h2 id=技术架构>技术架构<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><h3 id=整体架构>整体架构<a class=td-heading-self-link href=#%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h3><p>DataMate 采用微服务架构，核心组件包括：</p><ul><li><strong>前端</strong>：React 18 + TypeScript + Ant Design + Tailwind CSS</li><li><strong>后端</strong>：Java 21 + Spring Boot 3.5.6 + Spring Cloud + MyBatis Plus</li><li><strong>运行时</strong>：Python FastAPI + LangChain + Ray</li><li><strong>数据库</strong>：PostgreSQL + Redis + Milvus + MinIO</li></ul><h3 id=微服务组件>微服务组件<a class=td-heading-self-link href=#%e5%be%ae%e6%9c%8d%e5%8a%a1%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h3><ul><li><strong>API Gateway</strong> (8080)：统一入口，负责路由和认证</li><li><strong>Main Application</strong>：核心业务逻辑</li><li><strong>Data Management Service</strong> (8092)：数据集管理</li><li><strong>Data Collection Service</strong>：数据采集任务管理</li><li><strong>Data Cleaning Service</strong>：数据清洗任务管理</li><li><strong>Data Annotation Service</strong>：数据标注任务管理</li><li><strong>Data Synthesis Service</strong>：数据合成任务管理</li><li><strong>Data Evaluation Service</strong>：数据评估任务管理</li><li><strong>Operator Market Service</strong>：算子市场管理</li><li><strong>RAG Indexer Service</strong>：知识库索引服务</li><li><strong>Runtime Service</strong> (8081)：算子执行引擎</li><li><strong>Backend Python Service</strong> (18000)：Python 后端服务</li></ul><h2 id=应用场景>应用场景<a class=td-heading-self-link href=#%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af aria-label="Heading self-link"></a></h2><h3 id=模型微调>模型微调<a class=td-heading-self-link href=#%e6%a8%a1%e5%9e%8b%e5%be%ae%e8%b0%83 aria-label="Heading self-link"></a></h3><ul><li>训练数据清洗和质量提升</li><li>数据增强和合成</li><li>训练数据评估</li></ul><h3 id=rag-应用>RAG 应用<a class=td-heading-self-link href=#rag-%e5%ba%94%e7%94%a8 aria-label="Heading self-link"></a></h3><ul><li>企业知识库构建</li><li>文档向量化索引</li><li>语义检索和问答</li></ul><h3 id=数据治理>数据治理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b2%bb%e7%90%86 aria-label="Heading self-link"></a></h3><ul><li>多源数据统一管理</li><li>数据血缘追踪</li><li>数据质量监控</li></ul><h2 id=部署方式>部署方式<a class=td-heading-self-link href=#%e9%83%a8%e7%bd%b2%e6%96%b9%e5%bc%8f aria-label="Heading self-link"></a></h2><p>DataMate 支持多种部署方式：</p><ul><li><strong>Docker Compose</strong>：快速体验和开发测试</li><li><strong>Kubernetes/Helm</strong>：生产环境部署</li><li><strong>离线部署</strong>：支持内网环境部署</li></ul><h2 id=与其他产品的对比>与其他产品的对比<a class=td-heading-self-link href=#%e4%b8%8e%e5%85%b6%e4%bb%96%e4%ba%a7%e5%93%81%e7%9a%84%e5%af%b9%e6%af%94 aria-label="Heading self-link"></a></h2><table><thead><tr><th>特性</th><th>DataMate</th><th>Label Studio</th><th>DocArray</th></tr></thead><tbody><tr><td>数据管理</td><td>✅ 完整的数据集管理</td><td>❌ 仅标注数据</td><td>❌ 仅文档数据</td></tr><tr><td>数据采集</td><td>✅ 支持 DataX</td><td>❌ 不支持</td><td>❌ 不支持</td></tr><tr><td>数据清洗</td><td>✅ 内置丰富算子</td><td>❌ 不支持</td><td>❌ 不支持</td></tr><tr><td>数据标注</td><td>✅ 集成 Label Studio</td><td>✅ 专业标注工具</td><td>❌ 不支持</td></tr><tr><td>数据合成</td><td>✅ 基于大模型</td><td>❌ 不支持</td><td>❌ 不支持</td></tr><tr><td>数据评估</td><td>✅ 多维度评估</td><td>⚠️ 基础评估</td><td>❌ 不支持</td></tr><tr><td>知识库</td><td>✅ RAG 集成</td><td>❌ 不支持</td><td>⚠️ 需要额外开发</td></tr><tr><td>流水线编排</td><td>✅ 可视化编排</td><td>❌ 不支持</td><td>❌ 不支持</td></tr><tr><td>算子扩展</td><td>✅ 支持自定义</td><td>⚠️ 有限支持</td><td>⚠️ 需要编程</td></tr><tr><td>开源协议</td><td>✅ MIT</td><td>✅ Apache 2.0</td><td>✅ MIT</td></tr></tbody></table><h2 id=下一步>下一步<a class=td-heading-self-link href=#%e4%b8%8b%e4%b8%80%e6%ad%a5 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/>快速开始</a> - 5 分钟快速部署 DataMate</li><li><a href=/datamate-docs/docs/user-guide/>用户指南</a> - 详细的功能使用说明</li><li><a href=/datamate-docs/docs/api-reference/>API 参考</a> - 完整的 API 文档</li><li><a href=/datamate-docs/docs/developer-guide/>开发者指南</a> - 架构设计和开发指南</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-17b09a9dc5200475d8a306f18e63a0f9>2 - 快速开始</h1><div class=lead>5 分钟快速部署 DataMate</div><div class="pageinfo pageinfo-primary"><p>本指南将帮助您在 5 分钟内快速部署 DataMate 平台。</p></div><p>DataMate 支持两种主要的部署方式：</p><ul><li><strong>Docker Compose</strong>：适合快速体验、开发测试环境</li><li><strong>Kubernetes/Helm</strong>：适合生产环境部署</li></ul><h2 id=前置条件>前置条件<a class=td-heading-self-link href=#%e5%89%8d%e7%bd%ae%e6%9d%a1%e4%bb%b6 aria-label="Heading self-link"></a></h2><h3 id=docker-compose-部署>Docker Compose 部署<a class=td-heading-self-link href=#docker-compose-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><ul><li>Docker 20.10+</li><li>Docker Compose 2.0+</li><li>至少 4GB 内存</li><li>至少 10GB 磁盘空间</li></ul><h3 id=kubernetes-部署>Kubernetes 部署<a class=td-heading-self-link href=#kubernetes-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><ul><li>Kubernetes 1.20+</li><li>Helm 3.0+</li><li>kubectl 配置好集群连接</li><li>至少 8GB 内存</li><li>至少 20GB 磁盘空间</li></ul><h2 id=5-分钟快速部署docker-compose>5 分钟快速部署（Docker Compose）<a class=td-heading-self-link href=#5-%e5%88%86%e9%92%9f%e5%bf%ab%e9%80%9f%e9%83%a8%e7%bd%b2docker-compose aria-label="Heading self-link"></a></h2><h3 id=1-拉取代码>1. 拉取代码<a class=td-heading-self-link href=#1-%e6%8b%89%e5%8f%96%e4%bb%a3%e7%a0%81 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/ModelEngine-Group/DataMate.git
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> DataMate
</span></span></code></pre></div><h3 id=2-启动服务>2. 启动服务<a class=td-heading-self-link href=#2-%e5%90%af%e5%8a%a8%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><p>使用提供的 Makefile 进行一键部署：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make install
</span></span></code></pre></div><p>执行命令后，系统会提示选择部署方式：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>Choose a deployment method:
</span></span><span style=display:flex><span>1. Docker/Docker-Compose
</span></span><span style=display:flex><span>2. Kubernetes/Helm
</span></span><span style=display:flex><span>Enter choice:
</span></span></code></pre></div><p>输入 <code>1</code> 选择 Docker Compose 部署。</p><h3 id=3-验证部署>3. 验证部署<a class=td-heading-self-link href=#3-%e9%aa%8c%e8%af%81%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><p>服务启动后，可以通过以下方式访问：</p><ul><li><strong>前端界面</strong>：http://localhost:30000</li><li><strong>API 网关</strong>：http://localhost:8080</li><li><strong>数据库</strong>：localhost:5432</li></ul><h3 id=4-查看服务状态>4. 查看服务状态<a class=td-heading-self-link href=#4-%e6%9f%a5%e7%9c%8b%e6%9c%8d%e5%8a%a1%e7%8a%b6%e6%80%81 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>docker ps
</span></span></code></pre></div><p>您应该能看到以下容器在运行：</p><ul><li>datamate-frontend (前端服务)</li><li>datamate-backend (后端服务)</li><li>datamate-backend-python (Python 后端服务)</li><li>datamate-gateway (API 网关)</li><li>datamate-database (PostgreSQL 数据库)</li><li>datamate-runtime (算子运行时)</li></ul><h2 id=可选组件安装>可选组件安装<a class=td-heading-self-link href=#%e5%8f%af%e9%80%89%e7%bb%84%e4%bb%b6%e5%ae%89%e8%a3%85 aria-label="Heading self-link"></a></h2><h3 id=安装-milvus-向量数据库>安装 Milvus 向量数据库<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85-milvus-%e5%90%91%e9%87%8f%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h3><p>Milvus 用于知识库的向量存储和检索：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make install-milvus
</span></span></code></pre></div><p>选择 Docker Compose 部署方式。</p><h3 id=安装-label-studio-标注工具>安装 Label Studio 标注工具<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85-label-studio-%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7 aria-label="Heading self-link"></a></h3><p>Label Studio 用于数据标注功能：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make install-label-studio
</span></span></code></pre></div><p>访问地址：http://localhost:30001</p><p>默认账号：</p><ul><li>用户名：admin@demo.com</li><li>密码：demoadmin</li></ul><h3 id=安装-mineru-pdf-处理服务>安装 MinerU PDF 处理服务<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85-mineru-pdf-%e5%a4%84%e7%90%86%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><p>MinerU 用于增强 PDF 文档处理能力：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make build-mineru
</span></span><span style=display:flex><span>make install-mineru
</span></span></code></pre></div><h3 id=安装-deerflow-服务>安装 DeerFlow 服务<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85-deerflow-%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><p>DeerFlow 用于工作流编排增强功能：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make install-deer-flow
</span></span></code></pre></div><h2 id=使用本地镜像开发>使用本地镜像开发<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%9c%ac%e5%9c%b0%e9%95%9c%e5%83%8f%e5%bc%80%e5%8f%91 aria-label="Heading self-link"></a></h2><p>如果您修改了本地代码，可以使用本地镜像进行部署：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make build
</span></span><span style=display:flex><span>make install <span style=color:#000>dev</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span></code></pre></div><h2 id=离线环境部署>离线环境部署<a class=td-heading-self-link href=#%e7%a6%bb%e7%ba%bf%e7%8e%af%e5%a2%83%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h2><p>对于离线环境，可以预先下载所有镜像：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make download <span style=color:#000>SAVE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span></code></pre></div><p>镜像将保存在 <code>dist/</code> 目录下。在目标机器上加载镜像：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make load-images
</span></span></code></pre></div><h2 id=卸载>卸载<a class=td-heading-self-link href=#%e5%8d%b8%e8%bd%bd aria-label="Heading self-link"></a></h2><h3 id=卸载-datamate>卸载 DataMate<a class=td-heading-self-link href=#%e5%8d%b8%e8%bd%bd-datamate aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make uninstall
</span></span></code></pre></div><p>系统会提示是否删除数据卷：</p><ul><li>选择 <code>1</code>：删除所有数据（包括数据集、配置等）</li><li>选择 <code>2</code>：保留数据卷</li></ul><h3 id=仅卸载特定组件>仅卸载特定组件<a class=td-heading-self-link href=#%e4%bb%85%e5%8d%b8%e8%bd%bd%e7%89%b9%e5%ae%9a%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 卸载 Label Studio</span>
</span></span><span style=display:flex><span>make uninstall-label-studio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 卸载 Milvus</span>
</span></span><span style=display:flex><span>make uninstall-milvus
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 卸载 DeerFlow</span>
</span></span><span style=display:flex><span>make uninstall-deer-flow
</span></span></code></pre></div><h2 id=下一步>下一步<a class=td-heading-self-link href=#%e4%b8%8b%e4%b8%80%e6%ad%a5 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/installation/>安装部署指南</a> - 详细的安装和配置说明</li><li><a href=/datamate-docs/docs/getting-started/architecture/>系统架构</a> - 了解 DataMate 的技术架构</li><li><a href=/datamate-docs/docs/getting-started/development/>开发环境搭建</a> - 本地开发环境配置</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-服务启动失败怎么办>Q: 服务启动失败怎么办？<a class=td-heading-self-link href=#q-%e6%9c%8d%e5%8a%a1%e5%90%af%e5%8a%a8%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 首先检查端口是否被占用：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查端口占用</span>
</span></span><span style=display:flex><span>lsof -i :30000
</span></span><span style=display:flex><span>lsof -i :8080
</span></span></code></pre></div><p>如果端口被占用，可以修改 <code>deployment/docker/datamate/docker-compose.yml</code> 中的端口映射。</p><h3 id=q-如何查看服务日志>Q: 如何查看服务日志？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e6%9f%a5%e7%9c%8b%e6%9c%8d%e5%8a%a1%e6%97%a5%e5%bf%97 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看所有服务日志</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml logs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看特定服务日志</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml logs -f datamate-backend
</span></span></code></pre></div><h3 id=q-数据存储在哪里>Q: 数据存储在哪里？<a class=td-heading-self-link href=#q-%e6%95%b0%e6%8d%ae%e5%ad%98%e5%82%a8%e5%9c%a8%e5%93%aa%e9%87%8c aria-label="Heading self-link"></a></h3><p>数据通过 Docker 卷进行持久化存储：</p><ul><li><code>datamate-dataset-volume</code>：数据集文件</li><li><code>datamate-postgresql-volume</code>：数据库数据</li><li><code>datamate-log-volume</code>：日志文件</li></ul><p>可以使用以下命令查看所有卷：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume ls <span style=color:#000;font-weight:700>|</span> grep datamate
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-83a6a494c6472794a9acaa7a5e8e053a>2.1 - 安装部署指南</h1><div class=lead>详细的 DataMate 安装和配置说明</div><div class="pageinfo pageinfo-primary"><p>本文档提供 DataMate 平台的详细安装和配置说明。</p></div><h2 id=系统要求>系统要求<a class=td-heading-self-link href=#%e7%b3%bb%e7%bb%9f%e8%a6%81%e6%b1%82 aria-label="Heading self-link"></a></h2><h3 id=最低配置>最低配置<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%8e%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>组件</th><th>最低要求</th><th>推荐配置</th></tr></thead><tbody><tr><td>CPU</td><td>4 核</td><td>8 核+</td></tr><tr><td>内存</td><td>8 GB</td><td>16 GB+</td></tr><tr><td>磁盘</td><td>50 GB</td><td>100 GB+</td></tr><tr><td>操作系统</td><td>Linux/macOS/Windows</td><td>Linux (Ubuntu 20.04+)</td></tr></tbody></table><h3 id=软件依赖>软件依赖<a class=td-heading-self-link href=#%e8%bd%af%e4%bb%b6%e4%be%9d%e8%b5%96 aria-label="Heading self-link"></a></h3><h4 id=docker-compose-部署>Docker Compose 部署<a class=td-heading-self-link href=#docker-compose-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h4><ul><li>Docker 20.10+</li><li>Docker Compose 2.0+</li><li>Git (可选，用于克隆代码)</li><li>Make (可选，用于使用 Makefile)</li></ul><h4 id=kubernetes-部署>Kubernetes 部署<a class=td-heading-self-link href=#kubernetes-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h4><ul><li>Kubernetes 1.20+</li><li>Helm 3.0+</li><li>kubectl (与集群版本匹配)</li><li>Git (可选，用于克隆代码)</li><li>Make (可选，使用 Makefile)</li></ul><h2 id=部署方式对比>部署方式对比<a class=td-heading-self-link href=#%e9%83%a8%e7%bd%b2%e6%96%b9%e5%bc%8f%e5%af%b9%e6%af%94 aria-label="Heading self-link"></a></h2><table><thead><tr><th>特性</th><th>Docker Compose</th><th>Kubernetes</th></tr></thead><tbody><tr><td>部署难度</td><td>⭐ 简单</td><td>⭐⭐⭐ 复杂</td></tr><tr><td>资源利用</td><td>⭐⭐ 一般</td><td>⭐⭐⭐⭐ 高</td></tr><tr><td>高可用</td><td>❌ 不支持</td><td>✅ 支持</td></tr><tr><td>扩展性</td><td>⭐⭐ 一般</td><td>⭐⭐⭐⭐ 强</td></tr><tr><td>适用场景</td><td>开发测试、小规模部署</td><td>生产环境、大规模部署</td></tr></tbody></table><h2 id=docker-compose-部署-1>Docker Compose 部署<a class=td-heading-self-link href=#docker-compose-%e9%83%a8%e7%bd%b2-1 aria-label="Heading self-link"></a></h2><h3 id=基础部署>基础部署<a class=td-heading-self-link href=#%e5%9f%ba%e7%a1%80%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><h4 id=1-准备工作>1. 准备工作<a class=td-heading-self-link href=#1-%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 克隆代码仓库</span>
</span></span><span style=display:flex><span>git clone https://github.com/ModelEngine-Group/DataMate.git
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> DataMate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查 Docker 和 Docker Compose 版本</span>
</span></span><span style=display:flex><span>docker --version
</span></span><span style=display:flex><span>docker compose version
</span></span></code></pre></div><h4 id=2-使用-makefile-部署>2. 使用 Makefile 部署<a class=td-heading-self-link href=#2-%e4%bd%bf%e7%94%a8-makefile-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 一键部署（包括 Milvus）</span>
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p>在提示中选择 <code>1. Docker/Docker-Compose</code>。</p><h4 id=3-直接使用-docker-compose>3. 直接使用 Docker Compose<a class=td-heading-self-link href=#3-%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8-docker-compose aria-label="Heading self-link"></a></h4><p>如果没有安装 Make，可以直接使用 Docker Compose：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 设置镜像仓库（可选）</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>REGISTRY</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/modelengine-group/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动基础服务</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile milvus up -d
</span></span></code></pre></div><h4 id=4-验证部署>4. 验证部署<a class=td-heading-self-link href=#4-%e9%aa%8c%e8%af%81%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查容器状态</span>
</span></span><span style=display:flex><span>docker ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看服务日志</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml logs -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 访问前端界面</span>
</span></span><span style=display:flex><span>open http://localhost:30000
</span></span></code></pre></div><h3 id=可选组件部署>可选组件部署<a class=td-heading-self-link href=#%e5%8f%af%e9%80%89%e7%bb%84%e4%bb%b6%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><h4 id=milvus-向量数据库>Milvus 向量数据库<a class=td-heading-self-link href=#milvus-%e5%90%91%e9%87%8f%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h4><p>Milvus 用于知识库的向量存储和检索。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Makefile</span>
</span></span><span style=display:flex><span>make install-milvus
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Docker Compose</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile milvus up -d
</span></span></code></pre></div><p>组件包括：</p><ul><li>milvus-standalone (19530, 9091)</li><li>milvus-minio (9000, 9001)</li><li>milvus-etcd</li></ul><h4 id=label-studio-标注工具>Label Studio 标注工具<a class=td-heading-self-link href=#label-studio-%e6%a0%87%e6%b3%a8%e5%b7%a5%e5%85%b7 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Makefile</span>
</span></span><span style=display:flex><span>make install-label-studio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Docker Compose</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile label-studio up -d
</span></span></code></pre></div><p>访问地址：http://localhost:30001</p><p>默认账号：</p><ul><li>用户名：admin@demo.com</li><li>密码：demoadmin</li></ul><h4 id=mineru-pdf-处理服务>MinerU PDF 处理服务<a class=td-heading-self-link href=#mineru-pdf-%e5%a4%84%e7%90%86%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>MinerU 提供增强的 PDF 文档解析能力，支持 NPU 加速。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 构建 MinerU 镜像</span>
</span></span><span style=display:flex><span>make build-mineru
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 MinerU</span>
</span></span><span style=display:flex><span>make install-mineru
</span></span></code></pre></div><p>支持的平台：</p><ul><li>mineru (默认，910B)</li><li>mineru-910C</li><li>mineru-310P</li></ul><h4 id=deerflow-工作流服务>DeerFlow 工作流服务<a class=td-heading-self-link href=#deerflow-%e5%b7%a5%e4%bd%9c%e6%b5%81%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Makefile</span>
</span></span><span style=display:flex><span>make install-deer-flow
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Docker Compose</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile deer-flow up -d
</span></span></code></pre></div><h4 id=redis-缓存>Redis 缓存<a class=td-heading-self-link href=#redis-%e7%bc%93%e5%ad%98 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Makefile</span>
</span></span><span style=display:flex><span>make install-redis
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Docker Compose</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile redis up -d
</span></span></code></pre></div><h3 id=环境变量配置>环境变量配置<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><p>可以在 <code>deployment/docker/datamate/docker-compose.yml</code> 中配置以下环境变量：</p><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>DB_PASSWORD</code></td><td><code>password</code></td><td>数据库密码</td></tr><tr><td><code>DATAMATE_JWT_ENABLE</code></td><td><code>false</code></td><td>是否启用 JWT 认证</td></tr><tr><td><code>REGISTRY</code></td><td><code>ghcr.io/modelengine-group/</code></td><td>镜像仓库地址</td></tr><tr><td><code>VERSION</code></td><td><code>latest</code></td><td>镜像版本</td></tr><tr><td><code>LABEL_STUDIO_HOST</code></td><td>-</td><td>Label Studio 访问地址</td></tr></tbody></table><h3 id=数据卷管理>数据卷管理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%8d%b7%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><p>DataMate 使用以下 Docker 卷进行数据持久化：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看所有卷</span>
</span></span><span style=display:flex><span>docker volume ls <span style=color:#000;font-weight:700>|</span> grep datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看卷详情</span>
</span></span><span style=display:flex><span>docker volume inspect datamate-dataset-volume
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 备份卷数据</span>
</span></span><span style=display:flex><span>docker run --rm -v datamate-dataset-volume:/data -v <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>:/backup <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  ubuntu tar czf /backup/dataset-backup.tar.gz /data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 恢复卷数据</span>
</span></span><span style=display:flex><span>docker run --rm -v datamate-dataset-volume:/data -v <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>:/backup <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  ubuntu tar xzf /backup/dataset-backup.tar.gz -C /
</span></span></code></pre></div><h2 id=kuberneteshelm-部署>Kubernetes/Helm 部署<a class=td-heading-self-link href=#kuberneteshelm-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h2><h3 id=前置准备>前置准备<a class=td-heading-self-link href=#%e5%89%8d%e7%bd%ae%e5%87%86%e5%a4%87 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查集群连接</span>
</span></span><span style=display:flex><span>kubectl cluster-info
</span></span><span style=display:flex><span>kubectl get nodes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查 Helm 版本</span>
</span></span><span style=display:flex><span>helm version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 创建命名空间（可选）</span>
</span></span><span style=display:flex><span>kubectl create namespace datamate
</span></span></code></pre></div><h3 id=使用-makefile-部署>使用 Makefile 部署<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-makefile-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 DataMate</span>
</span></span><span style=display:flex><span>make install <span style=color:#000>INSTALLER</span><span style=color:#ce5c00;font-weight:700>=</span>k8s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或直接部署到指定命名空间</span>
</span></span><span style=display:flex><span>make install <span style=color:#000>NAMESPACE</span><span style=color:#ce5c00;font-weight:700>=</span>datamate <span style=color:#000>INSTALLER</span><span style=color:#ce5c00;font-weight:700>=</span>k8s
</span></span></code></pre></div><h3 id=使用-helm-部署>使用 Helm 部署<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-helm-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><h4 id=1-部署基础服务>1. 部署基础服务<a class=td-heading-self-link href=#1-%e9%83%a8%e7%bd%b2%e5%9f%ba%e7%a1%80%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 添加 Helm 仓库（如果需要）</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># helm repo add datamate https://charts.datamate.io</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 DataMate</span>
</span></span><span style=display:flex><span>helm upgrade datamate deployment/helm/datamate/ <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --install <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --create-namespace <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --set global.image.repository<span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/modelengine-group/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看部署状态</span>
</span></span><span style=display:flex><span>kubectl get pods -n datamate
</span></span></code></pre></div><h4 id=2-配置-ingress可选>2. 配置 Ingress（可选）<a class=td-heading-self-link href=#2-%e9%85%8d%e7%bd%ae-ingress%e5%8f%af%e9%80%89 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 编辑 values.yaml</span>
</span></span><span style=display:flex><span>cat &gt;&gt; deployment/helm/datamate/values.yaml <span style=color:#4e9a06>&lt;&lt; EOF
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>ingress:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  enabled: true
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  className: nginx
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  hosts:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    - host: datamate.example.com
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      paths:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        - path: /
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>          pathType: Prefix
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 重新部署</span>
</span></span><span style=display:flex><span>helm upgrade datamate deployment/helm/datamate/ <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -f deployment/helm/datamate/values.yaml
</span></span></code></pre></div><h4 id=3-部署可选组件>3. 部署可选组件<a class=td-heading-self-link href=#3-%e9%83%a8%e7%bd%b2%e5%8f%af%e9%80%89%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 Milvus</span>
</span></span><span style=display:flex><span>helm upgrade milvus deployment/helm/milvus <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --install <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 Label Studio</span>
</span></span><span style=display:flex><span>helm upgrade label-studio deployment/helm/label-studio/ <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --install <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 部署 DeerFlow</span>
</span></span><span style=display:flex><span>helm upgrade deer-flow deployment/helm/deer-flow <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --install <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --set global.image.repository<span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/modelengine-group/
</span></span></code></pre></div><h3 id=helm-配置选项>Helm 配置选项<a class=td-heading-self-link href=#helm-%e9%85%8d%e7%bd%ae%e9%80%89%e9%a1%b9 aria-label="Heading self-link"></a></h3><p>主要配置项（<code>deployment/helm/datamate/values.yaml</code>）：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 镜像配置</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>global</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>repository</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ghcr.io/modelengine-group/</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pullPolicy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>IfNotPresent</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>tag</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>latest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 服务配置</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>frontend</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>gateway</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8080</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>backend</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8092</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 资源配置</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>requests</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;512Mi&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cpu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;500m&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;2Gi&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cpu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;2000m&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 存储配置</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>persistence</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>storageClass</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>standard</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>50Gi</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=查看日志和调试>查看日志和调试<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e6%97%a5%e5%bf%97%e5%92%8c%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看 Pod 状态</span>
</span></span><span style=display:flex><span>kubectl get pods -n datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看服务日志</span>
</span></span><span style=display:flex><span>kubectl logs -f deployment/datamate-backend -n datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看所有资源</span>
</span></span><span style=display:flex><span>kubectl get all -n datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 端口转发进行本地调试</span>
</span></span><span style=display:flex><span>kubectl port-forward svc/datamate-gateway 8080:8080 -n datamate
</span></span></code></pre></div><h2 id=离线环境部署>离线环境部署<a class=td-heading-self-link href=#%e7%a6%bb%e7%ba%bf%e7%8e%af%e5%a2%83%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h2><h3 id=准备离线镜像包>准备离线镜像包<a class=td-heading-self-link href=#%e5%87%86%e5%a4%87%e7%a6%bb%e7%ba%bf%e9%95%9c%e5%83%8f%e5%8c%85 aria-label="Heading self-link"></a></h3><h4 id=1-下载镜像>1. 下载镜像<a class=td-heading-self-link href=#1-%e4%b8%8b%e8%bd%bd%e9%95%9c%e5%83%8f aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 下载所有镜像到本地</span>
</span></span><span style=display:flex><span>make download <span style=color:#000>SAVE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 下载指定版本</span>
</span></span><span style=display:flex><span>make download <span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>v1.0.0 <span style=color:#000>SAVE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 指定平台下载</span>
</span></span><span style=display:flex><span>make download <span style=color:#000>PLATFORM</span><span style=color:#ce5c00;font-weight:700>=</span>linux/amd64 <span style=color:#000>SAVE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span></code></pre></div><p>镜像将保存在 <code>dist/</code> 目录。</p><h4 id=2-打包传输>2. 打包传输<a class=td-heading-self-link href=#2-%e6%89%93%e5%8c%85%e4%bc%a0%e8%be%93 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 打包</span>
</span></span><span style=display:flex><span>tar czf datamate-images.tar.gz dist/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 传输到目标服务器</span>
</span></span><span style=display:flex><span>scp datamate-images.tar.gz user@target-server:/tmp/
</span></span></code></pre></div><h3 id=离线安装>离线安装<a class=td-heading-self-link href=#%e7%a6%bb%e7%ba%bf%e5%ae%89%e8%a3%85 aria-label="Heading self-link"></a></h3><h4 id=1-加载镜像>1. 加载镜像<a class=td-heading-self-link href=#1-%e5%8a%a0%e8%bd%bd%e9%95%9c%e5%83%8f aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 在目标服务器上解压</span>
</span></span><span style=display:flex><span>tar xzf datamate-images.tar.gz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 加载所有镜像</span>
</span></span><span style=display:flex><span>make load-images
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或手动加载</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> img in dist/*.tar<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span>
</span></span><span style=display:flex><span>  docker load -i <span style=color:#000>$img</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>done</span>
</span></span></code></pre></div><h4 id=2-修改配置>2. 修改配置<a class=td-heading-self-link href=#2-%e4%bf%ae%e6%94%b9%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h4><p>使用本地镜像时，设置 <code>REGISTRY</code> 为空：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Docker Compose 部署</span>
</span></span><span style=display:flex><span><span style=color:#000>REGISTRY</span><span style=color:#ce5c00;font-weight:700>=</span> docker compose -f deployment/docker/datamate/docker-compose.yml up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Makefile</span>
</span></span><span style=display:flex><span>make install <span style=color:#000>dev</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span></code></pre></div><h4 id=3-离线依赖>3. 离线依赖<a class=td-heading-self-link href=#3-%e7%a6%bb%e7%ba%bf%e4%be%9d%e8%b5%96 aria-label="Heading self-link"></a></h4><p>某些组件可能需要额外的离线资源：</p><ul><li><strong>Python 包</strong>：预装在运行时镜像中</li><li><strong>Node 包</strong>：预装在前端镜像中</li><li><strong>Java 包</strong>：预装在后端镜像中</li></ul><h2 id=升级指南>升级指南<a class=td-heading-self-link href=#%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8d%97 aria-label="Heading self-link"></a></h2><h3 id=docker-compose-升级>Docker Compose 升级<a class=td-heading-self-link href=#docker-compose-%e5%8d%87%e7%ba%a7 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. 备份数据</span>
</span></span><span style=display:flex><span>docker run --rm -v datamate-postgresql-volume:/data -v <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>:/backup <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  ubuntu tar czf /backup/postgres-backup.tar.gz /data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. 拉取新镜像</span>
</span></span><span style=display:flex><span>docker pull ghcr.io/modelengine-group/datamate-backend:latest
</span></span><span style=display:flex><span>docker pull ghcr.io/modelengine-group/datamate-frontend:latest
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># ... 其他镜像</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 3. 停止服务</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml down
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 4. 启动新版本</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 5. 验证升级</span>
</span></span><span style=display:flex><span>docker ps
</span></span><span style=display:flex><span>docker logs -f datamate-backend
</span></span></code></pre></div><p>或使用 Makefile：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make datamate-docker-upgrade
</span></span></code></pre></div><h3 id=kubernetes-升级>Kubernetes 升级<a class=td-heading-self-link href=#kubernetes-%e5%8d%87%e7%ba%a7 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. 备份数据</span>
</span></span><span style=display:flex><span>kubectl <span style=color:#204a87>exec</span> -n datamate deployment/datamate-database -- <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  pg_dump -U postgres datamate &gt; backup.sql
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. 更新 Helm Chart</span>
</span></span><span style=display:flex><span>helm upgrade datamate deployment/helm/datamate/ <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --namespace datamate <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  --set global.image.tag<span style=color:#ce5c00;font-weight:700>=</span>new-version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 3. 监控升级状态</span>
</span></span><span style=display:flex><span>kubectl rollout status deployment/datamate-backend -n datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 4. 查看新 Pod 状态</span>
</span></span><span style=display:flex><span>kubectl get pods -n datamate
</span></span></code></pre></div><h2 id=卸载>卸载<a class=td-heading-self-link href=#%e5%8d%b8%e8%bd%bd aria-label="Heading self-link"></a></h2><h3 id=docker-compose-完全卸载>Docker Compose 完全卸载<a class=td-heading-self-link href=#docker-compose-%e5%ae%8c%e5%85%a8%e5%8d%b8%e8%bd%bd aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Makefile</span>
</span></span><span style=display:flex><span>make uninstall
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 选择删除数据卷以完全清理</span>
</span></span></code></pre></div><p>或手动卸载：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 停止并删除容器</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile milvus --profile label-studio down -v
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 删除所有卷</span>
</span></span><span style=display:flex><span>docker volume rm datamate-dataset-volume <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  datamate-postgresql-volume <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  datamate-log-volume <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># ... 其他卷</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 删除网络</span>
</span></span><span style=display:flex><span>docker network rm datamate-network
</span></span></code></pre></div><h3 id=kubernetes-完全卸载>Kubernetes 完全卸载<a class=td-heading-self-link href=#kubernetes-%e5%ae%8c%e5%85%a8%e5%8d%b8%e8%bd%bd aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 卸载所有组件</span>
</span></span><span style=display:flex><span>make uninstall <span style=color:#000>INSTALLER</span><span style=color:#ce5c00;font-weight:700>=</span>k8s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 Helm</span>
</span></span><span style=display:flex><span>helm uninstall datamate -n datamate
</span></span><span style=display:flex><span>helm uninstall milvus -n datamate
</span></span><span style=display:flex><span>helm uninstall label-studio -n datamate
</span></span><span style=display:flex><span>helm uninstall deer-flow -n datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 删除命名空间</span>
</span></span><span style=display:flex><span>kubectl delete namespace datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 删除 PV/PVC（根据存储类）</span>
</span></span><span style=display:flex><span>kubectl delete pvc -n datamate --all
</span></span></code></pre></div><h2 id=故障排查>故障排查<a class=td-heading-self-link href=#%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5 aria-label="Heading self-link"></a></h2><h3 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h3><h4 id=1-服务无法启动>1. 服务无法启动<a class=td-heading-self-link href=#1-%e6%9c%8d%e5%8a%a1%e6%97%a0%e6%b3%95%e5%90%af%e5%8a%a8 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查端口占用</span>
</span></span><span style=display:flex><span>netstat -tlnp <span style=color:#000;font-weight:700>|</span> grep -E <span style=color:#4e9a06>&#39;30000|8080|5432&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查磁盘空间</span>
</span></span><span style=display:flex><span>df -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查内存使用</span>
</span></span><span style=display:flex><span>free -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看详细日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend --tail <span style=color:#0000cf;font-weight:700>100</span>
</span></span></code></pre></div><h4 id=2-数据库连接失败>2. 数据库连接失败<a class=td-heading-self-link href=#2-%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查数据库容器</span>
</span></span><span style=display:flex><span>docker ps <span style=color:#000;font-weight:700>|</span> grep database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试数据库连接</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> -it datamate-database psql -U postgres -d datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查数据库日志</span>
</span></span><span style=display:flex><span>docker logs datamate-database
</span></span></code></pre></div><h4 id=3-前端无法访问后端>3. 前端无法访问后端<a class=td-heading-self-link href=#3-%e5%89%8d%e7%ab%af%e6%97%a0%e6%b3%95%e8%ae%bf%e9%97%ae%e5%90%8e%e7%ab%af aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查网关配置</span>
</span></span><span style=display:flex><span>docker logs datamate-gateway
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查网络连接</span>
</span></span><span style=display:flex><span>docker network inspect datamate-network
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试 API 连接</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/api/v1/health
</span></span></code></pre></div><h4 id=4-milvus-连接失败>4. Milvus 连接失败<a class=td-heading-self-link href=#4-milvus-%e8%bf%9e%e6%8e%a5%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查 Milvus 状态</span>
</span></span><span style=display:flex><span>docker logs milvus-standalone
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查依赖服务</span>
</span></span><span style=display:flex><span>docker logs milvus-etcd
</span></span><span style=display:flex><span>docker logs milvus-minio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试 Milvus 连接</span>
</span></span><span style=display:flex><span>curl http://localhost:19530/healthz
</span></span></code></pre></div><h3 id=日志位置>日志位置<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e4%bd%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>服务</th><th>日志位置</th></tr></thead><tbody><tr><td>前端</td><td><code>/var/log/datamate/frontend</code></td></tr><tr><td>后端</td><td><code>/var/log/datamate</code></td></tr><tr><td>数据库</td><td><code>/var/log/datamate/database</code></td></tr><tr><td>Ray 运行时</td><td><code>/tmp/ray</code></td></tr></tbody></table><h3 id=获取帮助>获取帮助<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e5%b8%ae%e5%8a%a9 aria-label="Heading self-link"></a></h3><p>如果遇到问题：</p><ol><li>查看 <a href=/datamate-docs/docs/appendix/troubleshooting/>故障排查文档</a></li><li>搜索 <a href=https://github.com/ModelEngine-Group/DataMate/issues>GitHub Issues</a></li><li>提交新的 Issue 并附上详细的错误日志</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-ffc590ea6468143712feda0ba56c1372>2.2 - 系统架构</h1><div class=lead>DataMate 系统架构设计说明</div><div class="pageinfo pageinfo-primary"><p>本文档详细介绍 DataMate 的系统架构、技术栈和设计理念。</p></div><h2 id=整体架构>整体架构<a class=td-heading-self-link href=#%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><p>DataMate 采用微服务架构，将系统拆分为多个独立的服务，每个服务负责特定的业务功能。这种架构提供了良好的可扩展性、可维护性和容错性。</p><pre tabindex=0><code>┌─────────────────────────────────────────────────────────────────┐
│                           前端层                                │
│                    (React + TypeScript)                         │
│                      Ant Design + Tailwind                      │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                        API 网关层                               │
│                    (Spring Cloud Gateway)                       │
│                      端口: 8080                                  │
└────────────────────────┬────────────────────────────────────────┘
                         │
         ┌───────────────┼───────────────┐
         ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│  Java 后端   │ │ Python 后端  │ │  运行时服务  │
│   服务组     │ │    服务      │ │   (Ray)      │
├──────────────┤ ├──────────────┤ ├──────────────┤
│· Main App    │ │· RAG Service │ │· Operator    │
│· Data Mgmt   │ │· LangChain   │ │  Execution  │
│· Collection  │ │· FastAPI     │ │              │
│· Cleaning    │ │              │ │              │
│· Annotation  │ │              │ │              │
│· Synthesis   │ │              │ │              │
│· Evaluation  │ │              │ │              │
│· Operator    │ │              │ │              │
│· Pipeline    │ │              │ │              │
└──────┬───────┘ └──────┬───────┘ └──────┬───────┘
       │                │                │
       └────────────────┼────────────────┘
                        ▼
         ┌──────────────┴──────────────┐
         │                              │
    ┌────▼────┐    ┌─────────┐   ┌─────▼────┐
    │PostgreSQL│    │  Redis  │   │  Milvus  │
    │  (5432)  │    │ (6379)  │   │ (19530)  │
    └──────────┘    └─────────┘   └──────────┘
                                              │
                                        ┌─────▼─────┐
                                        │   MinIO   │
                                        │  (9000)   │
                                        └───────────┘
</code></pre><h2 id=技术栈>技术栈<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%a0%88 aria-label="Heading self-link"></a></h2><h3 id=前端技术栈>前端技术栈<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e6%8a%80%e6%9c%af%e6%a0%88 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>React</td><td>18.x</td><td>UI 框架</td></tr><tr><td>TypeScript</td><td>5.x</td><td>类型安全</td></tr><tr><td>Ant Design</td><td>5.x</td><td>UI 组件库</td></tr><tr><td>Tailwind CSS</td><td>3.x</td><td>样式框架</td></tr><tr><td>Redux Toolkit</td><td>2.x</td><td>状态管理</td></tr><tr><td>React Router</td><td>6.x</td><td>路由管理</td></tr><tr><td>Vite</td><td>5.x</td><td>构建工具</td></tr></tbody></table><h3 id=后端技术栈java>后端技术栈（Java）<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e6%8a%80%e6%9c%af%e6%a0%88java aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>Java</td><td>21</td><td>运行时环境</td></tr><tr><td>Spring Boot</td><td>3.5.6</td><td>应用框架</td></tr><tr><td>Spring Cloud</td><td>2023.x</td><td>微服务框架</td></tr><tr><td>MyBatis Plus</td><td>3.x</td><td>ORM 框架</td></tr><tr><td>PostgreSQL Driver</td><td>42.x</td><td>数据库驱动</td></tr><tr><td>Redis</td><td>5.x</td><td>缓存客户端</td></tr><tr><td>MinIO</td><td>8.x</td><td>对象存储客户端</td></tr></tbody></table><h3 id=后端技术栈python>后端技术栈（Python）<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e6%8a%80%e6%9c%af%e6%a0%88python aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>Python</td><td>3.11+</td><td>运行时环境</td></tr><tr><td>FastAPI</td><td>0.100+</td><td>Web 框架</td></tr><tr><td>LangChain</td><td>0.1+</td><td>LLM 应用框架</td></tr><tr><td>Ray</td><td>2.x</td><td>分布式计算</td></tr><tr><td>Pydantic</td><td>2.x</td><td>数据验证</td></tr></tbody></table><h3 id=数据存储>数据存储<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ad%98%e5%82%a8 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>PostgreSQL</td><td>15+</td><td>主数据库</td></tr><tr><td>Redis</td><td>8.x</td><td>缓存和消息队列</td></tr><tr><td>Milvus</td><td>2.6.5</td><td>向量数据库</td></tr><tr><td>MinIO</td><td>RELEASE.2024+</td><td>对象存储</td></tr></tbody></table><h2 id=微服务架构>微服务架构<a class=td-heading-self-link href=#%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><h3 id=服务列表>服务列表<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h3><table><thead><tr><th>服务名称</th><th>端口</th><th>技术栈</th><th>功能描述</th></tr></thead><tbody><tr><td>API Gateway</td><td>8080</td><td>Spring Cloud Gateway</td><td>统一入口、路由、认证</td></tr><tr><td>Frontend</td><td>30000</td><td>React</td><td>前端界面</td></tr><tr><td>Main Application</td><td>-</td><td>Spring Boot</td><td>核心业务逻辑</td></tr><tr><td>Data Management Service</td><td>8092</td><td>Spring Boot</td><td>数据集管理</td></tr><tr><td>Data Collection Service</td><td>-</td><td>Spring Boot</td><td>数据采集任务</td></tr><tr><td>Data Cleaning Service</td><td>-</td><td>Spring Boot</td><td>数据清洗任务</td></tr><tr><td>Data Annotation Service</td><td>-</td><td>Spring Boot</td><td>数据标注任务</td></tr><tr><td>Data Synthesis Service</td><td>-</td><td>Spring Boot</td><td>数据合成任务</td></tr><tr><td>Data Evaluation Service</td><td>-</td><td>Spring Boot</td><td>数据评估任务</td></tr><tr><td>Operator Market Service</td><td>-</td><td>Spring Boot</td><td>算子市场</td></tr><tr><td>RAG Indexer Service</td><td>-</td><td>Spring Boot</td><td>知识库索引</td></tr><tr><td>Runtime Service</td><td>8081</td><td>Python + Ray</td><td>算子执行引擎</td></tr><tr><td>Backend Python Service</td><td>18000</td><td>FastAPI</td><td>Python 后端服务</td></tr><tr><td>Database</td><td>5432</td><td>PostgreSQL</td><td>数据库</td></tr></tbody></table><h3 id=服务通信>服务通信<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h3><h4 id=同步通信>同步通信<a class=td-heading-self-link href=#%e5%90%8c%e6%ad%a5%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h4><ul><li><strong>API Gateway → 后端服务</strong>：HTTP/REST</li><li><strong>前端 → API Gateway</strong>：HTTP/REST</li><li><strong>后端服务之间</strong>：HTTP/REST (Feign Client)</li></ul><h4 id=异步通信>异步通信<a class=td-heading-self-link href=#%e5%bc%82%e6%ad%a5%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h4><ul><li><strong>任务执行</strong>：通过数据库任务队列</li><li><strong>事件通知</strong>：Redis Pub/Sub</li></ul><h3 id=服务发现与注册>服务发现与注册<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e5%8f%91%e7%8e%b0%e4%b8%8e%e6%b3%a8%e5%86%8c aria-label="Heading self-link"></a></h3><p>DataMate 使用简单的服务注册机制：</p><ul><li>服务启动时向数据库注册</li><li>API Gateway 从数据库获取服务列表</li><li>支持服务的动态扩缩容</li></ul><h2 id=数据架构>数据架构<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><h3 id=数据流转>数据流转<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b5%81%e8%bd%ac aria-label="Heading self-link"></a></h3><pre tabindex=0><code>┌─────────────┐
│  数据采集   │ 采集任务配置
│  Collection │ → DataX → 原始数据
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  数据管理   │ 数据集管理、文件上传
│ Management  │ → 结构化存储
└──────┬──────┘
       │
       ├──────────────┐
       ▼              ▼
┌─────────────┐  ┌─────────────┐
│  数据清洗   │  │  知识库     │
│  Cleaning   │  │  Knowledge  │
│             │  │  Base       │
└──────┬──────┘  └──────┬──────┘
       │                │
       ▼                ▼
┌─────────────┐  ┌─────────────┐
│  数据标注   │  │  向量索引    │
│  Annotation │  │  Milvus      │
└──────┬──────┘  └──────┬──────┘
       │                │
       ▼                │
┌─────────────┐          │
│  数据合成   │          │
│  Synthesis  │          │
└──────┬──────┘          │
       │                │
       ▼                ▼
┌─────────────┐  ┌─────────────┐
│  数据评估   │  │  RAG 检索   │
│  Evaluation │  │  Retrieval  │
└─────────────┘  └─────────────┘
</code></pre><h3 id=数据存储模型>数据存储模型<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ad%98%e5%82%a8%e6%a8%a1%e5%9e%8b aria-label="Heading self-link"></a></h3><h4 id=postgresql>PostgreSQL<a class=td-heading-self-link href=#postgresql aria-label="Heading self-link"></a></h4><ul><li><strong>业务数据</strong>：用户、数据集、任务、配置</li><li><strong>关系数据</strong>：服务间的关联关系</li><li><strong>事务数据</strong>：需要强一致性的数据</li></ul><h4 id=redis>Redis<a class=td-heading-self-link href=#redis aria-label="Heading self-link"></a></h4><ul><li><strong>缓存数据</strong>：热点数据缓存</li><li><strong>会话数据</strong>：用户会话信息</li><li><strong>任务队列</strong>：异步任务队列</li></ul><h4 id=milvus>Milvus<a class=td-heading-self-link href=#milvus aria-label="Heading self-link"></a></h4><ul><li><strong>向量数据</strong>：文档向量 embeddings</li><li><strong>向量索引</strong>：高效的相似度搜索</li></ul><h4 id=minio>MinIO<a class=td-heading-self-link href=#minio aria-label="Heading self-link"></a></h4><ul><li><strong>文件存储</strong>：原始文件、处理结果</li><li><strong>大数据文件</strong>：不适合数据库存储的文件</li></ul><h2 id=部署架构>部署架构<a class=td-heading-self-link href=#%e9%83%a8%e7%bd%b2%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><h3 id=docker-compose-部署>Docker Compose 部署<a class=td-heading-self-link href=#docker-compose-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><pre tabindex=0><code>┌────────────────────────────────────────────────┐
│              Docker Network                    │
│            datamate-network                    │
│                                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │Frontend  │  │ Gateway  │  │ Backend  │   │
│  │ :30000   │  │  :8080   │  │          │   │
│  └──────────┘  └──────────┘  └──────────┘   │
│                                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │Backend   │  │ Runtime  │  │Database  │   │
│  │  Python  │  │  :8081   │  │  :5432   │   │
│  └──────────┘  └──────────┘  └──────────┘   │
│                                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │  Milvus  │  │  MinIO   │  │  etcd    │   │
│  │  :19530  │  │  :9000   │  │          │   │
│  └──────────┘  └──────────┘  └──────────┘   │
└────────────────────────────────────────────────┘
</code></pre><h3 id=kubernetes-部署>Kubernetes 部署<a class=td-heading-self-link href=#kubernetes-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h3><pre tabindex=0><code>┌────────────────────────────────────────────────┐
│           Kubernetes Cluster                   │
│                                                │
│  Namespace: datamate                           │
│                                                │
│  ┌────────────┐  ┌────────────┐              │
│  │ Deployment │  │ Deployment │              │
│  │  Frontend  │  │  Gateway   │              │
│  │   (3 Pods) │  │  (2 Pods)  │              │
│  └─────┬──────┘  └─────┬──────┘              │
│        │                │                     │
│  ┌─────▼────────────────▼──────┐              │
│  │       Service (LoadBalancer) │              │
│  └──────────────────────────────┘              │
│                                                │
│  ┌────────────┐  ┌────────────┐              │
│  │ StatefulSet│  │ Deployment │              │
│  │  Database  │  │  Backend   │              │
│  └────────────┘  └────────────┘              │
└────────────────────────────────────────────────┘
</code></pre><h2 id=安全架构>安全架构<a class=td-heading-self-link href=#%e5%ae%89%e5%85%a8%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h2><h3 id=认证与授权>认证与授权<a class=td-heading-self-link href=#%e8%ae%a4%e8%af%81%e4%b8%8e%e6%8e%88%e6%9d%83 aria-label="Heading self-link"></a></h3><h4 id=jwt-认证可选>JWT 认证（可选）<a class=td-heading-self-link href=#jwt-%e8%ae%a4%e8%af%81%e5%8f%af%e9%80%89 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>datamate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>jwt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>enable</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># 启用 JWT 认证</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>secret</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>your-secret-key</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>expiration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>86400</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># 24 小时</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h4 id=api-key-认证>API Key 认证<a class=td-heading-self-link href=#api-key-%e8%ae%a4%e8%af%81 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>datamate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>api-key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>enable</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=数据安全>数据安全<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8 aria-label="Heading self-link"></a></h3><h4 id=传输加密>传输加密<a class=td-heading-self-link href=#%e4%bc%a0%e8%be%93%e5%8a%a0%e5%af%86 aria-label="Heading self-link"></a></h4><ul><li>API Gateway 支持 HTTPS/TLS</li><li>内部服务通信可配置加密</li></ul><h4 id=存储加密>存储加密<a class=td-heading-self-link href=#%e5%ad%98%e5%82%a8%e5%8a%a0%e5%af%86 aria-label="Heading self-link"></a></h4><ul><li>数据库支持透明数据加密 (TDE)</li><li>MinIO 支持服务端加密</li><li>Milvus 支持加密存储</li></ul><h4 id=网络隔离>网络隔离<a class=td-heading-self-link href=#%e7%bd%91%e7%bb%9c%e9%9a%94%e7%a6%bb aria-label="Heading self-link"></a></h4><ul><li>Docker Network 隔离</li><li>Kubernetes Network Policy</li><li>VPC 隔离（云环境）</li></ul><h3 id=访问控制>访问控制<a class=td-heading-self-link href=#%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><h4 id=基于角色的访问控制-rbac>基于角色的访问控制 (RBAC)<a class=td-heading-self-link href=#%e5%9f%ba%e4%ba%8e%e8%a7%92%e8%89%b2%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6-rbac aria-label="Heading self-link"></a></h4><ul><li>管理员：所有权限</li><li>数据管理员：数据管理权限</li><li>标注员：标注权限</li><li>查看者：只读权限</li></ul><h4 id=数据权限>数据权限<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%9d%83%e9%99%90 aria-label="Heading self-link"></a></h4><ul><li>数据集级权限控制</li><li>文件级权限控制</li><li>任务级权限控制</li></ul><h2 id=扩展性设计>扩展性设计<a class=td-heading-self-link href=#%e6%89%a9%e5%b1%95%e6%80%a7%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h2><h3 id=水平扩展>水平扩展<a class=td-heading-self-link href=#%e6%b0%b4%e5%b9%b3%e6%89%a9%e5%b1%95 aria-label="Heading self-link"></a></h3><h4 id=无状态服务>无状态服务<a class=td-heading-self-link href=#%e6%97%a0%e7%8a%b6%e6%80%81%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><ul><li>前端：支持多副本</li><li>Gateway：支持多副本</li><li>Backend 服务：支持多副本</li></ul><h4 id=有状态服务>有状态服务<a class=td-heading-self-link href=#%e6%9c%89%e7%8a%b6%e6%80%81%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><ul><li>数据库：主从复制、分库分表</li><li>Milvus：分布式部署</li><li>MinIO：分布式纠删码</li></ul><h3 id=垂直扩展>垂直扩展<a class=td-heading-self-link href=#%e5%9e%82%e7%9b%b4%e6%89%a9%e5%b1%95 aria-label="Heading self-link"></a></h3><h4 id=资源配置>资源配置<a class=td-heading-self-link href=#%e8%b5%84%e6%ba%90%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>requests</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;1Gi&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cpu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;500m&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;4Gi&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cpu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;2000m&#34;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=缓存策略>缓存策略<a class=td-heading-self-link href=#%e7%bc%93%e5%ad%98%e7%ad%96%e7%95%a5 aria-label="Heading self-link"></a></h3><h4 id=多级缓存>多级缓存<a class=td-heading-self-link href=#%e5%a4%9a%e7%ba%a7%e7%bc%93%e5%ad%98 aria-label="Heading self-link"></a></h4><ol><li><strong>浏览器缓存</strong>：静态资源</li><li><strong>CDN 缓存</strong>：公共资源</li><li><strong>Redis 缓存</strong>：热点数据</li><li><strong>数据库缓存</strong>：查询缓存</li></ol><h2 id=监控与可观测性>监控与可观测性<a class=td-heading-self-link href=#%e7%9b%91%e6%8e%a7%e4%b8%8e%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7 aria-label="Heading self-link"></a></h2><h3 id=日志管理>日志管理<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=日志级别>日志级别<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab aria-label="Heading self-link"></a></h4><ul><li>DEBUG：详细调试信息</li><li>INFO：一般信息</li><li>WARN：警告信息</li><li>ERROR：错误信息</li></ul><h4 id=日志存储>日志存储<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e5%ad%98%e5%82%a8 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/var/log/datamate/
</span></span><span style=display:flex><span>├── frontend/
</span></span><span style=display:flex><span>├── backend/
</span></span><span style=display:flex><span>├── database/
</span></span><span style=display:flex><span>└── runtime/
</span></span></code></pre></div><h3 id=性能监控>性能监控<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e7%9b%91%e6%8e%a7 aria-label="Heading self-link"></a></h3><h4 id=指标收集>指标收集<a class=td-heading-self-link href=#%e6%8c%87%e6%a0%87%e6%94%b6%e9%9b%86 aria-label="Heading self-link"></a></h4><ul><li>JVM 指标</li><li>HTTP 指标</li><li>数据库指标</li><li>自定义业务指标</li></ul><h4 id=监控工具可选>监控工具（可选）<a class=td-heading-self-link href=#%e7%9b%91%e6%8e%a7%e5%b7%a5%e5%85%b7%e5%8f%af%e9%80%89 aria-label="Heading self-link"></a></h4><ul><li>Prometheus + Grafana</li><li>ELK Stack (Elasticsearch + Logstash + Kibana)</li></ul><h2 id=高可用设计>高可用设计<a class=td-heading-self-link href=#%e9%ab%98%e5%8f%af%e7%94%a8%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h2><h3 id=服务高可用>服务高可用<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e9%ab%98%e5%8f%af%e7%94%a8 aria-label="Heading self-link"></a></h3><h4 id=健康检查>健康检查<a class=td-heading-self-link href=#%e5%81%a5%e5%ba%b7%e6%a3%80%e6%9f%a5 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>livenessProbe</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>httpGet</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/actuator/health</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8080</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>initialDelaySeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>periodSeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>readinessProbe</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>httpGet</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/actuator/health/readiness</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8080</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>initialDelaySeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>periodSeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h4 id=自动重启>自动重启<a class=td-heading-self-link href=#%e8%87%aa%e5%8a%a8%e9%87%8d%e5%90%af aria-label="Heading self-link"></a></h4><ul><li>Docker restart policy</li><li>Kubernetes restart policy</li></ul><h3 id=数据高可用>数据高可用<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%ab%98%e5%8f%af%e7%94%a8 aria-label="Heading self-link"></a></h3><h4 id=数据库>数据库<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h4><ul><li>主从复制</li><li>自动故障转移</li><li>定期备份</li></ul><h4 id=对象存储>对象存储<a class=td-heading-self-link href=#%e5%af%b9%e8%b1%a1%e5%ad%98%e5%82%a8 aria-label="Heading self-link"></a></h4><ul><li>纠删码</li><li>多区域复制</li></ul><h4 id=向量数据库>向量数据库<a class=td-heading-self-link href=#%e5%90%91%e9%87%8f%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h4><ul><li>主从架构</li><li>灾备恢复</li></ul><h2 id=性能优化>性能优化<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h2><h3 id=前端优化>前端优化<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>代码分割</li><li>懒加载</li><li>CDN 加速</li><li>资源压缩</li></ul><h3 id=后端优化>后端优化<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>连接池优化</li><li>查询优化</li><li>缓存策略</li><li>异步处理</li></ul><h3 id=数据库优化>数据库优化<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>索引优化</li><li>分区表</li><li>查询优化</li><li>连接池配置</li></ul><h2 id=下一步>下一步<a class=td-heading-self-link href=#%e4%b8%8b%e4%b8%80%e6%ad%a5 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/development/>开发环境搭建</a> - 本地开发环境配置</li><li><a href=/datamate-docs/docs/developer-guide/backend-architecture/>后端架构</a> - 详细的后端架构说明</li><li><a href=/datamate-docs/docs/developer-guide/frontend-architecture/>前端架构</a> - 详细的前端架构说明</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-4babb2f227d524ee394f6849feedff6a>2.3 - 开发环境搭建</h1><div class=lead>DataMate 本地开发环境配置指南</div><div class="pageinfo pageinfo-primary"><p>本文档介绍如何搭建 DataMate 的本地开发环境。</p></div><h2 id=前置要求>前置要求<a class=td-heading-self-link href=#%e5%89%8d%e7%bd%ae%e8%a6%81%e6%b1%82 aria-label="Heading self-link"></a></h2><h3 id=必需软件>必需软件<a class=td-heading-self-link href=#%e5%bf%85%e9%9c%80%e8%bd%af%e4%bb%b6 aria-label="Heading self-link"></a></h3><table><thead><tr><th>软件</th><th>版本要求</th><th>用途</th></tr></thead><tbody><tr><td>Node.js</td><td>18.x+</td><td>前端开发</td></tr><tr><td>pnpm</td><td>8.x+</td><td>前端包管理</td></tr><tr><td>Java</td><td>21</td><td>后端开发</td></tr><tr><td>Maven</td><td>3.9+</td><td>后端构建</td></tr><tr><td>Python</td><td>3.11+</td><td>Python 服务开发</td></tr><tr><td>Docker</td><td>20.10+</td><td>容器化部署</td></tr><tr><td>Docker Compose</td><td>2.0+</td><td>服务编排</td></tr><tr><td>Git</td><td>2.x+</td><td>版本控制</td></tr><tr><td>Make</td><td>4.x+</td><td>构建自动化</td></tr></tbody></table><h3 id=推荐软件>推荐软件<a class=td-heading-self-link href=#%e6%8e%a8%e8%8d%90%e8%bd%af%e4%bb%b6 aria-label="Heading self-link"></a></h3><ul><li><strong>IDE</strong>：IntelliJ IDEA (后端) + VS Code (前端/Python)</li><li><strong>数据库客户端</strong>：DBeaver、pgAdmin</li><li><strong>API 测试工具</strong>：Postman、curl</li><li><strong>Git 客户端</strong>：GitKraken、SourceTree</li></ul><h2 id=代码结构>代码结构<a class=td-heading-self-link href=#%e4%bb%a3%e7%a0%81%e7%bb%93%e6%9e%84 aria-label="Heading self-link"></a></h2><pre tabindex=0><code>DataMate/
├── backend/                 # Java 后端
│   ├── services/           # 微服务模块
│   │   ├── main-application/
│   │   ├── data-management-service/
│   │   ├── data-cleaning-service/
│   │   ├── data-collection-service/
│   │   ├── data-annotation-service/
│   │   ├── data-synthesis-service/
│   │   ├── data-evaluation-service/
│   │   ├── operator-market-service/
│   │   └── rag-indexer-service/
│   ├── openapi/            # OpenAPI 规范
│   └── scripts/            # 构建脚本
├── frontend/               # React 前端
│   ├── src/
│   │   ├── components/    # 公共组件
│   │   ├── pages/         # 页面组件
│   │   ├── services/      # API 服务
│   │   ├── store/         # Redux store
│   │   └── routes/        # 路由配置
│   └── package.json
├── runtime/                # Python 运行时
│   ├── deer-flow/         # DeerFlow 集成
│   └── datamate/          # DataMate 运行时
└── deployment/             # 部署配置
    ├── docker/            # Docker 配置
    └── helm/              # Helm Charts
</code></pre><h2 id=后端开发环境>后端开发环境<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83 aria-label="Heading self-link"></a></h2><h3 id=1-安装-java-21>1. 安装 Java 21<a class=td-heading-self-link href=#1-%e5%ae%89%e8%a3%85-java-21 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># macOS (使用 Homebrew)</span>
</span></span><span style=display:flex><span>brew install openjdk@21
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Linux (Ubuntu/Debian)</span>
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install openjdk-21-jdk
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 验证安装</span>
</span></span><span style=display:flex><span>java -version
</span></span></code></pre></div><h3 id=2-安装-maven>2. 安装 Maven<a class=td-heading-self-link href=#2-%e5%ae%89%e8%a3%85-maven aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># macOS</span>
</span></span><span style=display:flex><span>brew install maven
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Linux</span>
</span></span><span style=display:flex><span>sudo apt install maven
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 验证安装</span>
</span></span><span style=display:flex><span>mvn -version
</span></span></code></pre></div><h3 id=3-配置-ideintellij-idea>3. 配置 IDE（IntelliJ IDEA）<a class=td-heading-self-link href=#3-%e9%85%8d%e7%bd%ae-ideintellij-idea aria-label="Heading self-link"></a></h3><h4 id=安装插件>安装插件<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6 aria-label="Heading self-link"></a></h4><ul><li>Lombok Plugin</li><li>MyBatis Plugin</li><li>Rainbow Brackets</li><li>GitToolBox</li></ul><h4 id=导入项目>导入项目<a class=td-heading-self-link href=#%e5%af%bc%e5%85%a5%e9%a1%b9%e7%9b%ae aria-label="Heading self-link"></a></h4><ol><li>打开 IntelliJ IDEA</li><li>选择 <code>File</code> → <code>Open</code></li><li>选择 <code>backend</code> 目录</li><li>等待 Maven 依赖下载完成</li></ol><h4 id=配置运行配置>配置运行配置<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e8%bf%90%e8%a1%8c%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h4><p>创建 Spring Boot 运行配置：</p><ul><li>主类：对应服务的 Application 类</li><li>工作目录：服务模块目录</li><li>VM 参数：<code>-Dspring.profiles.active=dev</code></li></ul><h3 id=4-配置数据库>4. 配置数据库<a class=td-heading-self-link href=#4-%e9%85%8d%e7%bd%ae%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h3><h4 id=启动本地数据库docker>启动本地数据库（Docker）<a class=td-heading-self-link href=#%e5%90%af%e5%8a%a8%e6%9c%ac%e5%9c%b0%e6%95%b0%e6%8d%ae%e5%ba%93docker aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 仅启动数据库</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml up -d datamate-database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看数据库连接信息</span>
</span></span><span style=display:flex><span>docker logs datamate-database
</span></span></code></pre></div><p>默认连接信息：</p><ul><li>主机：localhost</li><li>端口：5432</li><li>数据库：datamate</li><li>用户名：postgres</li><li>密码：password</li></ul><h4 id=初始化数据库>初始化数据库<a class=td-heading-self-link href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 使用 Flyway 迁移（如果配置）</span>
</span></span><span style=display:flex><span>mvn flyway:migrate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或执行 SQL 脚本</span>
</span></span><span style=display:flex><span>psql -h localhost -U postgres -d datamate -f schema.sql
</span></span></code></pre></div><h3 id=5-运行后端服务>5. 运行后端服务<a class=td-heading-self-link href=#5-%e8%bf%90%e8%a1%8c%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=使用-maven-运行>使用 Maven 运行<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-maven-%e8%bf%90%e8%a1%8c aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> backend/services/main-application
</span></span><span style=display:flex><span>mvn spring-boot:run
</span></span></code></pre></div><h4 id=使用-ide-运行>使用 IDE 运行<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-ide-%e8%bf%90%e8%a1%8c aria-label="Heading self-link"></a></h4><ol><li>找到对应的 Application 类</li><li>右键 → Run</li><li>访问 http://localhost:8080</li></ol><h3 id=6-开发配置>6. 开发配置<a class=td-heading-self-link href=#6-%e5%bc%80%e5%8f%91%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><p>编辑 <code>application-dev.yml</code>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>jdbc:postgresql://localhost:5432/datamate</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>password</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>jpa</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>show-sql</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hibernate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>ddl-auto</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>update</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>logging</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>level</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>com.datamate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DEBUG</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=前端开发环境>前端开发环境<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83 aria-label="Heading self-link"></a></h2><h3 id=1-安装-nodejs>1. 安装 Node.js<a class=td-heading-self-link href=#1-%e5%ae%89%e8%a3%85-nodejs aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># macOS (使用 Homebrew)</span>
</span></span><span style=display:flex><span>brew install node@18
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Linux (Ubuntu/Debian)</span>
</span></span><span style=display:flex><span>curl -fsSL https://deb.nodesource.com/setup_18.x <span style=color:#000;font-weight:700>|</span> sudo -E bash -
</span></span><span style=display:flex><span>sudo apt-get install -y nodejs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 验证安装</span>
</span></span><span style=display:flex><span>node -v
</span></span><span style=display:flex><span>npm -v
</span></span></code></pre></div><h3 id=2-安装-pnpm>2. 安装 pnpm<a class=td-heading-self-link href=#2-%e5%ae%89%e8%a3%85-pnpm aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>npm install -g pnpm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 验证安装</span>
</span></span><span style=display:flex><span>pnpm -v
</span></span></code></pre></div><h3 id=3-安装依赖>3. 安装依赖<a class=td-heading-self-link href=#3-%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> frontend
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 安装依赖</span>
</span></span><span style=display:flex><span>pnpm install
</span></span></code></pre></div><h3 id=4-配置开发环境>4. 配置开发环境<a class=td-heading-self-link href=#4-%e9%85%8d%e7%bd%ae%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83 aria-label="Heading self-link"></a></h3><p>创建 <code>.env.development</code>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># API 地址</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_BASE_URL</span><span style=color:#ce5c00;font-weight:700>=</span>http://localhost:8080
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_TIMEOUT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>30000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 其他配置</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_APP_TITLE</span><span style=color:#ce5c00;font-weight:700>=</span>DataMate Dev
</span></span></code></pre></div><h3 id=5-启动开发服务器>5. 启动开发服务器<a class=td-heading-self-link href=#5-%e5%90%af%e5%8a%a8%e5%bc%80%e5%8f%91%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动开发服务器</span>
</span></span><span style=display:flex><span>pnpm dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或指定端口</span>
</span></span><span style=display:flex><span>pnpm dev --port <span style=color:#0000cf;font-weight:700>3000</span>
</span></span></code></pre></div><p>访问 http://localhost:3000</p><h3 id=6-构建生产版本>6. 构建生产版本<a class=td-heading-self-link href=#6-%e6%9e%84%e5%bb%ba%e7%94%9f%e4%ba%a7%e7%89%88%e6%9c%ac aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 构建</span>
</span></span><span style=display:flex><span>pnpm build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 预览构建结果</span>
</span></span><span style=display:flex><span>pnpm preview
</span></span></code></pre></div><h3 id=7-前端开发技巧>7. 前端开发技巧<a class=td-heading-self-link href=#7-%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%8a%80%e5%b7%a7 aria-label="Heading self-link"></a></h3><h4 id=热更新>热更新<a class=td-heading-self-link href=#%e7%83%ad%e6%9b%b4%e6%96%b0 aria-label="Heading self-link"></a></h4><ul><li>修改 <code>.tsx</code> 或 <code>.css</code> 文件会自动热更新</li><li>修改配置文件需要重启</li></ul><h4 id=代理配置>代理配置<a class=td-heading-self-link href=#%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h4><p>在 <code>vite.config.ts</code> 中配置代理：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#000>server</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>proxy</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#39;/api&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>target</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;http://localhost:8080&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#000>changeOrigin</span>: <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=路径别名>路径别名<a class=td-heading-self-link href=#%e8%b7%af%e5%be%84%e5%88%ab%e5%90%8d aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>MyComponent</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/components/MyComponent&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>useStore</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/store/hooks&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h2 id=python-服务开发环境>Python 服务开发环境<a class=td-heading-self-link href=#python-%e6%9c%8d%e5%8a%a1%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83 aria-label="Heading self-link"></a></h2><h3 id=1-安装-python-311>1. 安装 Python 3.11<a class=td-heading-self-link href=#1-%e5%ae%89%e8%a3%85-python-311 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># macOS</span>
</span></span><span style=display:flex><span>brew install python@3.11
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Linux</span>
</span></span><span style=display:flex><span>sudo apt install python3.11 python3.11-venv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 验证安装</span>
</span></span><span style=display:flex><span>python3.11 --version
</span></span></code></pre></div><h3 id=2-创建虚拟环境>2. 创建虚拟环境<a class=td-heading-self-link href=#2-%e5%88%9b%e5%bb%ba%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 进入项目目录</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> runtime/datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 创建虚拟环境</span>
</span></span><span style=display:flex><span>python3.11 -m venv venv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 激活虚拟环境</span>
</span></span><span style=display:flex><span><span style=color:#204a87>source</span> venv/bin/activate  <span style=color:#8f5902;font-style:italic># Linux/macOS</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># venv\Scripts\activate   # Windows</span>
</span></span></code></pre></div><h3 id=3-安装依赖-1>3. 安装依赖<a class=td-heading-self-link href=#3-%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96-1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 安装依赖</span>
</span></span><span style=display:flex><span>pip install -r requirements.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 uv（更快）</span>
</span></span><span style=display:flex><span>pip install uv
</span></span><span style=display:flex><span>uv pip install -r requirements.txt
</span></span></code></pre></div><h3 id=4-配置环境变量>4. 配置环境变量<a class=td-heading-self-link href=#4-%e9%85%8d%e7%bd%ae%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label="Heading self-link"></a></h3><p>创建 <code>.env</code> 文件：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 数据库配置</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_HOST</span><span style=color:#ce5c00;font-weight:700>=</span>localhost
</span></span><span style=display:flex><span><span style=color:#000>PG_PORT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5432</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_USER</span><span style=color:#ce5c00;font-weight:700>=</span>postgres
</span></span><span style=display:flex><span><span style=color:#000>PG_PASSWORD</span><span style=color:#ce5c00;font-weight:700>=</span>password
</span></span><span style=display:flex><span><span style=color:#000>PG_DATABASE</span><span style=color:#ce5c00;font-weight:700>=</span>datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 日志级别</span>
</span></span><span style=display:flex><span><span style=color:#000>log_level</span><span style=color:#ce5c00;font-weight:700>=</span>DEBUG
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># JWT 配置</span>
</span></span><span style=display:flex><span><span style=color:#000>datamate_jwt_enable</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>false</span>
</span></span></code></pre></div><h3 id=5-运行-python-服务>5. 运行 Python 服务<a class=td-heading-self-link href=#5-%e8%bf%90%e8%a1%8c-python-%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 运行运行时服务</span>
</span></span><span style=display:flex><span>python /opt/runtime/datamate/operator_runtime.py --port <span style=color:#0000cf;font-weight:700>8081</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或使用 FastAPI</span>
</span></span><span style=display:flex><span>uvicorn main:app --reload --port <span style=color:#0000cf;font-weight:700>18000</span>
</span></span></code></pre></div><h3 id=6-python-开发工具>6. Python 开发工具<a class=td-heading-self-link href=#6-python-%e5%bc%80%e5%8f%91%e5%b7%a5%e5%85%b7 aria-label="Heading self-link"></a></h3><h4 id=推荐插件>推荐插件<a class=td-heading-self-link href=#%e6%8e%a8%e8%8d%90%e6%8f%92%e4%bb%b6 aria-label="Heading self-link"></a></h4><ul><li>Python (VS Code)</li><li>Pylance</li><li>Python Test Explorer</li></ul><h4 id=代码格式化>代码格式化<a class=td-heading-self-link href=#%e4%bb%a3%e7%a0%81%e6%a0%bc%e5%bc%8f%e5%8c%96 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Black</span>
</span></span><span style=display:flex><span>pip install black
</span></span><span style=display:flex><span>black .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># isort</span>
</span></span><span style=display:flex><span>pip install isort
</span></span><span style=display:flex><span>isort .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 自动格式化</span>
</span></span><span style=display:flex><span>pip install autopep8
</span></span></code></pre></div><h2 id=本地调试>本地调试<a class=td-heading-self-link href=#%e6%9c%ac%e5%9c%b0%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h2><h3 id=1-启动所有服务>1. 启动所有服务<a class=td-heading-self-link href=#1-%e5%90%af%e5%8a%a8%e6%89%80%e6%9c%89%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=使用-docker-compose>使用 Docker Compose<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-docker-compose aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动基础服务（数据库、Redis 等）</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml up -d <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  datamate-database <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  datamate-redis
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动 Milvus（可选）</span>
</span></span><span style=display:flex><span>docker compose -f deployment/docker/datamate/docker-compose.yml --profile milvus up -d
</span></span></code></pre></div><h4 id=启动后端服务>启动后端服务<a class=td-heading-self-link href=#%e5%90%af%e5%8a%a8%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 终端 1：启动 Main Application</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> backend/services/main-application
</span></span><span style=display:flex><span>mvn spring-boot:run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 终端 2：启动 Data Management Service</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> backend/services/data-management-service
</span></span><span style=display:flex><span>mvn spring-boot:run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># ... 其他服务</span>
</span></span></code></pre></div><h4 id=启动前端>启动前端<a class=td-heading-self-link href=#%e5%90%af%e5%8a%a8%e5%89%8d%e7%ab%af aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> frontend
</span></span><span style=display:flex><span>pnpm dev
</span></span></code></pre></div><h4 id=启动-python-服务>启动 Python 服务<a class=td-heading-self-link href=#%e5%90%af%e5%8a%a8-python-%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 终端 N：启动运行时服务</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> runtime/datamate
</span></span><span style=display:flex><span>python operator_runtime.py --port <span style=color:#0000cf;font-weight:700>8081</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 终端 N+1：启动后端 Python 服务</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> backend-python
</span></span><span style=display:flex><span>uvicorn main:app --reload --port <span style=color:#0000cf;font-weight:700>18000</span>
</span></span></code></pre></div><h3 id=2-调试技巧>2. 调试技巧<a class=td-heading-self-link href=#2-%e8%b0%83%e8%af%95%e6%8a%80%e5%b7%a7 aria-label="Heading self-link"></a></h3><h4 id=后端调试>后端调试<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h4><p>在 IntelliJ IDEA 中：</p><ol><li>在代码行号处点击设置断点</li><li>右键 → Debug 运行配置</li><li>发送请求触发断点</li></ol><h4 id=前端调试>前端调试<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h4><p>在浏览器中：</p><ol><li>按 F12 打开开发者工具</li><li>使用 <code>console.log</code> 或 <code>debugger</code> 语句</li><li>React DevTools 查看组件状态</li></ol><h4 id=python-调试>Python 调试<a class=td-heading-self-link href=#python-%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h4><p>在 VS Code 中：</p><ol><li>安装 Python 扩展</li><li>创建 <code>launch.json</code> 配置</li><li>设置断点并 F5 启动调试</li></ol><h3 id=3-日志查看>3. 日志查看<a class=td-heading-self-link href=#3-%e6%97%a5%e5%bf%97%e6%9f%a5%e7%9c%8b aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Docker 容器日志</span>
</span></span><span style=display:flex><span>docker logs -f datamate-backend
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 应用日志</span>
</span></span><span style=display:flex><span>tail -f /var/log/datamate/backend/app.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 只查看错误日志</span>
</span></span><span style=display:flex><span>tail -f /var/log/datamate/backend/app.log <span style=color:#000;font-weight:700>|</span> grep ERROR
</span></span></code></pre></div><h2 id=代码规范>代码规范<a class=td-heading-self-link href=#%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h2><h3 id=java-代码规范>Java 代码规范<a class=td-heading-self-link href=#java-%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h3><h4 id=命名规范>命名规范<a class=td-heading-self-link href=#%e5%91%bd%e5%90%8d%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h4><ul><li>类名：大驼峰 <code>UserService</code></li><li>方法名：小驼峰 <code>getUserById</code></li><li>常量：全大写 <code>MAX_SIZE</code></li><li>变量：小驼峰 <code>userName</code></li></ul><h4 id=注释规范>注释规范<a class=td-heading-self-link href=#%e6%b3%a8%e9%87%8a%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * 用户服务
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> *
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * @author Your Name
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * @since 1.0.0
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> */</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>UserService</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     * 根据用户 ID 获取用户信息
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     *
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     * @param userId 用户 ID
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     * @return 用户信息
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     * @throws UserNotFoundException 用户不存在异常
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     */</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>User</span><span style=color:#f8f8f8> </span><span style=color:#000>getUserById</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Long</span><span style=color:#f8f8f8> </span><span style=color:#000>userId</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic>// ...</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=typescript-代码规范>TypeScript 代码规范<a class=td-heading-self-link href=#typescript-%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h3><h4 id=命名规范-1>命名规范<a class=td-heading-self-link href=#%e5%91%bd%e5%90%8d%e8%a7%84%e8%8c%83-1 aria-label="Heading self-link"></a></h4><ul><li>组件：大驼峰 <code>UserProfile</code></li><li>类型/接口：大驼峰 <code>UserData</code></li><li>函数：小驼峰 <code>getUserData</code></li><li>常量：全大写 <code>API_BASE_URL</code></li></ul><h4 id=组件规范>组件规范<a class=td-heading-self-link href=#%e7%bb%84%e4%bb%b6%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>UserProfileProps</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>userId</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>onUpdate</span><span style=color:#ce5c00;font-weight:700>?:</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>UserProfile</span>: <span style=color:#204a87;font-weight:700>React.FC</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>UserProfileProps</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>userId</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>onUpdate</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// 组件逻辑
</span></span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;...&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>default</span> <span style=color:#000>UserProfile</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=python-代码规范>Python 代码规范<a class=td-heading-self-link href=#python-%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h3><h4 id=遵循-pep-8>遵循 PEP 8<a class=td-heading-self-link href=#%e9%81%b5%e5%be%aa-pep-8 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_user</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user_id</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>dict</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    获取用户信息
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Args:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        user_id: 用户 ID
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        用户信息字典
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># ...</span>
</span></span></code></pre></div><h2 id=测试>测试<a class=td-heading-self-link href=#%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h2><h3 id=后端测试>后端测试<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 单元测试</span>
</span></span><span style=display:flex><span>mvn <span style=color:#204a87>test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 集成测试</span>
</span></span><span style=display:flex><span>mvn verify
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 生成测试报告</span>
</span></span><span style=display:flex><span>mvn jacoco:report
</span></span></code></pre></div><h3 id=前端测试>前端测试<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 单元测试</span>
</span></span><span style=display:flex><span>pnpm <span style=color:#204a87>test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># E2E 测试</span>
</span></span><span style=display:flex><span>pnpm test:e2e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试覆盖率</span>
</span></span><span style=display:flex><span>pnpm test:coverage
</span></span></code></pre></div><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=后端启动失败>后端启动失败<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e5%90%af%e5%8a%a8%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><ol><li>检查 Java 版本：<code>java -version</code></li><li>检查端口占用：<code>lsof -i :8080</code></li><li>查看详细日志</li><li>清理并重新构建：<code>mvn clean install</code></li></ol><h3 id=前端启动失败>前端启动失败<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e5%90%af%e5%8a%a8%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><ol><li>检查 Node 版本：<code>node -v</code></li><li>删除 node_modules 重新安装：<code>rm -rf node_modules && pnpm install</code></li><li>检查端口占用：<code>lsof -i :3000</code></li><li>清理缓存：<code>pnpm store prune</code></li></ol><h3 id=数据库连接失败>数据库连接失败<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><ol><li>检查数据库是否启动：<code>docker ps | grep postgres</code></li><li>测试连接：<code>psql -h localhost -U postgres -d datamate</code></li><li>检查防火墙设置</li><li>验证连接配置</li></ol><h2 id=下一步>下一步<a class=td-heading-self-link href=#%e4%b8%8b%e4%b8%80%e6%ad%a5 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/developer-guide/backend-architecture/>后端架构</a> - 详细的后端架构说明</li><li><a href=/datamate-docs/docs/developer-guide/frontend-architecture/>前端架构</a> - 详细的前端架构说明</li><li><a href=/docs/developer-guide/contribute/>贡献指南</a> - 如何贡献代码</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-ecf7e357d2a131135219db95eddda49c>3 - 用户指南</h1><div class=lead>DataMate 功能使用指南</div><div class="pageinfo pageinfo-primary"><p>本指南介绍 DataMate 各个功能模块的使用方法。</p></div><p>DataMate 提供完整的大模型数据处理解决方案，涵盖数据采集、管理、清洗、标注、合成、评估等全流程。</p><h2 id=功能模块>功能模块<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a8%a1%e5%9d%97 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-collection/>数据采集</a> - 从多种数据源采集数据</li><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理数据集和文件</li><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 清洗和预处理数据</li><li><a href=/datamate-docs/docs/user-guide/data-annotation/>数据标注</a> - 数据标注和质量控制</li><li><a href=/datamate-docs/docs/user-guide/data-synthesis/>数据合成</a> - 基于大模型的数据增强</li><li><a href=/datamate-docs/docs/user-guide/data-evaluation/>数据评估</a> - 数据质量评估</li><li><a href=/datamate-docs/docs/user-guide/knowledge-base/>知识库管理</a> - RAG 知识库构建</li><li><a href=/datamate-docs/docs/user-guide/operator-market/>算子市场</a> - 数据处理算子管理</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 可视化流程编排</li><li><a href=/datamate-docs/docs/user-guide/agent/>Agent 对话</a> - AI 智能助手</li></ul><h2 id=典型使用场景>典型使用场景<a class=td-heading-self-link href=#%e5%85%b8%e5%9e%8b%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af aria-label="Heading self-link"></a></h2><h3 id=模型微调场景>模型微调场景<a class=td-heading-self-link href=#%e6%a8%a1%e5%9e%8b%e5%be%ae%e8%b0%83%e5%9c%ba%e6%99%af aria-label="Heading self-link"></a></h3><pre tabindex=0><code>1. 数据采集 → 2. 数据管理 → 3. 数据清洗 → 4. 数据标注
↓
5. 数据评估 → 6. 导出训练数据
</code></pre><h3 id=rag-应用场景>RAG 应用场景<a class=td-heading-self-link href=#rag-%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af aria-label="Heading self-link"></a></h3><pre tabindex=0><code>1. 上传文档 → 2. 向量化索引 → 3. 知识库管理
↓
4. Agent 对话（知识库问答）
</code></pre><h3 id=数据增强场景>数据增强场景<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%a2%9e%e5%bc%ba%e5%9c%ba%e6%99%af aria-label="Heading self-link"></a></h3><pre tabindex=0><code>1. 准备原始数据 → 2. 创建指令模板 → 3. 数据合成
↓
4. 质量评估 → 5. 导出增强数据
</code></pre><h2 id=快速链接>快速链接<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e9%93%be%e6%8e%a5 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/>快速开始</a> - 部署和安装</li><li><a href=/datamate-docs/docs/api-reference/>API 参考</a> - API 文档</li><li><a href=/datamate-docs/docs/developer-guide/>开发者指南</a> - 架构和开发</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c4873d677bf0f352ce848879e4aac7d3>3.1 - 数据归集</h1><div class=lead>使用 DataMate 从多种数据源归集数据</div><div class="pageinfo pageinfo-primary"><p>数据归集模块帮助您从多种数据源（数据库、文件系统、API 等）归集数据到 DataMate 平台。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据归集模块基于 <a href=https://github.com/alibaba/DataX>DataX</a> 实现，支持：</p><ul><li><strong>多种数据源</strong>：MySQL、PostgreSQL、Oracle、SQL Server 等关系型数据库</li><li><strong>异构同步</strong>：不同数据源之间的数据同步</li><li><strong>批量归集</strong>：大规模数据的批量归集和同步</li><li><strong>定时任务</strong>：支持定时执行归集任务</li><li><strong>任务监控</strong>：实时监控归集任务执行状态</li></ul><h2 id=支持的数据源>支持的数据源<a class=td-heading-self-link href=#%e6%94%af%e6%8c%81%e7%9a%84%e6%95%b0%e6%8d%ae%e6%ba%90 aria-label="Heading self-link"></a></h2><table><thead><tr><th>数据源类型</th><th>Reader</th><th>Writer</th><th>说明</th></tr></thead><tbody><tr><td>MySQL</td><td>✅</td><td>✅</td><td>关系型数据库</td></tr><tr><td>PostgreSQL</td><td>✅</td><td>✅</td><td>关系型数据库</td></tr><tr><td>Oracle</td><td>✅</td><td>✅</td><td>企业级数据库</td></tr><tr><td>SQL Server</td><td>✅</td><td>✅</td><td>微软数据库</td></tr><tr><td>JSON 文件</td><td>✅</td><td>✅</td><td>JSON 格式文件</td></tr><tr><td>CSV 文件</td><td>✅</td><td>✅</td><td>CSV 格式文件</td></tr><tr><td>TXT 文件</td><td>✅</td><td>✅</td><td>文本文件</td></tr><tr><td>FTP</td><td>✅</td><td>✅</td><td>FTP 服务器</td></tr><tr><td>HDFS</td><td>✅</td><td>✅</td><td>Hadoop 分布式文件系统</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建采集任务>1. 创建采集任务<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e9%87%87%e9%9b%86%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据采集页面>步骤 1：进入数据采集页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e9%87%87%e9%9b%86%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据采集</strong>。</p><h4 id=步骤-2点击创建任务>步骤 2：点击创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e7%82%b9%e5%87%bb%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建任务</strong> 按钮。</p><h4 id=步骤-3配置基本信息>步骤 3：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><p>填写以下基本信息：</p><ul><li><strong>名称</strong>：为任务取一个有意义的名称</li><li><strong>超时时间</strong>：任务执行超时时间（秒）</li><li><strong>描述</strong>：描述任务用途（可选）</li></ul><h4 id=步骤-4选择同步方式>步骤 4：选择同步方式<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%80%89%e6%8b%a9%e5%90%8c%e6%ad%a5%e6%96%b9%e5%bc%8f aria-label="Heading self-link"></a></h4><p>选择任务的同步方式：</p><ul><li><strong>立即同步</strong>：创建任务后立即执行一次</li><li><strong>定时同步</strong>：按照定时规则周期性执行</li></ul><h4 id=步骤-5配置数据源>步骤 5：配置数据源<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e9%85%8d%e7%bd%ae%e6%95%b0%e6%8d%ae%e6%ba%90 aria-label="Heading self-link"></a></h4><p><strong>选择数据源类型</strong>：从下拉列表中选择数据源类型（如 MySQL、CSV 等）</p><p><strong>配置数据源参数</strong>：根据选择的数据源模板，填写相应的连接参数（表单形式）</p><p><strong>MySQL 示例</strong>：</p><ul><li>JDBC URL：<code>jdbc:mysql://localhost:3306/mydb</code></li><li>用户名：<code>root</code></li><li>密码：<code>password</code></li><li>表名：<code>users</code></li></ul><p><strong>CSV 文件示例</strong>：</p><ul><li>文件路径：<code>/data/input.csv</code></li><li>编码：<code>UTF-8</code></li><li>分隔符：<code>,</code></li><li>包含表头：是/否</li></ul><h4 id=步骤-6配置字段映射>步骤 6：配置字段映射<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-6%e9%85%8d%e7%bd%ae%e5%ad%97%e6%ae%b5%e6%98%a0%e5%b0%84 aria-label="Heading self-link"></a></h4><p>配置源字段到目标字段的映射关系：</p><table><thead><tr><th>源字段</th><th>目标字段</th><th>类型转换</th></tr></thead><tbody><tr><td>id</td><td>user_id</td><td>Long → Long</td></tr><tr><td>name</td><td>username</td><td>String → String</td></tr><tr><td>email</td><td>email</td><td>String → String</td></tr></tbody></table><h4 id=步骤-7配置执行策略>步骤 7：配置执行策略<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-7%e9%85%8d%e7%bd%ae%e6%89%a7%e8%a1%8c%e7%ad%96%e7%95%a5 aria-label="Heading self-link"></a></h4><ul><li><strong>并发数</strong>：任务并发通道数（默认 1）</li></ul><p>选择 <strong>定时同步</strong> 时，需要配置定时规则：</p><ul><li><strong>Cron 表达式</strong>：如 <code>0 0 2 * * ?</code> 表示每天凌晨 2 点执行</li><li>或使用表单快速设置：<ul><li>执行频率：每小时 / 每天 / 每周 / 每月</li><li>具体时间：选择执行时间点</li></ul></li></ul><h4 id=步骤-8创建并执行>步骤 8：创建并执行<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-8%e5%88%9b%e5%bb%ba%e5%b9%b6%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮创建任务。</p><ul><li>如果选择 <strong>立即同步</strong>，任务将自动开始运行</li><li>如果选择 <strong>定时同步</strong>，任务将按照定时规则周期性执行</li></ul><h3 id=2-监控任务执行>2. 监控任务执行<a class=td-heading-self-link href=#2-%e7%9b%91%e6%8e%a7%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h3><h4 id=查看任务列表>查看任务列表<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h4><p>在数据采集页面，可以看到所有采集任务及其状态：</p><table><thead><tr><th>任务名称</th><th>数据源</th><th>状态</th><th>最后执行时间</th><th>操作</th></tr></thead><tbody><tr><td>用户数据归集</td><td>MySQL</td><td>运行中</td><td>2024-01-15 10:30</td><td>查看执行记录</td></tr><tr><td>日志文件归集</td><td>CSV</td><td>已完成</td><td>2024-01-14 18:00</td><td>查看执行记录</td></tr></tbody></table><h4 id=查看任务详情>查看任务详情<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h4><p>点击任务名称或 <strong>查看详情</strong> 按钮，可以看到：</p><ul><li><strong>基本信息</strong>：任务配置信息</li><li><strong>执行记录</strong>：历史执行记录</li><li><strong>执行日志</strong>：详细的执行日志</li><li><strong>数据统计</strong>：采集的数据量、成功/失败记录数</li></ul><h4 id=查看执行日志>查看执行日志<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e6%89%a7%e8%a1%8c%e6%97%a5%e5%bf%97 aria-label="Heading self-link"></a></h4><p>在任务详情页面，点击 <strong>执行记录</strong> 标签，选择某次执行记录，查看详细日志：</p><pre tabindex=0><code>2024-01-15 10:30:00 INFO  任务开始执行
2024-01-15 10:30:01 INFO  连接数据源成功
2024-01-15 10:30:02 INFO  开始读取数据
2024-01-15 10:30:10 INFO  读取数据完成，共 10000 条
2024-01-15 10:30:11 INFO  开始写入目标数据集
2024-01-15 10:30:15 INFO  写入数据完成
2024-01-15 10:30:15 INFO  任务执行成功
</code></pre><h3 id=3-任务管理>3. 任务管理<a class=td-heading-self-link href=#3-%e4%bb%bb%e5%8a%a1%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><p>任务列表中每个任务的操作包括：</p><ul><li><strong>查看执行记录</strong>：查看任务的历次执行情况</li><li><strong>删除</strong>：删除任务（注意：删除任务不会删除已归集的数据）</li></ul><p>点击任务名称可以查看任务详情，包括：</p><ul><li>基本信息配置</li><li>执行记录列表</li><li>数据统计信息</li></ul><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=datax-配置模板>DataX 配置模板<a class=td-heading-self-link href=#datax-%e9%85%8d%e7%bd%ae%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h3><p>DataMate 支持使用 DataX JSON 配置模板创建任务。</p><h4 id=基本结构>基本结构<a class=td-heading-self-link href=#%e5%9f%ba%e6%9c%ac%e7%bb%93%e6%9e%84 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;job&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;reader&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;mysqlreader&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>&#34;parameter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;username&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;root&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;password&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;password&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;column&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;email&#34;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;connection&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>              <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>&#34;jdbcUrl&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;jdbc:mysql://localhost:3306/mydb&#34;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>&#34;table&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;users&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>              <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;writer&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;txtfilewriter&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>&#34;parameter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/data/output&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;fileName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;users&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;writeMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;truncate&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;setting&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;speed&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;channel&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;byte&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1048576</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=使用模板>使用模板<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>在创建任务时，选择 <strong>使用模板</strong></li><li>粘贴 DataX JSON 配置</li><li>系统会自动解析配置并填充表单</li></ol><h3 id=定时任务>定时任务<a class=td-heading-self-link href=#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><p>使用 Cron 表达式配置定时执行规则：</p><table><thead><tr><th>表达式</th><th>说明</th></tr></thead><tbody><tr><td><code>0 0 2 * * ?</code></td><td>每天凌晨 2 点执行</td></tr><tr><td><code>0 0 */2 * * ?</code></td><td>每 2 小时执行一次</td></tr><tr><td><code>0 0 12 * * ?</code></td><td>每天中午 12 点执行</td></tr><tr><td><code>0 0 0 ? * MON</code></td><td>每周一凌晨执行</td></tr><tr><td><code>0 0 0 1 * ?</code></td><td>每月 1 号凌晨执行</td></tr></tbody></table><h3 id=并发控制>并发控制<a class=td-heading-self-link href=#%e5%b9%b6%e5%8f%91%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><p>对于大规模数据采集，可以配置并发参数：</p><table><thead><tr><th>参数</th><th>说明</th><th>推荐值</th></tr></thead><tbody><tr><td>channel</td><td>并发通道数</td><td>1-5</td></tr><tr><td>byte</td><td>字节流限制</td><td>1048576 (1MB)</td></tr><tr><td>record</td><td>记录流限制</td><td>100000</td></tr></tbody></table><h3 id=数据转换>数据转换<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%bd%ac%e6%8d%a2 aria-label="Heading self-link"></a></h3><p>支持在采集过程中进行简单的数据转换：</p><ul><li><strong>类型转换</strong>：String → Long、Double → String 等</li><li><strong>日期格式化</strong>：将日期字符串转换为标准格式</li><li><strong>字符串处理</strong>：trim、substring 等</li><li><strong>空值处理</strong>：设置默认值</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-任务执行失败怎么办>Q: 任务执行失败怎么办？<a class=td-heading-self-link href=#q-%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 按以下步骤排查：</p><ol><li><strong>检查数据源连接</strong>：确保数据源地址、端口、用户名、密码正确</li><li><strong>检查网络连接</strong>：确保 DataMate 能访问数据源</li><li><strong>查看执行日志</strong>：获取详细错误信息</li><li><strong>检查数据格式</strong>：确保数据格式与配置一致</li><li><strong>检查目标数据集</strong>：确保目标数据集存在且有写入权限</li></ol><h3 id=q-如何采集大表数据>Q: 如何采集大表数据？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e9%87%87%e9%9b%86%e5%a4%a7%e8%a1%a8%e6%95%b0%e6%8d%ae aria-label="Heading self-link"></a></h3><p>A: 对于大表数据采集：</p><ol><li><strong>使用增量采集</strong>：配置时间字段进行增量同步</li><li><strong>分批采集</strong>：将大表拆分为多个小任务</li><li><strong>调整并发参数</strong>：适当增加 channel 数量</li><li><strong>使用过滤条件</strong>：只采集需要的数据</li></ol><h3 id=q-如何实现增量采集>Q: 如何实现增量采集？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%a2%9e%e9%87%8f%e9%87%87%e9%9b%86 aria-label="Heading self-link"></a></h3><p>A: 配置增量采集条件：</p><p>在数据源配置中，可以设置查询条件（如 SQL WHERE 子句），例如：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>update_time</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${lastTime}&#39;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>系统会在每次执行时记录最后一次执行时间，下次执行时自动使用该时间进行增量采集。</p><h3 id=q-采集速度慢怎么办>Q: 采集速度慢怎么办？<a class=td-heading-self-link href=#q-%e9%87%87%e9%9b%86%e9%80%9f%e5%ba%a6%e6%85%a2%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 优化采集速度：</p><ol><li><strong>增加并发通道</strong>：将 channel 设置为 3-5</li><li><strong>调整流控参数</strong>：增加 byte 和 record 限制</li><li><strong>优化 SQL 查询</strong>：使用索引、减少查询字段</li><li><strong>使用批量写入</strong>：启用批量写入模式</li></ol><h3 id=q-如何处理数据类型不兼容>Q: 如何处理数据类型不兼容？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e4%b8%8d%e5%85%bc%e5%ae%b9 aria-label="Heading self-link"></a></h3><p>A: 使用类型转换：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;column&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;long&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;price&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;decimal&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;format&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;#.##&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/docs/api-reference/data-collection/>数据采集 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 采集后的数据管理</li><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 采集后的数据清洗</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 将采集任务集成到流水线</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-76c0c8ccf8113c0cc0d32b9ab3cebfde>3.2 - 数据管理</h1><div class=lead>使用 DataMate 管理数据集和文件</div><div class="pageinfo pageinfo-primary"><p>数据管理模块提供统一的数据集管理能力，支持多种数据类型的存储、查询和操作。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据管理是 DataMate 的核心模块，提供：</p><ul><li><strong>多数据类型支持</strong>：图像、文本、音频、视频、多模态等</li><li><strong>文件管理</strong>：上传、下载、预览、删除等操作</li><li><strong>目录结构</strong>：支持层级目录组织</li><li><strong>标签管理</strong>：使用标签分类和检索数据</li><li><strong>统计信息</strong>：数据集大小、文件数量等统计</li></ul><h2 id=数据集类型>数据集类型<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e7%b1%bb%e5%9e%8b aria-label="Heading self-link"></a></h2><table><thead><tr><th>类型</th><th>说明</th><th>支持格式</th></tr></thead><tbody><tr><td>图像</td><td>图像数据</td><td>JPG, PNG, GIF, BMP, WebP</td></tr><tr><td>文本</td><td>文本数据</td><td>TXT, MD, JSON, CSV</td></tr><tr><td>音频</td><td>音频数据</td><td>MP3, WAV, FLAC, AAC</td></tr><tr><td>视频</td><td>视频数据</td><td>MP4, AVI, MOV, MKV</td></tr><tr><td>多模态</td><td>多模态数据</td><td>混合格式</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建数据集>1. 创建数据集<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据管理页面>步骤 1：进入数据管理页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据管理</strong>。</p><h4 id=步骤-2创建数据集>步骤 2：创建数据集<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建数据集</strong> 按钮。</p><h4 id=步骤-3填写基本信息>步骤 3：填写基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e5%a1%ab%e5%86%99%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>数据集名称</strong>：例如 <code>user_images_dataset</code></li><li><strong>数据集类型</strong>：选择数据类型（如图像）</li><li><strong>描述</strong>：描述数据集的用途（可选）</li><li><strong>标签</strong>：添加标签用于分类（可选）</li></ul><h4 id=步骤-4配置存储位置可选>步骤 4：配置存储位置（可选）<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e5%ad%98%e5%82%a8%e4%bd%8d%e7%bd%ae%e5%8f%af%e9%80%89 aria-label="Heading self-link"></a></h4><ul><li><strong>数据源</strong>：数据来源（可选）</li><li><strong>目标位置</strong>：存储路径（可选）</li></ul><h4 id=步骤-5创建数据集>步骤 5：创建数据集<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮完成创建。</p><h3 id=2-上传文件>2. 上传文件<a class=td-heading-self-link href=#2-%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><h4 id=方式一拖拽上传>方式一：拖拽上传<a class=td-heading-self-link href=#%e6%96%b9%e5%bc%8f%e4%b8%80%e6%8b%96%e6%8b%bd%e4%b8%8a%e4%bc%a0 aria-label="Heading self-link"></a></h4><ol><li>进入数据集详情页面</li><li>将文件直接拖拽到上传区域</li><li>等待上传完成</li></ol><h4 id=方式二点击上传>方式二：点击上传<a class=td-heading-self-link href=#%e6%96%b9%e5%bc%8f%e4%ba%8c%e7%82%b9%e5%87%bb%e4%b8%8a%e4%bc%a0 aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>上传文件</strong> 按钮</li><li>选择本地文件</li><li>等待上传完成</li></ol><h4 id=方式三分片上传大文件>方式三：分片上传（大文件）<a class=td-heading-self-link href=#%e6%96%b9%e5%bc%8f%e4%b8%89%e5%88%86%e7%89%87%e4%b8%8a%e4%bc%a0%e5%a4%a7%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h4><p>对于大文件（>100MB），系统自动使用分片上传：</p><ol><li>选择大文件上传</li><li>系统自动切分文件</li><li>逐片上传</li><li>自动合并</li></ol><h4 id=方式四批量上传>方式四：批量上传<a class=td-heading-self-link href=#%e6%96%b9%e5%bc%8f%e5%9b%9b%e6%89%b9%e9%87%8f%e4%b8%8a%e4%bc%a0 aria-label="Heading self-link"></a></h4><p>支持批量选择多个文件上传：</p><ol><li>点击 <strong>上传文件</strong> 按钮</li><li>按住 Ctrl/Cmd 多选文件</li><li>点击确定开始上传</li></ol><h3 id=3-创建目录>3. 创建目录<a class=td-heading-self-link href=#3-%e5%88%9b%e5%bb%ba%e7%9b%ae%e5%bd%95 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据集>步骤 1：进入数据集<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>在数据管理页面，点击数据集名称进入详情。</p><h4 id=步骤-2创建目录>步骤 2：创建目录<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e7%9b%ae%e5%bd%95 aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>创建目录</strong> 按钮</li><li>输入目录名称</li><li>选择父目录（可选）</li><li>点击确定</li></ol><p>目录结构示例：</p><pre tabindex=0><code>user_images_dataset/
├── train/
│   ├── cat/
│   └── dog/
├── test/
│   ├── cat/
│   └── dog/
└── validation/
    ├── cat/
    └── dog/
</code></pre><h3 id=4-管理文件>4. 管理文件<a class=td-heading-self-link href=#4-%e7%ae%a1%e7%90%86%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><h4 id=查看文件>查看文件<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h4><p>在数据集详情页面，可以看到所有文件列表：</p><table><thead><tr><th>文件名</th><th>大小</th><th>类型</th><th>状态</th><th>上传时间</th><th>操作</th></tr></thead><tbody><tr><td>image1.jpg</td><td>2.3 MB</td><td>JPG</td><td>已完成</td><td>2024-01-15</td><td>预览 下载 删除</td></tr><tr><td>image2.png</td><td>1.8 MB</td><td>PNG</td><td>已完成</td><td>2024-01-15</td><td>预览 下载 删除</td></tr></tbody></table><h4 id=预览文件>预览文件<a class=td-heading-self-link href=#%e9%a2%84%e8%a7%88%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h4><p>点击 <strong>预览</strong> 按钮，可以在浏览器中预览文件：</p><ul><li><strong>图像</strong>：显示缩略图和详细信息</li><li><strong>文本</strong>：显示文本内容</li><li><strong>音频</strong>：在线播放</li><li><strong>视频</strong>：在线播放</li></ul><h4 id=下载文件>下载文件<a class=td-heading-self-link href=#%e4%b8%8b%e8%bd%bd%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h4><ul><li><strong>单个文件下载</strong>：点击 <strong>下载</strong> 按钮</li><li><strong>批量下载</strong>：勾选多个文件，点击 <strong>批量下载</strong></li><li><strong>打包下载</strong>：点击 <strong>全部下载</strong>，下载为 ZIP 压缩包</li></ul><h4 id=删除文件>删除文件<a class=td-heading-self-link href=#%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h4><ul><li><strong>单个删除</strong>：点击文件的 <strong>删除</strong> 按钮</li><li><strong>批量删除</strong>：勾选多个文件，点击 <strong>批量删除</strong></li></ul><h3 id=5-数据集操作>5. 数据集操作<a class=td-heading-self-link href=#5-%e6%95%b0%e6%8d%ae%e9%9b%86%e6%93%8d%e4%bd%9c aria-label="Heading self-link"></a></h3><h4 id=查看统计信息>查看统计信息<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e7%bb%9f%e8%ae%a1%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><p>在数据集详情页面，可以看到：</p><ul><li><strong>总文件数</strong>：数据集中的文件总数</li><li><strong>总大小</strong>：所有文件的总大小</li><li><strong>完成率</strong>：文件上传完成的百分比</li><li><strong>文件类型分布</strong>：各类型文件的数量统计</li><li><strong>状态分布</strong>：各状态文件的数量统计</li></ul><h4 id=编辑数据集>编辑数据集<a class=td-heading-self-link href=#%e7%bc%96%e8%be%91%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>点击数据集的 <strong>编辑</strong> 按钮，可以修改：</p><ul><li>数据集名称</li><li>描述</li><li>标签</li><li>状态</li></ul><h4 id=删除数据集>删除数据集<a class=td-heading-self-link href=#%e5%88%a0%e9%99%a4%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>点击数据集的 <strong>删除</strong> 按钮，可以删除整个数据集。</p><p><strong>注意</strong>：删除数据集会同时删除其中的所有文件，此操作不可恢复。</p><h4 id=导出数据集>导出数据集<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>点击 <strong>导出</strong> 按钮，可以：</p><ul><li><strong>导出文件列表</strong>：导出为 CSV/Excel</li><li><strong>导出文件</strong>：打包下载所有文件</li><li><strong>导出元数据</strong>：导出数据集的元数据信息</li></ul><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=标签管理>标签管理<a class=td-heading-self-link href=#%e6%a0%87%e7%ad%be%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=创建标签>创建标签<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e6%a0%87%e7%ad%be aria-label="Heading self-link"></a></h4><ol><li>在数据集列表页，点击 <strong>标签管理</strong></li><li>点击 <strong>创建标签</strong></li><li>输入标签信息：<ul><li>标签名称</li><li>标签颜色</li><li>描述（可选）</li></ul></li></ol><h4 id=使用标签>使用标签<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%a0%87%e7%ad%be aria-label="Heading self-link"></a></h4><ol><li>编辑数据集</li><li>在标签栏选择已有标签</li><li>保存数据集</li></ol><h4 id=标签筛选>标签筛选<a class=td-heading-self-link href=#%e6%a0%87%e7%ad%be%e7%ad%9b%e9%80%89 aria-label="Heading self-link"></a></h4><p>在数据集列表页，点击标签可以筛选具有该标签的数据集。</p><h3 id=文件搜索>文件搜索<a class=td-heading-self-link href=#%e6%96%87%e4%bb%b6%e6%90%9c%e7%b4%a2 aria-label="Heading self-link"></a></h3><h4 id=关键词搜索>关键词搜索<a class=td-heading-self-link href=#%e5%85%b3%e9%94%ae%e8%af%8d%e6%90%9c%e7%b4%a2 aria-label="Heading self-link"></a></h4><p>在搜索框输入关键词，支持搜索：</p><ul><li>文件名</li><li>文件描述</li><li>标签</li></ul><h4 id=高级搜索>高级搜索<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e6%90%9c%e7%b4%a2 aria-label="Heading self-link"></a></h4><p>点击 <strong>高级搜索</strong>，可以：</p><ul><li>按文件类型筛选</li><li>按上传时间筛选</li><li>按文件大小筛选</li><li>按状态筛选</li></ul><h3 id=添加已有文件>添加已有文件<a class=td-heading-self-link href=#%e6%b7%bb%e5%8a%a0%e5%b7%b2%e6%9c%89%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><p>如果文件已经存在于系统中，可以通过 <strong>添加文件</strong> 功能将文件添加到数据集：</p><ol><li>进入数据集详情</li><li>点击 <strong>添加文件</strong></li><li>输入文件路径（支持相对路径和绝对路径）</li><li>选择是否仅创建记录（软链接）</li><li>点击确定</li></ol><h3 id=数据集版本管理>数据集版本管理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=创建快照>创建快照<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e5%bf%ab%e7%85%a7 aria-label="Heading self-link"></a></h4><p>为数据集创建快照，保存当前状态：</p><ol><li>进入数据集详情</li><li>点击 <strong>创建快照</strong></li><li>输入快照描述</li><li>点击确定</li></ol><h4 id=恢复快照>恢复快照<a class=td-heading-self-link href=#%e6%81%a2%e5%a4%8d%e5%bf%ab%e7%85%a7 aria-label="Heading self-link"></a></h4><p>从快照恢复数据集：</p><ol><li>进入数据集详情</li><li>点击 <strong>快照历史</strong></li><li>选择要恢复的快照</li><li>点击 <strong>恢复</strong></li></ol><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-数据集组织>1. 数据集组织<a class=td-heading-self-link href=#1-%e6%95%b0%e6%8d%ae%e9%9b%86%e7%bb%84%e7%bb%87 aria-label="Heading self-link"></a></h3><p>推荐的目录组织方式：</p><pre tabindex=0><code>project_dataset/
├── raw/              # 原始数据
├── processed/        # 处理后的数据
├── train/            # 训练数据
├── validation/       # 验证数据
└── test/             # 测试数据
</code></pre><h3 id=2-命名规范>2. 命名规范<a class=td-heading-self-link href=#2-%e5%91%bd%e5%90%8d%e8%a7%84%e8%8c%83 aria-label="Heading self-link"></a></h3><ul><li><strong>数据集名称</strong>：使用小写字母和下划线，如 <code>user_images_2024</code></li><li><strong>目录名称</strong>：使用有意义的英文名称，如 <code>train</code>, <code>test</code>, <code>processed</code></li><li><strong>文件名称</strong>：保持原始文件名或使用规范命名</li></ul><h3 id=3-标签使用>3. 标签使用<a class=td-heading-self-link href=#3-%e6%a0%87%e7%ad%be%e4%bd%bf%e7%94%a8 aria-label="Heading self-link"></a></h3><p>建议使用以下标签分类：</p><ul><li><strong>项目标签</strong>：<code>project-a</code>, <code>project-b</code></li><li><strong>状态标签</strong>：<code>raw</code>, <code>processed</code>, <code>validated</code></li><li><strong>类型标签</strong>：<code>image</code>, <code>text</code>, <code>audio</code></li><li><strong>用途标签</strong>：<code>training</code>, <code>testing</code>, <code>evaluation</code></li></ul><h3 id=4-数据备份>4. 数据备份<a class=td-heading-self-link href=#4-%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd aria-label="Heading self-link"></a></h3><p>定期备份重要数据集：</p><ol><li>使用 <strong>导出</strong> 功能下载文件</li><li>创建数据集快照</li><li>定期执行备份任务</li></ol><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-上传大文件失败怎么办>Q: 上传大文件失败怎么办？<a class=td-heading-self-link href=#q-%e4%b8%8a%e4%bc%a0%e5%a4%a7%e6%96%87%e4%bb%b6%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 大文件上传建议：</p><ol><li><strong>使用分片上传</strong>：系统自动启用分片上传</li><li><strong>检查网络连接</strong>：确保网络稳定</li><li><strong>调整上传参数</strong>：增加超时时间</li><li><strong>使用 FTP/SFTP</strong>：对于超大文件，建议使用 FTP 上传</li></ol><h3 id=q-如何导入已有的数据>Q: 如何导入已有的数据？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5%e5%b7%b2%e6%9c%89%e7%9a%84%e6%95%b0%e6%8d%ae aria-label="Heading self-link"></a></h3><p>A: 三种方式导入已有数据：</p><ol><li><strong>上传文件</strong>：通过界面上传</li><li><strong>添加文件</strong>：如果文件已在服务器上，使用添加文件功能</li><li><strong>数据采集</strong>：使用数据采集模块从外部数据源采集</li></ol><h3 id=q-如何共享数据集>Q: 如何共享数据集？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%85%b1%e4%ba%ab%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h3><p>A: 目前数据集共享方式：</p><ol><li><strong>导出数据集</strong>：导出为文件分享</li><li><strong>设置权限</strong>：（即将推出）设置数据集访问权限</li><li><strong>API 访问</strong>：通过 API 接口访问数据集</li></ol><h3 id=q-数据集有大小限制吗>Q: 数据集有大小限制吗？<a class=td-heading-self-link href=#q-%e6%95%b0%e6%8d%ae%e9%9b%86%e6%9c%89%e5%a4%a7%e5%b0%8f%e9%99%90%e5%88%b6%e5%90%97 aria-label="Heading self-link"></a></h3><p>A: 数据集大小限制：</p><ul><li><strong>单个文件</strong>：最大 5GB（分片上传）</li><li><strong>数据集总大小</strong>：受存储空间限制</li><li><strong>文件数量</strong>：没有明确限制</li></ul><p>建议定期清理不需要的文件以释放空间。</p><h3 id=q-如何查看数据集的详细信息>Q: 如何查看数据集的详细信息？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e6%9f%a5%e7%9c%8b%e6%95%b0%e6%8d%ae%e9%9b%86%e7%9a%84%e8%af%a6%e7%bb%86%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h3><p>A: 在数据集详情页面可以查看：</p><ul><li><strong>基本信息</strong>：名称、描述、类型、标签</li><li><strong>统计信息</strong>：文件数、总大小、完成率</li><li><strong>文件列表</strong>：所有文件及其详情</li><li><strong>操作日志</strong>：数据集的操作历史</li></ul><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/datamate-docs/docs/api-reference/data-management/>数据管理 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-collection/>数据采集</a> - 采集数据到数据集</li><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 清洗数据集中的数据</li><li><a href=/datamate-docs/docs/user-guide/data-annotation/>数据标注</a> - 标注数据集中的数据</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-864b2ebba5f4143d01ef58470643b684>3.3 - 数据清洗</h1><div class=lead>使用 DataMate 清洗和预处理数据</div><div class="pageinfo pageinfo-primary"><p>数据清洗模块提供强大的数据处理能力，帮助您清洗、转换和优化数据质量。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据清洗模块提供：</p><ul><li><strong>内置清洗算子</strong>：丰富的前置清洗算子库</li><li><strong>可视化配置</strong>：拖拽式配置清洗流程</li><li><strong>模板管理</strong>：保存和复用清洗模板</li><li><strong>批量处理</strong>：支持大规模数据批量清洗</li><li><strong>实时预览</strong>：预览清洗结果</li></ul><h2 id=清洗算子类型>清洗算子类型<a class=td-heading-self-link href=#%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90%e7%b1%bb%e5%9e%8b aria-label="Heading self-link"></a></h2><h3 id=数据质量算子>数据质量算子<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%b4%a8%e9%87%8f%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th><th>适用数据类型</th></tr></thead><tbody><tr><td>去重</td><td>删除重复数据</td><td>所有类型</td></tr><tr><td>空值处理</td><td>删除或填充空值</td><td>所有类型</td></tr><tr><td>异常值检测</td><td>检测和处理异常值</td><td>数值型</td></tr><tr><td>格式校验</td><td>校验数据格式</td><td>所有类型</td></tr></tbody></table><h3 id=文本清洗算子>文本清洗算子<a class=td-heading-self-link href=#%e6%96%87%e6%9c%ac%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>去除特殊字符</td><td>去除文本中的特殊符号</td></tr><tr><td>大小写转换</td><td>统一大小写格式</td></tr><tr><td>去除停用词</td><td>去除常见停用词</td></tr><tr><td>文本分词</td><td>中文分词处理</td></tr><tr><td>HTML 标签清理</td><td>清理 HTML 标签</td></tr></tbody></table><h3 id=图像清洗算子>图像清洗算子<a class=td-heading-self-link href=#%e5%9b%be%e5%83%8f%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>格式转换</td><td>转换图像格式</td></tr><tr><td>尺寸调整</td><td>统一图像尺寸</td></tr><tr><td>质量检测</td><td>检测图像质量</td></tr><tr><td>去重</td><td>基于内容去重</td></tr></tbody></table><h3 id=数据转换算子>数据转换算子<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%bd%ac%e6%8d%a2%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>类型转换</td><td>转换数据类型</td></tr><tr><td>归一化</td><td>数值归一化处理</td></tr><tr><td>编码转换</td><td>字符编码转换</td></tr><tr><td>日期格式化</td><td>统一日期格式</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建清洗任务>1. 创建清洗任务<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e6%b8%85%e6%b4%97%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据清洗页面>步骤 1：进入数据清洗页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据清洗</strong>。</p><h4 id=步骤-2创建任务>步骤 2：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建任务</strong> 按钮。</p><h4 id=步骤-3配置基本信息>步骤 3：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>任务名称</strong>：例如 <code>user_data_cleansing</code></li><li><strong>任务描述</strong>：描述清洗任务的目的（可选）</li><li><strong>源数据集</strong>：选择要清洗的数据集</li><li><strong>输出数据集</strong>：选择或创建输出数据集</li></ul><h4 id=步骤-4配置清洗流程>步骤 4：配置清洗流程<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e6%b8%85%e6%b4%97%e6%b5%81%e7%a8%8b aria-label="Heading self-link"></a></h4><p>在清洗流程配置页面：</p><ol><li>从左侧算子库拖拽算子到中间画布</li><li>连接算子形成处理流程</li><li>配置每个算子的参数</li><li>预览清洗结果</li></ol><p>示例流程：</p><pre tabindex=0><code>输入数据 → 去重 → 空值处理 → 格式校验 → 输出数据
</code></pre><h4 id=步骤-5配置执行参数>步骤 5：配置执行参数<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e9%85%8d%e7%bd%ae%e6%89%a7%e8%a1%8c%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><ul><li><strong>执行模式</strong>：立即执行 / 定时执行</li><li><strong>并发数</strong>：任务并发数（默认 1）</li><li><strong>失败策略</strong>：跳过失败记录 / 终止任务</li></ul><h4 id=步骤-6创建并执行>步骤 6：创建并执行<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-6%e5%88%9b%e5%bb%ba%e5%b9%b6%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮创建任务。如果选择立即执行，任务将自动开始运行。</p><h3 id=2-使用清洗模板>2. 使用清洗模板<a class=td-heading-self-link href=#2-%e4%bd%bf%e7%94%a8%e6%b8%85%e6%b4%97%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h3><h4 id=创建模板>创建模板<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>配置好清洗流程</li><li>点击 <strong>保存为模板</strong></li><li>输入模板名称和描述</li><li>点击保存</li></ol><h4 id=使用模板>使用模板<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>创建清洗任务时，点击 <strong>使用模板</strong></li><li>从模板列表选择模板</li><li>系统自动加载模板配置</li><li>根据需要调整配置</li></ol><h3 id=3-监控清洗任务>3. 监控清洗任务<a class=td-heading-self-link href=#3-%e7%9b%91%e6%8e%a7%e6%b8%85%e6%b4%97%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=查看任务列表>查看任务列表<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h4><p>在数据清洗页面，可以看到所有清洗任务：</p><table><thead><tr><th>任务名称</th><th>源数据集</th><th>输出数据集</th><th>状态</th><th>进度</th><th>操作</th></tr></thead><tbody><tr><td>文本清洗</td><td>raw_text</td><td>clean_text</td><td>运行中</td><td>50%</td><td>查看详情</td></tr><tr><td>图像去重</td><td>images</td><td>unique_images</td><td>已完成</td><td>100%</td><td>查看详情</td></tr></tbody></table><h4 id=查看任务详情>查看任务详情<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h4><p>点击任务名称进入详情页面，可以看到：</p><ul><li><strong>任务配置</strong>：清洗流程和参数</li><li><strong>执行记录</strong>：历史执行记录</li><li><strong>清洗统计</strong>：<ul><li>输入记录数</li><li>输出记录数</li><li>清洗掉的记录数</li><li>清洗率</li></ul></li></ul><h4 id=查看清洗结果>查看清洗结果<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e6%b8%85%e6%b4%97%e7%bb%93%e6%9e%9c aria-label="Heading self-link"></a></h4><p>在任务详情页面，点击 <strong>查看结果</strong> 可以：</p><ul><li>查看清洗后的数据</li><li>对比清洗前后数据</li><li>导出清洗结果</li></ul><h2 id=清洗算子详解>清洗算子详解<a class=td-heading-self-link href=#%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90%e8%af%a6%e8%a7%a3 aria-label="Heading self-link"></a></h2><h3 id=去重算子>去重算子<a class=td-heading-self-link href=#%e5%8e%bb%e9%87%8d%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p><strong>功能</strong>：删除重复的数据记录</p><p><strong>参数</strong>：</p><ul><li><strong>去重字段</strong>：选择用于判断重复的字段</li><li><strong>保留策略</strong>：保留第一条 / 保留最后一条</li></ul><p><strong>示例</strong>：</p><pre tabindex=0><code>输入：
{&#34;id&#34;: 1, &#34;name&#34;: &#34;Alice&#34;}
{&#34;id&#34;: 1, &#34;name&#34;: &#34;Alice&#34;}
{&#34;id&#34;: 2, &#34;name&#34;: &#34;Bob&#34;}

输出（保留第一条）：
{&#34;id&#34;: 1, &#34;name&#34;: &#34;Alice&#34;}
{&#34;id&#34;: 2, &#34;name&#34;: &#34;Bob&#34;}
</code></pre><h3 id=空值处理算子>空值处理算子<a class=td-heading-self-link href=#%e7%a9%ba%e5%80%bc%e5%a4%84%e7%90%86%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p><strong>功能</strong>：处理空值（NULL/空字符串）</p><p><strong>参数</strong>：</p><ul><li><strong>处理策略</strong>：删除记录 / 填充默认值</li><li><strong>填充值</strong>：当选择填充时，指定填充值</li></ul><p><strong>示例</strong>：</p><pre tabindex=0><code>输入：
{&#34;id&#34;: 1, &#34;name&#34;: &#34;Alice&#34;, &#34;age&#34;: null}
{&#34;id&#34;: 2, &#34;name&#34;: null, &#34;age&#34;: 25}

输出（填充默认值 &#34;Unknown&#34;）：
{&#34;id&#34;: 1, &#34;name&#34;: &#34;Alice&#34;, &#34;age&#34;: &#34;Unknown&#34;}
{&#34;id&#34;: 2, &#34;name&#34;: &#34;Unknown&#34;, &#34;age&#34;: 25}
</code></pre><h3 id=文本清洗算子-1>文本清洗算子<a class=td-heading-self-link href=#%e6%96%87%e6%9c%ac%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90-1 aria-label="Heading self-link"></a></h3><p><strong>功能</strong>：清洗文本数据</p><p><strong>参数</strong>：</p><ul><li><strong>去除特殊字符</strong>：是否去除</li><li><strong>转换大小写</strong>：不转换 / 全部小写 / 全部大写</li><li><strong>去除停用词</strong>：是否去除</li><li><strong>最小长度</strong>：过滤短于该长度的文本</li></ul><p><strong>示例</strong>：</p><pre tabindex=0><code>输入：&#34;Hello!!! This is a Test...&#34;

输出（去除特殊字符、转小写）：
&#34;hello this is a test&#34;
</code></pre><h3 id=图像格式转换算子>图像格式转换算子<a class=td-heading-self-link href=#%e5%9b%be%e5%83%8f%e6%a0%bc%e5%bc%8f%e8%bd%ac%e6%8d%a2%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p><strong>功能</strong>：转换图像格式</p><p><strong>参数</strong>：</p><ul><li><strong>目标格式</strong>：JPG / PNG / WebP</li><li><strong>质量</strong>：输出图像质量（1-100）</li><li><strong>尺寸</strong>：调整图像尺寸（可选）</li></ul><h3 id=数据归一化算子>数据归一化算子<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%bd%92%e4%b8%80%e5%8c%96%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p><strong>功能</strong>：数值型数据归一化</p><p><strong>参数</strong>：</p><ul><li><strong>归一化方法</strong>：Min-Max / Z-Score</li><li><strong>目标范围</strong>：Min-Max 归一化的目标范围</li></ul><p><strong>示例</strong>：</p><pre tabindex=0><code>输入（Min-Max 归一化到 [0, 1]）：
{&#34;age&#34;: 20, &#34;salary&#34;: 5000}
{&#34;age&#34;: 40, &#34;salary&#34;: 10000}

输出：
{&#34;age&#34;: 0.0, &#34;salary&#34;: 0.0}
{&#34;age&#34;: 1.0, &#34;salary&#34;: 1.0}
</code></pre><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=自定义算子>自定义算子<a class=td-heading-self-link href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p>除了内置算子，DataMate 还支持自定义算子开发。详见：</p><ul><li><a href=/datamate-docs/docs/user-guide/operator-market/>算子市场</a> - 算子开发指南</li></ul><h3 id=条件分支>条件分支<a class=td-heading-self-link href=#%e6%9d%a1%e4%bb%b6%e5%88%86%e6%94%af aria-label="Heading self-link"></a></h3><p>在清洗流程中，可以添加条件分支：</p><pre tabindex=0><code>输入数据 → [条件判断]
              ├── 满足条件 → 处理流程 A
              └── 不满足条件 → 处理流程 B
</code></pre><p><strong>条件类型</strong>：</p><ul><li>字段值比较</li><li>数据类型检查</li><li>自定义表达式</li></ul><h3 id=循环处理>循环处理<a class=td-heading-self-link href=#%e5%be%aa%e7%8e%af%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h3><p>对于需要重复处理的场景，可以使用循环算子：</p><ul><li><strong>For 循环</strong>：固定次数循环</li><li><strong>While 循环</strong>：条件循环</li><li><strong>迭代循环</strong>：遍历集合</li></ul><h3 id=数据验证>数据验证<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%aa%8c%e8%af%81 aria-label="Heading self-link"></a></h3><p>在清洗完成后，可以添加数据验证算子：</p><ul><li><strong>完整性验证</strong>：检查必填字段</li><li><strong>一致性验证</strong>：检查字段间关系</li><li><strong>业务规则验证</strong>：自定义验证规则</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-清洗任务执行失败怎么办>Q: 清洗任务执行失败怎么办？<a class=td-heading-self-link href=#q-%e6%b8%85%e6%b4%97%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 按以下步骤排查：</p><ol><li><strong>检查数据格式</strong>：确保数据格式与算子要求一致</li><li><strong>查看执行日志</strong>：获取详细错误信息</li><li><strong>检查参数配置</strong>：确保算子参数配置正确</li><li><strong>测试单个算子</strong>：单独测试问题算子</li><li><strong>减少数据量</strong>：先用小数据集测试</li></ol><h3 id=q-如何处理大量数据>Q: 如何处理大量数据？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae aria-label="Heading self-link"></a></h3><p>A: 大数据量清洗建议：</p><ol><li><strong>分批处理</strong>：将大数据集拆分为多个小批次</li><li><strong>增加并发</strong>：适当增加并发数</li><li><strong>使用增量清洗</strong>：只清洗新增或变更的数据</li><li><strong>优化流程</strong>：简化清洗流程，移除不必要的算子</li></ol><h3 id=q-清洗速度慢怎么办>Q: 清洗速度慢怎么办？<a class=td-heading-self-link href=#q-%e6%b8%85%e6%b4%97%e9%80%9f%e5%ba%a6%e6%85%a2%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 优化清洗速度：</p><ol><li><strong>减少算子数量</strong>：只使用必要的算子</li><li><strong>优化算子顺序</strong>：先过滤数据再处理</li><li><strong>增加并发</strong>：提高任务并发数</li><li><strong>使用增量处理</strong>：避免重复处理</li></ol><h3 id=q-如何保证清洗质量>Q: 如何保证清洗质量？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e4%bf%9d%e8%af%81%e6%b8%85%e6%b4%97%e8%b4%a8%e9%87%8f aria-label="Heading self-link"></a></h3><p>A: 建议的清洗流程：</p><ol><li><strong>数据探索</strong>：先了解数据质量状况</li><li><strong>制定规则</strong>：根据业务需求制定清洗规则</li><li><strong>小批量测试</strong>：先在小数据集上测试</li><li><strong>验证结果</strong>：清洗后验证数据质量</li><li><strong>定期审查</strong>：定期审查和更新清洗规则</li></ol><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/docs/api-reference/data-cleaning/>数据清洗 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理清洗后的数据</li><li><a href=/datamate-docs/docs/user-guide/operator-market/>算子市场</a> - 获取更多清洗算子</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 将清洗任务集成到流水线</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-1ca3726fbab055cfdbdbb9596409ab01>3.4 - 数据标注</h1><div class=lead>使用 DataMate 进行数据标注</div><div class="pageinfo pageinfo-primary"><p>数据标注模块集成 Label Studio，提供专业级的数据标注能力。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据标注模块提供：</p><ul><li><strong>多类型标注</strong>：支持图像、文本、音频等多种数据类型</li><li><strong>标注模板</strong>：丰富的标注模板和配置</li><li><strong>质量控制</strong>：标注审核和一致性检查</li><li><strong>团队协作</strong>：多人协作标注</li><li><strong>标注导出</strong>：导出标注结果</li></ul><h2 id=标注类型>标注类型<a class=td-heading-self-link href=#%e6%a0%87%e6%b3%a8%e7%b1%bb%e5%9e%8b aria-label="Heading self-link"></a></h2><h3 id=图像标注>图像标注<a class=td-heading-self-link href=#%e5%9b%be%e5%83%8f%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><table><thead><tr><th>类型</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td>图像分类</td><td>对整个图像分类</td><td>场景识别、质量判断</td></tr><tr><td>目标检测</td><td>标注目标位置和类别</td><td>物体识别、缺陷检测</td></tr><tr><td>语义分割</td><td>像素级分类</td><td>医学影像、自动驾驶</td></tr><tr><td>实例分割</td><td>区分同类目标</td><td>细粒度识别</td></tr><tr><td>关键点标注</td><td>标注关键点位置</td><td>姿态估计、人脸识别</td></tr></tbody></table><h3 id=文本标注>文本标注<a class=td-heading-self-link href=#%e6%96%87%e6%9c%ac%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><table><thead><tr><th>类型</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td>文本分类</td><td>对文本分类</td><td>情感分析、主题分类</td></tr><tr><td>命名实体识别</td><td>标注实体边界</td><td>信息抽取、知识图谱</td></tr><tr><td>文本摘要</td><td>生成摘要</td><td>文档理解</td></tr><tr><td>机器翻译</td><td>翻译文本</td><td>多语言处理</td></tr><tr><td>问答标注</td><td>标注问答对</td><td>对话系统</td></tr></tbody></table><h3 id=音频标注>音频标注<a class=td-heading-self-link href=#%e9%9f%b3%e9%a2%91%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><table><thead><tr><th>类型</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td>音频分类</td><td>对音频分类</td><td>音频事件检测</td></tr><tr><td>语音识别 (ASR)</td><td>转写语音文本</td><td>语音助手</td></tr><tr><td>说话人分离</td><td>识别说话人</td><td>会议记录</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-部署-label-studio>1. 部署 Label Studio<a class=td-heading-self-link href=#1-%e9%83%a8%e7%bd%b2-label-studio aria-label="Heading self-link"></a></h3><h4 id=使用-docker-compose>使用 Docker Compose<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-docker-compose aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make install-label-studio
</span></span></code></pre></div><h4 id=访问-label-studio>访问 Label Studio<a class=td-heading-self-link href=#%e8%ae%bf%e9%97%ae-label-studio aria-label="Heading self-link"></a></h4><ul><li><strong>地址</strong>：http://localhost:30001</li><li><strong>用户名</strong>：admin@demo.com</li><li><strong>密码</strong>：demoadmin</li></ul><h3 id=2-创建标注任务>2. 创建标注任务<a class=td-heading-self-link href=#2-%e5%88%9b%e5%bb%ba%e6%a0%87%e6%b3%a8%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据标注页面>步骤 1：进入数据标注页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e6%a0%87%e6%b3%a8%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据标注</strong>。</p><h4 id=步骤-2创建任务>步骤 2：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建任务</strong> 按钮。</p><h4 id=步骤-3配置基本信息>步骤 3：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>任务名称</strong>：例如 <code>image_classification_task</code></li><li><strong>任务描述</strong>：描述标注任务（可选）</li><li><strong>源数据集</strong>：选择要标注的数据集</li><li><strong>标注类型</strong>：选择标注类型（如图像分类）</li></ul><h4 id=步骤-4配置标注模板>步骤 4：配置标注模板<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e6%a0%87%e6%b3%a8%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><p>选择或创建标注模板：</p><p><strong>图像分类模板示例</strong>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;View&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Image</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;image&#34;</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;$image&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Choices</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;choice&#34;</span> <span style=color:#c4a000>toName=</span><span style=color:#4e9a06>&#34;image&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;cat&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;dog&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;bird&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/Choices&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/View&gt;</span>
</span></span></code></pre></div><p><strong>目标检测模板示例</strong>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;View&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Image</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;image&#34;</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;$image&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;RectangleLabels</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;label&#34;</span> <span style=color:#c4a000>toName=</span><span style=color:#4e9a06>&#34;image&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Label</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;cat&#34;</span> <span style=color:#c4a000>background=</span><span style=color:#4e9a06>&#34;blue&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Label</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;dog&#34;</span> <span style=color:#c4a000>background=</span><span style=color:#4e9a06>&#34;red&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/RectangleLabels&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/View&gt;</span>
</span></span></code></pre></div><h4 id=步骤-5配置标注规则>步骤 5：配置标注规则<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e9%85%8d%e7%bd%ae%e6%a0%87%e6%b3%a8%e8%a7%84%e5%88%99 aria-label="Heading self-link"></a></h4><ul><li><strong>标注方式</strong>：单标签 / 多标签</li><li><strong>最少标注数</strong>：每个样本最少标注次数（用于一致性）</li><li><strong>审核机制</strong>：是否启用审核</li><li><strong>标注人员</strong>：分配标注人员</li></ul><h4 id=步骤-6创建任务>步骤 6：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-6%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮完成创建。</p><h3 id=3-开始标注>3. 开始标注<a class=td-heading-self-link href=#3-%e5%bc%80%e5%a7%8b%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入标注界面>步骤 1：进入标注界面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%a0%87%e6%b3%a8%e7%95%8c%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在任务列表页，点击任务名称进入标注界面。</p><h4 id=步骤-2进行标注>步骤 2：进行标注<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e8%bf%9b%e8%a1%8c%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h4><ol><li>查看当前待标注样本</li><li>根据标注类型进行标注</li><li>点击 <strong>提交</strong> 完成标注</li><li>自动加载下一个样本</li></ol><h4 id=步骤-3查看标注进度>步骤 3：查看标注进度<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e6%9f%a5%e7%9c%8b%e6%a0%87%e6%b3%a8%e8%bf%9b%e5%ba%a6 aria-label="Heading self-link"></a></h4><p>在标注界面可以看到：</p><ul><li><strong>总样本数</strong>：待标注的样本总数</li><li><strong>已标注数</strong>：已完成标注的样本数</li><li><strong>完成进度</strong>：标注完成百分比</li><li><strong>我的标注数</strong>：当前用户标注的数量</li></ul><h3 id=4-标注审核>4. 标注审核<a class=td-heading-self-link href=#4-%e6%a0%87%e6%b3%a8%e5%ae%a1%e6%a0%b8 aria-label="Heading self-link"></a></h3><h4 id=查看待审核标注>查看待审核标注<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e5%be%85%e5%ae%a1%e6%a0%b8%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h4><ol><li>进入任务详情页</li><li>点击 <strong>审核</strong> 标签</li><li>查看待审核的标注结果</li></ol><h4 id=审核标注>审核标注<a class=td-heading-self-link href=#%e5%ae%a1%e6%a0%b8%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h4><ol><li>查看标注结果</li><li>选择 <strong>通过</strong> 或 <strong>拒绝</strong></li><li>如果拒绝，可以修改标注</li><li>提交审核结果</li></ol><h3 id=5-导出标注结果>5. 导出标注结果<a class=td-heading-self-link href=#5-%e5%af%bc%e5%87%ba%e6%a0%87%e6%b3%a8%e7%bb%93%e6%9e%9c aria-label="Heading self-link"></a></h3><h4 id=导出为-json>导出为 JSON<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e4%b8%ba-json aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;image&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;image1.jpg&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;label&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;cat&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;annotator&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;user1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;created_at&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:30:00&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h4 id=导出为-csv>导出为 CSV<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e4%b8%ba-csv aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-csv data-lang=csv><span style=display:flex><span><span style=color:#4e9a06>id</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>image</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>label</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>annotator</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>created_at</span><span style=color:#000;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>image1.jpg</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>cat</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>user1</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>2024-01-15 10:30:00</span><span style=color:#000;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>image2.jpg</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>dog</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>user1</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>2024-01-15 10:31:00</span><span style=color:#000;font-weight:700>
</span></span></span></code></pre></div><h4 id=导出到数据集>导出到数据集<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e5%88%b0%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h4><p>将标注结果导出到新的数据集，用于后续处理。</p><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=标注模板定制>标注模板定制<a class=td-heading-self-link href=#%e6%a0%87%e6%b3%a8%e6%a8%a1%e6%9d%bf%e5%ae%9a%e5%88%b6 aria-label="Heading self-link"></a></h3><h4 id=自定义标签>自定义标签<a class=td-heading-self-link href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%a0%87%e7%ad%be aria-label="Heading self-link"></a></h4><p>在模板中定义标签及其属性：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;Choices</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;choice&#34;</span> <span style=color:#c4a000>toName=</span><span style=color:#4e9a06>&#34;image&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;cat&#34;</span> <span style=color:#c4a000>alias=</span><span style=color:#4e9a06>&#34;feline&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;dog&#34;</span> <span style=color:#c4a000>alias=</span><span style=color:#4e9a06>&#34;canine&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Choice</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;other&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/Choices&gt;</span>
</span></span></code></pre></div><h4 id=添加属性>添加属性<a class=td-heading-self-link href=#%e6%b7%bb%e5%8a%a0%e5%b1%9e%e6%80%a7 aria-label="Heading self-link"></a></h4><p>为标签添加额外属性：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;RectangleLabels</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;label&#34;</span> <span style=color:#c4a000>toName=</span><span style=color:#4e9a06>&#34;image&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;Label</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;person&#34;</span> <span style=color:#c4a000>background=</span><span style=color:#4e9a06>&#34;blue&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Attribute</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;gender&#34;</span> <span style=color:#c4a000>type=</span><span style=color:#4e9a06>&#34;radio&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;Value</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;male&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;Value</span> <span style=color:#c4a000>value=</span><span style=color:#4e9a06>&#34;female&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/Attribute&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;Attribute</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;age&#34;</span> <span style=color:#c4a000>type=</span><span style=color:#4e9a06>&#34;number&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/Label&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/RectangleLabels&gt;</span>
</span></span></code></pre></div><h3 id=质量控制>质量控制<a class=td-heading-self-link href=#%e8%b4%a8%e9%87%8f%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><h4 id=标注一致性>标注一致性<a class=td-heading-self-link href=#%e6%a0%87%e6%b3%a8%e4%b8%80%e8%87%b4%e6%80%a7 aria-label="Heading self-link"></a></h4><p>检查不同标注员的一致性：</p><ul><li><strong>Cohen&rsquo;s Kappa</strong>：评估标注一致性</li><li><strong>多数投票</strong>：使用多数标注结果</li><li><strong>专家审核</strong>：专家审核争议标注</li></ul><h4 id=标注指南>标注指南<a class=td-heading-self-link href=#%e6%a0%87%e6%b3%a8%e6%8c%87%e5%8d%97 aria-label="Heading self-link"></a></h4><p>创建详细的标注指南：</p><ol><li>明确标注标准</li><li>提供标注示例</li><li>说明边界情况</li><li>定期更新指南</li></ol><h3 id=团队协作>团队协作<a class=td-heading-self-link href=#%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c aria-label="Heading self-link"></a></h3><h4 id=角色分配>角色分配<a class=td-heading-self-link href=#%e8%a7%92%e8%89%b2%e5%88%86%e9%85%8d aria-label="Heading self-link"></a></h4><table><thead><tr><th>角色</th><th>权限</th></tr></thead><tbody><tr><td>管理员</td><td>全部权限</td></tr><tr><td>审核员</td><td>审核、修改标注</td></tr><tr><td>标注员</td><td>仅标注</td></tr></tbody></table><h4 id=任务分配>任务分配<a class=td-heading-self-link href=#%e4%bb%bb%e5%8a%a1%e5%88%86%e9%85%8d aria-label="Heading self-link"></a></h4><ul><li><strong>手动分配</strong>：管理员手动分配样本</li><li><strong>自动分配</strong>：系统自动分配待标注样本</li><li><strong>认领模式</strong>：标注员主动认领样本</li></ul><h3 id=预标注>预标注<a class=td-heading-self-link href=#%e9%a2%84%e6%a0%87%e6%b3%a8 aria-label="Heading self-link"></a></h3><p>使用模型进行预标注：</p><ol><li>训练或使用现成模型</li><li>对数据集进行预标注</li><li>标注员修正预标注结果</li></ol><p>优势：</p><ul><li>提高标注效率</li><li>降低标注成本</li><li>保持标注一致性</li></ul><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-标注指南>1. 标注指南<a class=td-heading-self-link href=#1-%e6%a0%87%e6%b3%a8%e6%8c%87%e5%8d%97 aria-label="Heading self-link"></a></h3><p>制定清晰的标注指南：</p><ul><li><strong>明确标准</strong>：清晰定义标注标准</li><li><strong>提供示例</strong>：给出正例和反例</li><li><strong>边界情况</strong>：说明如何处理边界情况</li><li><strong>培训标注员</strong>：确保标注员理解指南</li></ul><h3 id=2-质量控制>2. 质量控制<a class=td-heading-self-link href=#2-%e8%b4%a8%e9%87%8f%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><p>建立质量控制流程：</p><ol><li><strong>预标注</strong>：使用模型预标注</li><li><strong>标注</strong>：标注员进行标注</li><li><strong>审核</strong>：审核员抽检</li><li><strong>反馈</strong>：提供反馈并改进</li></ol><h3 id=3-标注效率>3. 标注效率<a class=td-heading-self-link href=#3-%e6%a0%87%e6%b3%a8%e6%95%88%e7%8e%87 aria-label="Heading self-link"></a></h3><p>提高标注效率：</p><ul><li><strong>使用快捷键</strong>：使用键盘快捷键</li><li><strong>批量操作</strong>：支持批量标注</li><li><strong>智能推荐</strong>：使用 AI 辅助标注</li><li><strong>合理分工</strong>：根据难度分配任务</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-标注质量不理想怎么办>Q: 标注质量不理想怎么办？<a class=td-heading-self-link href=#q-%e6%a0%87%e6%b3%a8%e8%b4%a8%e9%87%8f%e4%b8%8d%e7%90%86%e6%83%b3%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 改进建议：</p><ol><li><strong>完善标注指南</strong>：更详细的标注说明</li><li><strong>加强培训</strong>：培训标注员</li><li><strong>增加审核</strong>：提高审核比例</li><li><strong>使用预标注</strong>：使用模型辅助</li><li><strong>提供反馈</strong>：及时反馈问题</li></ol><h3 id=q-标注速度慢怎么办>Q: 标注速度慢怎么办？<a class=td-heading-self-link href=#q-%e6%a0%87%e6%b3%a8%e9%80%9f%e5%ba%a6%e6%85%a2%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 提高效率：</p><ol><li><strong>使用预标注</strong>：减少从零开始标注</li><li><strong>优化界面</strong>：使用快捷键和批量操作</li><li><strong>合理分工</strong>：根据难度分配任务</li><li><strong>激励标注员</strong>：设置激励机制</li></ol><h3 id=q-如何处理标注不一致>Q: 如何处理标注不一致？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86%e6%a0%87%e6%b3%a8%e4%b8%8d%e4%b8%80%e8%87%b4 aria-label="Heading self-link"></a></h3><p>A: 处理方法：</p><ol><li><strong>明确标准</strong>：制定明确的标注标准</li><li><strong>多数投票</strong>：使用多个标注员投票</li><li><strong>专家裁决</strong>：专家处理争议标注</li><li><strong>计算一致性</strong>：使用 Cohen&rsquo;s Kappa 等指标</li></ol><h3 id=q-支持哪些标注格式>Q: 支持哪些标注格式？<a class=td-heading-self-link href=#q-%e6%94%af%e6%8c%81%e5%93%aa%e4%ba%9b%e6%a0%87%e6%b3%a8%e6%a0%bc%e5%bc%8f aria-label="Heading self-link"></a></h3><p>A: 导出格式：</p><ul><li>JSON</li><li>CSV</li><li>COCO (用于目标检测)</li><li>YOLO (用于目标检测)</li><li>Pascal VOC (用于目标检测)</li><li>自定义格式</li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理待标注数据</li><li><a href=/datamate-docs/docs/user-guide/data-evaluation/>数据评估</a> - 评估标注质量</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-2d6e9a304ed98aa8ed6dca2e193444c8>3.5 - 数据合成</h1><div class=lead>使用大模型进行数据增强和合成</div><div class="pageinfo pageinfo-primary"><p>数据合成模块利用大模型能力，自动生成高质量的训练数据，降低数据采集成本。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据合成模块提供：</p><ul><li><strong>指令模板管理</strong>：创建和管理合成指令模板</li><li><strong>单任务合成</strong>：创建单个合成任务</li><li><strong>比例合成任务</strong>：按指定比例合成多类别数据</li><li><strong>大模型集成</strong>：支持多种大模型 API</li><li><strong>质量评估</strong>：自动评估合成数据质量</li></ul><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建指令模板>1. 创建指令模板<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e6%8c%87%e4%bb%a4%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据合成页面>步骤 1：进入数据合成页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e5%90%88%e6%88%90%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据合成</strong> → <strong>任务</strong>。</p><h4 id=步骤-2创建指令模板>步骤 2：创建指令模板<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e6%8c%87%e4%bb%a4%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>指令模板</strong> 标签</li><li>点击 <strong>创建模板</strong> 按钮</li></ol><h4 id=步骤-3配置模板>步骤 3：配置模板<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><p><strong>基本信息</strong>：</p><ul><li><strong>模板名称</strong>：例如 <code>qa_generation_template</code></li><li><strong>模板描述</strong>：描述模板用途（可选）</li><li><strong>模板类型</strong>：选择模板类型（问答、对话、摘要等）</li></ul><p><strong>提示词配置</strong>：</p><p>示例提示词：</p><pre tabindex=0><code>你是一个专业的数据生成助手。请根据以下要求生成数据：

任务：生成问答对
主题：{topic}
数量：{count}
难度：{difficulty}

要求：
1. 问题要清晰明确
2. 答案要准确完整
3. 涵盖不同难度级别

输出格式：JSON
[
  {
    &#34;question&#34;: &#34;...&#34;,
    &#34;answer&#34;: &#34;...&#34;
  }
]
</code></pre><p><strong>参数配置</strong>：</p><ul><li><strong>模型</strong>：选择使用的大模型（GPT-4、Claude、本地模型等）</li><li><strong>温度</strong>：控制生成随机性（0-1）</li><li><strong>最大 tokens</strong>：限制生成长度</li><li><strong>其他参数</strong>：根据模型配置</li></ul><h4 id=步骤-4保存模板>步骤 4：保存模板<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e4%bf%9d%e5%ad%98%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><p>点击 <strong>保存</strong> 按钮保存模板。</p><h3 id=2-创建合成任务>2. 创建合成任务<a class=td-heading-self-link href=#2-%e5%88%9b%e5%bb%ba%e5%90%88%e6%88%90%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=步骤-1创建任务>步骤 1：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><ol><li>返回 <strong>数据合成</strong> 页面</li><li>点击 <strong>创建任务</strong> 按钮</li></ol><h4 id=步骤-2配置基本信息>步骤 2：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>任务名称</strong>：例如 <code>medical_qa_synthesis</code></li><li><strong>任务描述</strong>：描述任务目的（可选）</li><li><strong>选择模板</strong>：选择已创建的指令模板</li></ul><h4 id=步骤-3配置参数>步骤 3：配置参数<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><p>根据模板的参数配置：</p><table><thead><tr><th>参数</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>topic</td><td>医疗健康</td><td>合成主题</td></tr><tr><td>count</td><td>100</td><td>生成数量</td></tr><tr><td>difficulty</td><td>中等</td><td>难度级别</td></tr></tbody></table><h4 id=步骤-4配置输出>步骤 4：配置输出<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e8%be%93%e5%87%ba aria-label="Heading self-link"></a></h4><ul><li><strong>输出数据集</strong>：选择或创建输出数据集</li><li><strong>输出格式</strong>：选择输出格式（JSON、CSV、JSONL 等）</li></ul><h4 id=步骤-5创建并执行>步骤 5：创建并执行<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e5%88%9b%e5%bb%ba%e5%b9%b6%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮创建任务。任务将自动开始执行。</p><h3 id=3-创建比例合成任务>3. 创建比例合成任务<a class=td-heading-self-link href=#3-%e5%88%9b%e5%bb%ba%e6%af%94%e4%be%8b%e5%90%88%e6%88%90%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><p>比例合成任务用于按指定比例合成多类别平衡数据。</p><h4 id=步骤-1创建比例任务>步骤 1：创建比例任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e5%88%9b%e5%bb%ba%e6%af%94%e4%be%8b%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><ol><li>在左侧导航栏选择 <strong>数据</strong> → <strong>数据合成</strong> → <strong>比例任务</strong></li><li>点击 <strong>创建任务</strong> 按钮</li></ol><h4 id=步骤-2配置任务>步骤 2：配置任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e9%85%8d%e7%bd%ae%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p><strong>基本信息</strong>：</p><ul><li><strong>任务名称</strong>：例如 <code>balanced_dataset_synthesis</code></li><li><strong>任务描述</strong>：描述任务目的</li></ul><p><strong>类别配置</strong>：</p><table><thead><tr><th>类别</th><th>比例</th><th>指令模板</th><th>数量</th></tr></thead><tbody><tr><td>正面</td><td>40%</td><td>positive_template</td><td>400</td></tr><tr><td>负面</td><td>30%</td><td>negative_template</td><td>300</td></tr><tr><td>中性</td><td>30%</td><td>neutral_template</td><td>300</td></tr></tbody></table><h4 id=步骤-3执行任务>步骤 3：执行任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e6%89%a7%e8%a1%8c%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮创建任务。系统将按比例为每个类别生成数据。</p><h3 id=4-监控合成任务>4. 监控合成任务<a class=td-heading-self-link href=#4-%e7%9b%91%e6%8e%a7%e5%90%88%e6%88%90%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=查看任务列表>查看任务列表<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h4><p>在数据合成页面，可以看到所有合成任务：</p><table><thead><tr><th>任务名称</th><th>模板</th><th>状态</th><th>进度</th><th>生成数量</th><th>操作</th></tr></thead><tbody><tr><td>医疗问答合成</td><td>qa_template</td><td>运行中</td><td>50%</td><td>50/100</td><td>查看详情</td></tr><tr><td>情感数据合成</td><td>sentiment_template</td><td>已完成</td><td>100%</td><td>1000/1000</td><td>查看详情</td></tr></tbody></table><h4 id=查看任务详情>查看任务详情<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e4%bb%bb%e5%8a%a1%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h4><p>点击任务名称进入详情页面，可以看到：</p><ul><li><strong>任务配置</strong>：模板和参数配置</li><li><strong>执行记录</strong>：历史执行记录</li><li><strong>生成结果</strong>：<ul><li>总生成数量</li><li>成功数量</li><li>失败数量</li><li>成功率</li></ul></li></ul><h4 id=查看生成数据>查看生成数据<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e7%94%9f%e6%88%90%e6%95%b0%e6%8d%ae aria-label="Heading self-link"></a></h4><p>在任务详情页面，点击 <strong>查看数据</strong> 可以：</p><ul><li>预览生成的数据</li><li>下载数据</li><li>导出到数据集</li></ul><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=模板变量>模板变量<a class=td-heading-self-link href=#%e6%a8%a1%e6%9d%bf%e5%8f%98%e9%87%8f aria-label="Heading self-link"></a></h3><p>在提示词中使用变量，实现动态配置：</p><p><strong>变量语法</strong>：<code>{variable_name}</code></p><p><strong>示例</strong>：</p><pre tabindex=0><code>请生成关于 {topic} 的 {count} 个 {difficulty} 级别的 {type}。
</code></pre><p><strong>内置变量</strong>：</p><ul><li><code>{current_date}</code>：当前日期</li><li><code>{current_time}</code>：当前时间</li><li><code>{random_id}</code>：随机 ID</li></ul><h3 id=模型选择>模型选择<a class=td-heading-self-link href=#%e6%a8%a1%e5%9e%8b%e9%80%89%e6%8b%a9 aria-label="Heading self-link"></a></h3><p>DataMate 支持多种大模型：</p><table><thead><tr><th>模型</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>GPT-4</td><td>OpenAI</td><td>高质量生成</td></tr><tr><td>GPT-3.5-Turbo</td><td>OpenAI</td><td>快速生成</td></tr><tr><td>Claude 3</td><td>Anthropic</td><td>长文本生成</td></tr><tr><td>文心一言</td><td>百度</td><td>中文优化</td></tr><tr><td>通义千问</td><td>阿里</td><td>中文优化</td></tr><tr><td>本地模型</td><td>部署本地模型</td><td>私有化部署</td></tr></tbody></table><h3 id=数据质量控制>数据质量控制<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%b4%a8%e9%87%8f%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><p>启用数据质量评估：</p><ul><li><strong>格式验证</strong>：验证输出格式</li><li><strong>内容检查</strong>：检查敏感词、不当内容</li><li><strong>重复检测</strong>：检测重复生成的内容</li><li><strong>质量评分</strong>：对生成内容打分</li></ul><h3 id=批量生成>批量生成<a class=td-heading-self-link href=#%e6%89%b9%e9%87%8f%e7%94%9f%e6%88%90 aria-label="Heading self-link"></a></h3><p>对于大规模数据生成：</p><ol><li><strong>分批生成</strong>：将大批量任务拆分为多个小批次</li><li><strong>并发控制</strong>：控制并发请求数量</li><li><strong>失败重试</strong>：自动重试失败的生成请求</li><li><strong>断点续传</strong>：支持从中断处继续生成</li></ol><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-提示词设计>1. 提示词设计<a class=td-heading-self-link href=#1-%e6%8f%90%e7%a4%ba%e8%af%8d%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h3><p>好的提示词应该：</p><ul><li><strong>明确任务</strong>：清晰描述生成任务</li><li><strong>指定格式</strong>：明确输出格式要求</li><li><strong>提供示例</strong>：给出期望的输出示例</li><li><strong>控制质量</strong>：设置质量要求</li></ul><p><strong>示例提示词</strong>：</p><pre tabindex=0><code>你是一个专业的教育内容创作助手。

任务：生成教育问答对
学科：{subject}
年级：{grade}
数量：{count}

要求：
1. 问题要符合该年级的知识水平
2. 答案要准确、详细、易懂
3. 每个答案包含解析过程
4. 不得生成敏感或不当内容

输出格式（JSON）：
[
  {
    &#34;id&#34;: 1,
    &#34;question&#34;: &#34;问题内容&#34;,
    &#34;answer&#34;: &#34;答案内容&#34;,
    &#34;explanation&#34;: &#34;解析内容&#34;,
    &#34;difficulty&#34;: &#34;easy/medium/hard&#34;,
    &#34;knowledge_points&#34;: [&#34;知识点1&#34;, &#34;知识点2&#34;]
  }
]

请开始生成：
</code></pre><h3 id=2-参数调优>2. 参数调优<a class=td-heading-self-link href=#2-%e5%8f%82%e6%95%b0%e8%b0%83%e4%bc%98 aria-label="Heading self-link"></a></h3><p>根据需求调整模型参数：</p><table><thead><tr><th>参数</th><th>高质量</th><th>快速生成</th><th>创意生成</th></tr></thead><tbody><tr><td>温度</td><td>0.3-0.5</td><td>0.1-0.3</td><td>0.7-1.0</td></tr><tr><td>最大 tokens</td><td>根据需求</td><td>较短</td><td>较长</td></tr><tr><td>Top P</td><td>0.9-0.95</td><td>0.9</td><td>0.95-1.0</td></tr></tbody></table><h3 id=3-数据验证>3. 数据验证<a class=td-heading-self-link href=#3-%e6%95%b0%e6%8d%ae%e9%aa%8c%e8%af%81 aria-label="Heading self-link"></a></h3><p>生成后进行数据验证：</p><ol><li><strong>格式检查</strong>：检查输出格式是否正确</li><li><strong>内容审核</strong>：人工抽查部分数据</li><li><strong>质量评估</strong>：使用评估工具打分</li><li><strong>去重</strong>：去除重复或高度相似的内容</li></ol><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-生成数据质量不理想怎么办>Q: 生成数据质量不理想怎么办？<a class=td-heading-self-link href=#q-%e7%94%9f%e6%88%90%e6%95%b0%e6%8d%ae%e8%b4%a8%e9%87%8f%e4%b8%8d%e7%90%86%e6%83%b3%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 优化建议：</p><ol><li><strong>改进提示词</strong>：更详细、更明确的指令</li><li><strong>调整参数</strong>：降低温度、增加最大 tokens</li><li><strong>提供示例</strong>：在提示词中给出示例</li><li><strong>更换模型</strong>：尝试其他大模型</li><li><strong>人工审核</strong>：人工审核和筛选</li></ol><h3 id=q-生成速度慢怎么办>Q: 生成速度慢怎么办？<a class=td-heading-self-link href=#q-%e7%94%9f%e6%88%90%e9%80%9f%e5%ba%a6%e6%85%a2%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 加速建议：</p><ol><li><strong>减少数量</strong>：分批生成，不要一次性生成过多</li><li><strong>调整并发</strong>：适当增加并发数</li><li><strong>使用更快的模型</strong>：如 GPT-3.5-Turbo</li><li><strong>缩短输出</strong>：减少最大 tokens</li><li><strong>使用本地模型</strong>：部署本地模型加速</li></ol><h3 id=q-如何保证生成数据的多样性>Q: 如何保证生成数据的多样性？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e4%bf%9d%e8%af%81%e7%94%9f%e6%88%90%e6%95%b0%e6%8d%ae%e7%9a%84%e5%a4%9a%e6%a0%b7%e6%80%a7 aria-label="Heading self-link"></a></h3><p>A: 增加多样性：</p><ol><li><strong>提高温度</strong>：设置温度为 0.7-1.0</li><li><strong>丰富提示词</strong>：在提示词中加入变化元素</li><li><strong>多次生成</strong>：多次生成后去重</li><li><strong>使用不同种子</strong>：改变随机种子</li><li><strong>混合模型</strong>：使用多个模型生成</li></ol><h3 id=q-生成的数据有重复怎么办>Q: 生成的数据有重复怎么办？<a class=td-heading-self-link href=#q-%e7%94%9f%e6%88%90%e7%9a%84%e6%95%b0%e6%8d%ae%e6%9c%89%e9%87%8d%e5%a4%8d%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 去重方法：</p><ol><li><strong>启用去重</strong>：在任务配置中启用去重功能</li><li><strong>调整温度</strong>：提高温度增加随机性</li><li><strong>丰富提示词</strong>：在提示词中加入更多变化</li><li><strong>后处理去重</strong>：使用去重工具处理</li></ol><h3 id=q-如何控制生成成本>Q: 如何控制生成成本？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e6%8e%a7%e5%88%b6%e7%94%9f%e6%88%90%e6%88%90%e6%9c%ac aria-label="Heading self-link"></a></h3><p>A: 成本控制：</p><ol><li><strong>选择合适模型</strong>：根据需求选择模型</li><li><strong>控制长度</strong>：限制最大 tokens</li><li><strong>批量处理</strong>：使用批量 API（如果支持）</li><li><strong>缓存复用</strong>：缓存相似请求的结果</li><li><strong>本地模型</strong>：对于大规模生成，考虑部署本地模型</li></ol><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/docs/api-reference/data-synthesis/>数据合成 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-evaluation/>数据评估</a> - 评估合成数据质量</li><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理合成数据</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 将合成任务集成到流水线</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-884671239254986204060496ce6265f3>3.6 - 数据评估</h1><div class=lead>使用 DataMate 评估数据质量</div><div class="pageinfo pageinfo-primary"><p>数据评估模块提供多维度数据质量评估能力，帮助您了解和提升数据质量。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>数据评估模块提供：</p><ul><li><strong>质量指标</strong>：丰富的数据质量评估指标</li><li><strong>自动评估</strong>：自动执行数据评估任务</li><li><strong>手动评估</strong>：人工抽样评估</li><li><strong>评估报告</strong>：生成详细的评估报告</li><li><strong>质量追踪</strong>：追踪数据质量变化趋势</li></ul><h2 id=评估维度>评估维度<a class=td-heading-self-link href=#%e8%af%84%e4%bc%b0%e7%bb%b4%e5%ba%a6 aria-label="Heading self-link"></a></h2><h3 id=数据完整性>数据完整性<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ae%8c%e6%95%b4%e6%80%a7 aria-label="Heading self-link"></a></h3><table><thead><tr><th>指标</th><th>说明</th><th>计算方式</th></tr></thead><tbody><tr><td>空值率</td><td>空值占比</td><td>空值数 / 总数</td></tr><tr><td>缺失字段率</td><td>必填字段缺失率</td><td>缺失字段数 / 总字段数</td></tr><tr><td>记录完整率</td><td>完整记录占比</td><td>完整记录数 / 总记录数</td></tr></tbody></table><h3 id=数据准确性>数据准确性<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%87%86%e7%a1%ae%e6%80%a7 aria-label="Heading self-link"></a></h3><table><thead><tr><th>指标</th><th>说明</th><th>计算方式</th></tr></thead><tbody><tr><td>格式正确率</td><td>格式正确的占比</td><td>格式正确数 / 总数</td></tr><tr><td>值域符合率</td><td>值在合理范围内的占比</td><td>符合值域数 / 总数</td></tr><tr><td>一致性符合率</td><td>数据一致的比例</td><td>一致记录数 / 总记录数</td></tr></tbody></table><h3 id=数据唯一性>数据唯一性<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%94%af%e4%b8%80%e6%80%a7 aria-label="Heading self-link"></a></h3><table><thead><tr><th>指标</th><th>说明</th><th>计算方式</th></tr></thead><tbody><tr><td>重复率</td><td>重复记录占比</td><td>重复记录数 / 总记录数</td></tr><tr><td>唯一率</td><td>唯一记录占比</td><td>唯一记录数 / 总记录数</td></tr></tbody></table><h3 id=数据时效性>数据时效性<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%97%b6%e6%95%88%e6%80%a7 aria-label="Heading self-link"></a></h3><table><thead><tr><th>指标</th><th>说明</th><th>计算方式</th></tr></thead><tbody><tr><td>数据新鲜度</td><td>数据更新频率</td><td>最后更新时间</td></tr><tr><td>过期数据率</td><td>过期数据占比</td><td>过期记录数 / 总记录数</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建评估任务>1. 创建评估任务<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e8%af%84%e4%bc%b0%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入数据评估页面>步骤 1：进入数据评估页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%95%b0%e6%8d%ae%e8%af%84%e4%bc%b0%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>数据评估</strong>。</p><h4 id=步骤-2创建任务>步骤 2：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建任务</strong> 按钮。</p><h4 id=步骤-3配置基本信息>步骤 3：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>任务名称</strong>：例如 <code>data_quality_evaluation</code></li><li><strong>任务描述</strong>：描述评估任务（可选）</li><li><strong>评估数据集</strong>：选择要评估的数据集</li></ul><h4 id=步骤-4配置评估维度>步骤 4：配置评估维度<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e8%af%84%e4%bc%b0%e7%bb%b4%e5%ba%a6 aria-label="Heading self-link"></a></h4><p>选择要评估的维度：</p><ul><li>✅ 数据完整性</li><li>✅ 数据准确性</li><li>✅ 数据唯一性</li><li>✅ 数据时效性</li></ul><h4 id=步骤-5配置评估规则>步骤 5：配置评估规则<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e9%85%8d%e7%bd%ae%e8%af%84%e4%bc%b0%e8%a7%84%e5%88%99 aria-label="Heading self-link"></a></h4><p>为每个维度配置具体规则：</p><p><strong>完整性规则</strong>：</p><pre tabindex=0><code>必填字段：name, email, phone
空值阈值：5%（超过5%则警告）
</code></pre><p><strong>准确性规则</strong>：</p><pre tabindex=0><code>email 格式：正则表达式验证
age 范围：0-120
phone 格式：手机号格式
</code></pre><p><strong>唯一性规则</strong>：</p><pre tabindex=0><code>唯一字段：id, email
重复阈值：3%（超过3%则警告）
</code></pre><h4 id=步骤-6创建任务>步骤 6：创建任务<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-6%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮完成创建。</p><h3 id=2-执行评估>2. 执行评估<a class=td-heading-self-link href=#2-%e6%89%a7%e8%a1%8c%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h3><h4 id=自动评估>自动评估<a class=td-heading-self-link href=#%e8%87%aa%e5%8a%a8%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h4><p>任务创建后自动执行，或点击 <strong>立即执行</strong>。</p><h4 id=手动评估>手动评估<a class=td-heading-self-link href=#%e6%89%8b%e5%8a%a8%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>手动评估</strong> 标签</li><li>查看待评估样本</li><li>人工评估样本质量</li><li>提交评估结果</li></ol><h3 id=3-查看评估报告>3. 查看评估报告<a class=td-heading-self-link href=#3-%e6%9f%a5%e7%9c%8b%e8%af%84%e4%bc%b0%e6%8a%a5%e5%91%8a aria-label="Heading self-link"></a></h3><h4 id=总体评分>总体评分<a class=td-heading-self-link href=#%e6%80%bb%e4%bd%93%e8%af%84%e5%88%86 aria-label="Heading self-link"></a></h4><p>评估报告提供总体质量评分：</p><pre tabindex=0><code>总体质量评分：85 分 (优秀)

完整性：90 分 ⭐⭐⭐⭐⭐
准确性：82 分 ⭐⭐⭐⭐
唯一性：95 分 ⭐⭐⭐⭐⭐
时效性：75 分 ⭐⭐⭐⭐
</code></pre><h4 id=详细指标>详细指标<a class=td-heading-self-link href=#%e8%af%a6%e7%bb%86%e6%8c%87%e6%a0%87 aria-label="Heading self-link"></a></h4><p>每个维度的详细指标：</p><p><strong>完整性</strong>：</p><ul><li>空值率：3.2% ✅</li><li>缺失字段率：1.5% ✅</li><li>记录完整率：96.8% ✅</li></ul><p><strong>准确性</strong>：</p><ul><li>email 格式正确率：98.5% ✅</li><li>age 值域符合率：95.2% ✅</li><li>phone 格式正确率：88.7% ⚠️</li></ul><p><strong>唯一性</strong>：</p><ul><li>重复率：1.8% ✅</li><li>唯一率：98.2% ✅</li></ul><p><strong>时效性</strong>：</p><ul><li>数据新鲜度：平均 7 天前</li><li>过期数据率：12.5% ⚠️</li></ul><h4 id=问题列表>问题列表<a class=td-heading-self-link href=#%e9%97%ae%e9%a2%98%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h4><p>列出发现的数据质量问题：</p><table><thead><tr><th>序号</th><th>问题</th><th>类型</th><th>严重程度</th><th>影响范围</th><th>建议</th></tr></thead><tbody><tr><td>1</td><td>phone 格式不正确</td><td>准确性</td><td>中</td><td>11.3%</td><td>检查并清洗</td></tr><tr><td>2</td><td>部分数据过期</td><td>时效性</td><td>高</td><td>12.5%</td><td>更新数据</td></tr><tr><td>3</td><td>少量记录有空值</td><td>完整性</td><td>低</td><td>3.2%</td><td>填充或删除</td></tr></tbody></table><h4 id=质量趋势>质量趋势<a class=td-heading-self-link href=#%e8%b4%a8%e9%87%8f%e8%b6%8b%e5%8a%bf aria-label="Heading self-link"></a></h4><p>查看数据质量变化趋势：</p><pre tabindex=0><code>质量评分趋势
90 │     ╭─╮
85 │ ╭─╮╭─╯ ╭─╮
80 │╭─╯╭─╯   ╭─╯
75 │╭─╯╭─╯   ╭─╯
70 │╭─╯╭─╯   ╭─╯
   └─────────────
   1月 2月 3月 4月
</code></pre><h3 id=4-导出评估报告>4. 导出评估报告<a class=td-heading-self-link href=#4-%e5%af%bc%e5%87%ba%e8%af%84%e4%bc%b0%e6%8a%a5%e5%91%8a aria-label="Heading self-link"></a></h3><h4 id=导出为-pdf>导出为 PDF<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e4%b8%ba-pdf aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>导出报告</strong> 按钮</li><li>选择 <strong>PDF</strong> 格式</li><li>下载报告文件</li></ol><h4 id=导出为-excel>导出为 Excel<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e4%b8%ba-excel aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>导出报告</strong> 按钮</li><li>选择 <strong>Excel</strong> 格式</li><li>下载报告文件</li></ol><p>Excel 报告包含多个工作表：</p><ul><li>总体评分</li><li>详细指标</li><li>问题列表</li><li>样本明细</li></ul><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=自定义评估规则>自定义评估规则<a class=td-heading-self-link href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e8%af%84%e4%bc%b0%e8%a7%84%e5%88%99 aria-label="Heading self-link"></a></h3><p>除了内置规则，还可以自定义评估规则：</p><h4 id=正则表达式验证>正则表达式验证<a class=td-heading-self-link href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e9%aa%8c%e8%af%81 aria-label="Heading self-link"></a></h4><pre tabindex=0><code>字段：phone
规则：^1[3-9]\d{9}$
说明：中国大陆手机号
</code></pre><h4 id=值域验证>值域验证<a class=td-heading-self-link href=#%e5%80%bc%e5%9f%9f%e9%aa%8c%e8%af%81 aria-label="Heading self-link"></a></h4><pre tabindex=0><code>字段：age
最小值：0
最大值：120
说明：年龄在合理范围内
</code></pre><h4 id=自定义脚本>自定义脚本<a class=td-heading-self-link href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e8%84%9a%e6%9c%ac aria-label="Heading self-link"></a></h4><p>使用 Python 脚本自定义评估逻辑：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>evaluate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>record</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># 自定义评估逻辑</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>record</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;score&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#204a87;font-weight:700>or</span> <span style=color:#000>record</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;score&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>False</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;分数必须在 0-100 之间&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;OK&#34;</span>
</span></span></code></pre></div><h3 id=对比评估>对比评估<a class=td-heading-self-link href=#%e5%af%b9%e6%af%94%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h3><p>对比不同数据集或不同版本的数据质量：</p><ol><li>选择要对比的数据集/版本</li><li>执行对比评估</li><li>查看对比报告</li></ol><p>对比维度：</p><ul><li>总体评分对比</li><li>各维度指标对比</li><li>问题类型分布对比</li></ul><h3 id=质量阈值告警>质量阈值告警<a class=td-heading-self-link href=#%e8%b4%a8%e9%87%8f%e9%98%88%e5%80%bc%e5%91%8a%e8%ad%a6 aria-label="Heading self-link"></a></h3><p>设置质量阈值，超过阈值自动告警：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>告警规则</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>总体评分低于 80</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>发送邮件</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>空值率超过 10%</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>发送短信</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>重复率超过 5%</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>发送邮件</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-定期评估>1. 定期评估<a class=td-heading-self-link href=#1-%e5%ae%9a%e6%9c%9f%e8%af%84%e4%bc%b0 aria-label="Heading self-link"></a></h3><p>建议定期执行数据质量评估：</p><ul><li><strong>每日评估</strong>：关键数据每日评估</li><li><strong>每周评估</strong>：一般数据每周评估</li><li><strong>每月评估</strong>：全部数据每月评估</li></ul><h3 id=2-建立基线>2. 建立基线<a class=td-heading-self-link href=#2-%e5%bb%ba%e7%ab%8b%e5%9f%ba%e7%ba%bf aria-label="Heading self-link"></a></h3><p>为每个数据集建立质量基线：</p><ul><li>初次评估作为基线</li><li>后续评估与基线对比</li><li>追踪质量变化趋势</li></ul><h3 id=3-持续改进>3. 持续改进<a class=td-heading-self-link href=#3-%e6%8c%81%e7%bb%ad%e6%94%b9%e8%bf%9b aria-label="Heading self-link"></a></h3><p>根据评估结果持续改进：</p><ul><li><strong>清洗问题数据</strong>：根据评估结果清洗</li><li><strong>优化采集流程</strong>：改进数据采集方式</li><li><strong>更新验证规则</strong>：及时更新验证规则</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-评估任务执行失败>Q: 评估任务执行失败？<a class=td-heading-self-link href=#q-%e8%af%84%e4%bc%b0%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><p>A: 排查步骤：</p><ol><li><strong>检查数据集</strong>：确认数据集存在</li><li><strong>检查规则配置</strong>：确认评估规则正确</li><li><strong>查看执行日志</strong>：获取详细错误信息</li><li><strong>减少样本量</strong>：先用小样本测试</li></ol><h3 id=q-评估结果不准确>Q: 评估结果不准确？<a class=td-heading-self-link href=#q-%e8%af%84%e4%bc%b0%e7%bb%93%e6%9e%9c%e4%b8%8d%e5%87%86%e7%a1%ae aria-label="Heading self-link"></a></h3><p>A: 改进建议：</p><ol><li><strong>调整评估规则</strong>：根据实际需求调整</li><li><strong>增加评估维度</strong>：添加更多评估维度</li><li><strong>人工审核</strong>：人工抽检验证结果</li><li><strong>更新基线</strong>：定期更新质量基线</li></ol><h3 id=q-如何提高数据质量>Q: 如何提高数据质量？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e6%8f%90%e9%ab%98%e6%95%b0%e6%8d%ae%e8%b4%a8%e9%87%8f aria-label="Heading self-link"></a></h3><p>A: 改进建议：</p><ol><li><strong>数据清洗</strong>：使用数据清洗模块清洗</li><li><strong>源头控制</strong>：在数据采集阶段控制质量</li><li><strong>建立规范</strong>：制定数据标准和规范</li><li><strong>定期评估</strong>：定期评估并改进</li></ol><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/docs/api-reference/data-evaluation/>数据评估 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 清洗数据</li><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理数据</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e6ad9d99cac465d0b1e206dfa18e11ec>3.7 - 知识库管理</h1><div class=lead>使用 DataMate 构建和管理 RAG 知识库</div><div class="pageinfo pageinfo-primary"><p>知识库管理模块帮助您构建企业知识库，实现高效的向量检索和 RAG 应用。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>知识库管理模块提供：</p><ul><li><strong>文档上传</strong>：支持多种文档格式的上传</li><li><strong>文本切分</strong>：智能文本分块策略</li><li><strong>向量化</strong>：自动将文本转换为向量</li><li><strong>向量检索</strong>：基于相似度的语义检索</li><li><strong>知识库问答</strong>：集成 RAG 的智能问答</li></ul><h2 id=支持的文档格式>支持的文档格式<a class=td-heading-self-link href=#%e6%94%af%e6%8c%81%e7%9a%84%e6%96%87%e6%a1%a3%e6%a0%bc%e5%bc%8f aria-label="Heading self-link"></a></h2><table><thead><tr><th>格式</th><th>说明</th><th>推荐场景</th></tr></thead><tbody><tr><td>TXT</td><td>纯文本</td><td>通用文本</td></tr><tr><td>PDF</td><td>PDF 文档</td><td>文档、报告</td></tr><tr><td>Markdown</td><td>Markdown 文件</td><td>技术文档</td></tr><tr><td>JSON</td><td>JSON 数据</td><td>结构化数据</td></tr><tr><td>CSV</td><td>CSV 表格</td><td>表格数据</td></tr><tr><td>DOCX</td><td>Word 文档</td><td>Office 文档</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建知识库>1. 创建知识库<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入知识库页面>步骤 1：进入知识库页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e7%9f%a5%e8%af%86%e5%ba%93%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>知识库</strong>。</p><h4 id=步骤-2创建知识库>步骤 2：创建知识库<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建知识库</strong> 按钮。</p><h4 id=步骤-3配置基本信息>步骤 3：配置基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e9%85%8d%e7%bd%ae%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>知识库名称</strong>：例如 <code>company_docs_kb</code></li><li><strong>知识库描述</strong>：描述知识库用途（可选）</li><li><strong>知识库类型</strong>：通用 / 专业领域</li></ul><h4 id=步骤-4配置向量参数>步骤 4：配置向量参数<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e9%85%8d%e7%bd%ae%e5%90%91%e9%87%8f%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><ul><li><p><strong>嵌入模型</strong>：选择嵌入模型</p><ul><li>OpenAI text-embedding-ada-002</li><li>BGE-M3</li><li>自定义模型</li></ul></li><li><p><strong>向量维度</strong>：根据模型自动设置</p></li><li><p><strong>索引类型</strong>：IVF_FLAT / HNSW / IVF_PQ</p></li></ul><h4 id=步骤-5配置切分策略>步骤 5：配置切分策略<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-5%e9%85%8d%e7%bd%ae%e5%88%87%e5%88%86%e7%ad%96%e7%95%a5 aria-label="Heading self-link"></a></h4><ul><li><p><strong>切分方式</strong>：</p><ul><li>按字符数切分</li><li>按段落切分</li><li>按语义切分</li></ul></li><li><p><strong>块大小</strong>：每个文本块的大小（字符数）</p></li><li><p><strong>重叠大小</strong>：相邻块的重叠大小</p></li></ul><h4 id=步骤-6创建知识库>步骤 6：创建知识库<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-6%e5%88%9b%e5%bb%ba%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 按钮完成创建。</p><h3 id=2-上传文档>2. 上传文档<a class=td-heading-self-link href=#2-%e4%b8%8a%e4%bc%a0%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入知识库详情>步骤 1：进入知识库详情<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e7%9f%a5%e8%af%86%e5%ba%93%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h4><p>点击知识库名称进入详情页面。</p><h4 id=步骤-2上传文档>步骤 2：上传文档<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e4%b8%8a%e4%bc%a0%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>上传文档</strong> 按钮</li><li>选择本地文件</li><li>等待上传完成</li></ol><p>系统会自动：</p><ol><li>解析文档内容</li><li>切分文本</li><li>生成向量</li><li>建立索引</li></ol><h4 id=步骤-3查看处理状态>步骤 3：查看处理状态<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e6%9f%a5%e7%9c%8b%e5%a4%84%e7%90%86%e7%8a%b6%e6%80%81 aria-label="Heading self-link"></a></h4><p>在文档列表中可以看到处理状态：</p><table><thead><tr><th>文件名</th><th>大小</th><th>状态</th><th>文本块数</th><th>向量化进度</th><th>操作</th></tr></thead><tbody><tr><td>doc1.pdf</td><td>2.3 MB</td><td>已完成</td><td>150</td><td>100%</td><td>查看详情</td></tr><tr><td>doc2.txt</td><td>156 KB</td><td>处理中</td><td>-</td><td>50%</td><td>查看详情</td></tr><tr><td>doc3.md</td><td>45 KB</td><td>等待中</td><td>-</td><td>0%</td><td>查看详情</td></tr></tbody></table><h3 id=3-向量检索>3. 向量检索<a class=td-heading-self-link href=#3-%e5%90%91%e9%87%8f%e6%a3%80%e7%b4%a2 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入检索页面>步骤 1：进入检索页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%a3%80%e7%b4%a2%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在知识库详情页面，点击 <strong>向量检索</strong> 标签。</p><h4 id=步骤-2输入查询>步骤 2：输入查询<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e8%be%93%e5%85%a5%e6%9f%a5%e8%af%a2 aria-label="Heading self-link"></a></h4><p>在搜索框输入查询内容，例如：</p><pre tabindex=0><code>如何使用 DataMate 进行数据清洗？
</code></pre><h4 id=步骤-3查看检索结果>步骤 3：查看检索结果<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e6%9f%a5%e7%9c%8b%e6%a3%80%e7%b4%a2%e7%bb%93%e6%9e%9c aria-label="Heading self-link"></a></h4><p>系统返回最相关的文本块及其相似度分数：</p><table><thead><tr><th>排名</th><th>文本块</th><th>相似度</th><th>来源文档</th><th>操作</th></tr></thead><tbody><tr><td>1</td><td>DataMate 的数据清洗模块&mldr;</td><td>0.92</td><td>user_guide.pdf</td><td>查看</td></tr><tr><td>2</td><td>配置清洗任务&mldr;</td><td>0.87</td><td>tutorial.md</td><td>查看</td></tr><tr><td>3</td><td>清洗算子列表&mldr;</td><td>0.81</td><td>reference.txt</td><td>查看</td></tr></tbody></table><h4 id=高级检索>高级检索<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e6%a3%80%e7%b4%a2 aria-label="Heading self-link"></a></h4><p>点击 <strong>高级检索</strong>，可以：</p><ul><li><strong>设置 Top-K</strong>：返回前 K 个结果（默认 5）</li><li><strong>设置阈值</strong>：过滤低于相似度阈值的结果</li><li><strong>过滤文档</strong>：限定检索范围</li><li><strong>重排序</strong>：使用重排序模型优化结果</li></ul><h3 id=4-知识库问答rag>4. 知识库问答（RAG）<a class=td-heading-self-link href=#4-%e7%9f%a5%e8%af%86%e5%ba%93%e9%97%ae%e7%ad%94rag aria-label="Heading self-link"></a></h3><h4 id=步骤-1启用-rag>步骤 1：启用 RAG<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e5%90%af%e7%94%a8-rag aria-label="Heading self-link"></a></h4><p>在知识库详情页面，点击 <strong>RAG 问答</strong> 标签。</p><h4 id=步骤-2配置-rag-参数>步骤 2：配置 RAG 参数<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e9%85%8d%e7%bd%ae-rag-%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><ul><li><strong>大语言模型</strong>：选择使用的 LLM</li><li><strong>检索数量</strong>：检索的文本块数量</li><li><strong>温度</strong>：控制生成随机性</li><li><strong>提示词模板</strong>：自定义问答模板</li></ul><h4 id=步骤-3进行问答>步骤 3：进行问答<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e8%bf%9b%e8%a1%8c%e9%97%ae%e7%ad%94 aria-label="Heading self-link"></a></h4><p>在对话框输入问题，例如：</p><pre tabindex=0><code>用户：DataMate 支持哪些数据清洗算子？

助手：DataMate 支持丰富的数据清洗算子，包括：
1. 数据质量算子：去重、空值处理、异常值检测...
2. 文本清洗算子：去除特殊字符、大小写转换...
3. 图像清洗算子：格式转换、质量检测...
[来源：user_guide.pdf, tutorial.md]
</code></pre><p>助手会：</p><ol><li>检索相关文本块</li><li>基于检索内容生成答案</li><li>标注答案来源</li></ol><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=文本切分策略>文本切分策略<a class=td-heading-self-link href=#%e6%96%87%e6%9c%ac%e5%88%87%e5%88%86%e7%ad%96%e7%95%a5 aria-label="Heading self-link"></a></h3><h4 id=字符切分>字符切分<a class=td-heading-self-link href=#%e5%ad%97%e7%ac%a6%e5%88%87%e5%88%86 aria-label="Heading self-link"></a></h4><p>按固定字符数切分：</p><ul><li><strong>块大小</strong>：500 字符</li><li><strong>重叠</strong>：50 字符</li></ul><h4 id=段落切分>段落切分<a class=td-heading-self-link href=#%e6%ae%b5%e8%90%bd%e5%88%87%e5%88%86 aria-label="Heading self-link"></a></h4><p>按段落边界切分：</p><ul><li>保持段落完整性</li><li>适合结构化文档</li></ul><h4 id=语义切分>语义切分<a class=td-heading-self-link href=#%e8%af%ad%e4%b9%89%e5%88%87%e5%88%86 aria-label="Heading self-link"></a></h4><p>基于语义相似度切分：</p><ul><li>保持语义完整性</li><li>适合长文档</li><li>需要额外模型</li></ul><h3 id=自定义嵌入模型>自定义嵌入模型<a class=td-heading-self-link href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b5%8c%e5%85%a5%e6%a8%a1%e5%9e%8b aria-label="Heading self-link"></a></h3><h4 id=使用本地模型>使用本地模型<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%9c%ac%e5%9c%b0%e6%a8%a1%e5%9e%8b aria-label="Heading self-link"></a></h4><ol><li>部署本地嵌入模型服务</li><li>在知识库配置中选择自定义模型</li><li>填写模型服务地址</li></ol><p>示例：</p><pre tabindex=0><code>模型服务地址：http://localhost:8000/embeddings
请求格式：
{
  &#34;texts&#34;: [&#34;文本1&#34;, &#34;文本2&#34;],
  &#34;model&#34;: &#34;bge-m3&#34;
}
</code></pre><h4 id=使用-openai>使用 OpenAI<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-openai aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;provider&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;openai&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;model&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text-embedding-ada-002&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;api_key&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;your-api-key&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=知识库管理>知识库管理<a class=td-heading-self-link href=#%e7%9f%a5%e8%af%86%e5%ba%93%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=更新知识库>更新知识库<a class=td-heading-self-link href=#%e6%9b%b4%e6%96%b0%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><p>当文档变更时，可以：</p><ol><li><strong>重新索引</strong>：重新生成所有文档的向量</li><li><strong>增量更新</strong>：只更新变更的文档</li><li><strong>删除文档</strong>：从知识库中删除文档</li></ol><h4 id=导出知识库>导出知识库<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><p>支持导出：</p><ul><li><strong>文档列表</strong>：导出为 CSV</li><li><strong>向量数据</strong>：导出为 NPY/CSV</li><li><strong>元数据</strong>：导出为 JSON</li></ul><h4 id=知识库统计>知识库统计<a class=td-heading-self-link href=#%e7%9f%a5%e8%af%86%e5%ba%93%e7%bb%9f%e8%ae%a1 aria-label="Heading self-link"></a></h4><p>查看知识库统计信息：</p><ul><li><strong>文档数量</strong>：总文档数</li><li><strong>文本块数量</strong>：总文本块数</li><li><strong>向量数量</strong>：总向量数</li><li><strong>存储大小</strong>：向量存储大小</li><li><strong>更新时间</strong>：最后更新时间</li></ul><h3 id=多知识库管理>多知识库管理<a class=td-heading-self-link href=#%e5%a4%9a%e7%9f%a5%e8%af%86%e5%ba%93%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=创建多个知识库>创建多个知识库<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e5%a4%9a%e4%b8%aa%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><p>可以根据不同主题创建多个知识库：</p><ul><li><code>product_kb</code>：产品文档</li><li><code>technical_kb</code>：技术文档</li><li><code>hr_kb</code>：人力资源文档</li></ul><h4 id=联合检索>联合检索<a class=td-heading-self-link href=#%e8%81%94%e5%90%88%e6%a3%80%e7%b4%a2 aria-label="Heading self-link"></a></h4><p>在多个知识库中同时检索：</p><ol><li>选择要检索的知识库</li><li>执行检索</li><li>结果汇总并排序</li></ol><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-文档准备>1. 文档准备<a class=td-heading-self-link href=#1-%e6%96%87%e6%a1%a3%e5%87%86%e5%a4%87 aria-label="Heading self-link"></a></h3><p>上传文档前的准备工作：</p><ul><li><strong>格式统一</strong>：转换为统一的格式（如 PDF、Markdown）</li><li><strong>清理内容</strong>：删除无关内容（页眉页脚、广告等）</li><li><strong>结构化</strong>：保持良好的文档结构</li><li><strong>元数据</strong>：添加文档元数据（作者、日期、标签等）</li></ul><h3 id=2-切分策略选择>2. 切分策略选择<a class=td-heading-self-link href=#2-%e5%88%87%e5%88%86%e7%ad%96%e7%95%a5%e9%80%89%e6%8b%a9 aria-label="Heading self-link"></a></h3><p>根据文档类型选择：</p><table><thead><tr><th>文档类型</th><th>推荐策略</th><th>块大小</th></tr></thead><tbody><tr><td>技术文档</td><td>段落切分</td><td>-</td></tr><tr><td>长报告</td><td>语义切分</td><td>-</td></tr><tr><td>短文本</td><td>字符切分</td><td>500</td></tr><tr><td>代码</td><td>字符切分</td><td>300</td></tr></tbody></table><h3 id=3-向量参数调优>3. 向量参数调优<a class=td-heading-self-link href=#3-%e5%90%91%e9%87%8f%e5%8f%82%e6%95%b0%e8%b0%83%e4%bc%98 aria-label="Heading self-link"></a></h3><p>根据需求调整：</p><table><thead><tr><th>场景</th><th>向量维度</th><th>索引类型</th></tr></thead><tbody><tr><td>高精度</td><td>1536</td><td>HNSW</td></tr><tr><td>快速检索</td><td>768</td><td>IVF_FLAT</td></tr><tr><td>大规模</td><td>512</td><td>IVF_PQ</td></tr></tbody></table><h3 id=4-rag-提示词设计>4. RAG 提示词设计<a class=td-heading-self-link href=#4-rag-%e6%8f%90%e7%a4%ba%e8%af%8d%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h3><p>设计有效的 RAG 提示词：</p><pre tabindex=0><code>你是一个专业的客服助手。请基于以下知识库内容回答用户问题。

知识库内容：
{context}

用户问题：
{question}

回答要求：
1. 只基于知识库内容回答
2. 如果知识库中没有相关信息，明确告知
3. 回答要准确、详细
4. 标注信息来源

请回答：
</code></pre><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-文档上传后一直处于处理中状态>Q: 文档上传后一直处于"处理中"状态？<a class=td-heading-self-link href=#q-%e6%96%87%e6%a1%a3%e4%b8%8a%e4%bc%a0%e5%90%8e%e4%b8%80%e7%9b%b4%e5%a4%84%e4%ba%8e%e5%a4%84%e7%90%86%e4%b8%ad%e7%8a%b6%e6%80%81 aria-label="Heading self-link"></a></h3><p>A: 检查以下项目：</p><ol><li><strong>文档格式</strong>：确保文档格式被支持</li><li><strong>文档大小</strong>：单个文档不超过 100MB</li><li><strong>向量服务</strong>：检查向量服务是否正常运行</li><li><strong>查看日志</strong>：查看详细错误信息</li></ol><h3 id=q-检索结果不准确>Q: 检索结果不准确？<a class=td-heading-self-link href=#q-%e6%a3%80%e7%b4%a2%e7%bb%93%e6%9e%9c%e4%b8%8d%e5%87%86%e7%a1%ae aria-label="Heading self-link"></a></h3><p>A: 优化建议：</p><ol><li><strong>调整切分策略</strong>：尝试不同的切分方式</li><li><strong>增加块大小</strong>：增加上下文信息</li><li><strong>使用重排序</strong>：启用重排序模型</li><li><strong>优化查询</strong>：使用更明确的查询语句</li><li><strong>更换嵌入模型</strong>：尝试其他嵌入模型</li></ol><h3 id=q-rag-回答质量不佳>Q: RAG 回答质量不佳？<a class=td-heading-self-link href=#q-rag-%e5%9b%9e%e7%ad%94%e8%b4%a8%e9%87%8f%e4%b8%8d%e4%bd%b3 aria-label="Heading self-link"></a></h3><p>A: 改进建议：</p><ol><li><strong>增加检索数量</strong>：检索更多相关文本块</li><li><strong>优化提示词</strong>：改进问答提示词模板</li><li><strong>更换 LLM</strong>：尝试更强大的模型</li><li><strong>人工审核</strong>：人工审核和优化回答</li></ol><h3 id=q-如何处理大文档>Q: 如何处理大文档？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86%e5%a4%a7%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h3><p>A: 大文档处理建议：</p><ol><li><strong>拆分文档</strong>：将大文档拆分为多个小文档</li><li><strong>分批上传</strong>：分批上传和处理</li><li><strong>使用语义切分</strong>：保持语义完整性</li><li><strong>异步处理</strong>：选择异步处理模式</li></ol><h3 id=q-如何更新知识库>Q: 如何更新知识库？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e6%9b%b4%e6%96%b0%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h3><p>A: 知识库更新方式：</p><ol><li><strong>单个文档更新</strong>：删除旧文档，上传新文档</li><li><strong>批量更新</strong>：使用批量导入功能</li><li><strong>全量重建</strong>：清空知识库，重新上传</li><li><strong>API 更新</strong>：通过 API 接口更新</li></ol><h2 id=api-参考>API 参考<a class=td-heading-self-link href=#api-%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><p>详细的 API 文档请参考：</p><ul><li><a href=/docs/api-reference/rag-indexer/>RAG 索引 API</a></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/agent/>Agent 对话</a> - 使用知识库进行问答</li><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理知识库文档</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 将知识库集成到流水线</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-bd34218855ac7a39ca5b39c88f9631cc>3.8 - 算子市场</h1><div class=lead>使用和管理 DataMate 算子</div><div class="pageinfo pageinfo-primary"><p>算子市场提供丰富的数据处理算子，支持自定义算子开发。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>算子市场模块提供：</p><ul><li><strong>内置算子</strong>：丰富的内置数据处理算子</li><li><strong>算子发布</strong>：发布和分享自定义算子</li><li><strong>算子安装</strong>：安装第三方算子</li><li><strong>自定义开发</strong>：开发自定义算子</li></ul><h2 id=内置算子>内置算子<a class=td-heading-self-link href=#%e5%86%85%e7%bd%ae%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h2><h3 id=数据清洗算子>数据清洗算子<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th><th>输入</th><th>输出</th></tr></thead><tbody><tr><td>去重算子</td><td>删除重复数据</td><td>数据集</td><td>去重数据</td></tr><tr><td>空值处理</td><td>处理空值</td><td>数据集</td><td>填充数据</td></tr><tr><td>格式转换</td><td>转换数据格式</td><td>原格式</td><td>新格式</td></tr><tr><td>类型转换</td><td>转换数据类型</td><td>原类型</td><td>新类型</td></tr></tbody></table><h3 id=文本处理算子>文本处理算子<a class=td-heading-self-link href=#%e6%96%87%e6%9c%ac%e5%a4%84%e7%90%86%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>文本分词</td><td>中文分词</td></tr><tr><td>去除停用词</td><td>删除常见停用词</td></tr><tr><td>文本清洗</td><td>清洗特殊字符</td></tr><tr><td>情感分析</td><td>分析文本情感</td></tr></tbody></table><h3 id=图像处理算子>图像处理算子<a class=td-heading-self-link href=#%e5%9b%be%e5%83%8f%e5%a4%84%e7%90%86%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>格式转换</td><td>转换图像格式</td></tr><tr><td>尺寸调整</td><td>调整图像大小</td></tr><tr><td>质量检测</td><td>检测图像质量</td></tr><tr><td>特征提取</td><td>提取图像特征</td></tr></tbody></table><h3 id=数据增强算子>数据增强算子<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%a2%9e%e5%bc%ba%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>算子</th><th>功能</th></tr></thead><tbody><tr><td>文本增强</td><td>同义词替换、回译</td></tr><tr><td>图像增强</td><td>旋转、裁剪、颜色调整</td></tr><tr><td>数据合成</td><td>基于模型的数据合成</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-浏览算子>1. 浏览算子<a class=td-heading-self-link href=#1-%e6%b5%8f%e8%a7%88%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入算子市场>步骤 1：进入算子市场<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e7%ae%97%e5%ad%90%e5%b8%82%e5%9c%ba aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>数据</strong> → <strong>算子市场</strong>。</p><h4 id=步骤-2浏览算子>步骤 2：浏览算子<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e6%b5%8f%e8%a7%88%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><p>在算子市场页面，可以看到所有可用算子：</p><table><thead><tr><th>算子名称</th><th>类别</th><th>功能描述</th><th>评分</th><th>安装数</th><th>操作</th></tr></thead><tbody><tr><td>文本清洗算子</td><td>文本处理</td><td>清洗文本特殊字符</td><td>⭐⭐⭐⭐⭐</td><td>1.2K</td><td>查看 安装</td></tr><tr><td>图像去重算子</td><td>图像处理</td><td>基于内容去重</td><td>⭐⭐⭐⭐</td><td>856</td><td>查看 安装</td></tr><tr><td>数据合成算子</td><td>数据增强</td><td>使用 LLM 合成数据</td><td>⭐⭐⭐⭐⭐</td><td>2.3K</td><td>查看 安装</td></tr></tbody></table><h4 id=步骤-3查看算子详情>步骤 3：查看算子详情<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e6%9f%a5%e7%9c%8b%e7%ae%97%e5%ad%90%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h4><p>点击算子名称或 <strong>查看</strong> 按钮，可以看到：</p><ul><li><strong>算子简介</strong>：功能和用途</li><li><strong>使用示例</strong>：如何使用算子</li><li><strong>输入输出</strong>：输入输出格式</li><li><strong>参数说明</strong>：可配置参数</li><li><strong>用户评价</strong>：其他用户的评价</li></ul><h3 id=2-安装算子>2. 安装算子<a class=td-heading-self-link href=#2-%e5%ae%89%e8%a3%85%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><h4 id=安装内置算子>安装内置算子<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85%e5%86%85%e7%bd%ae%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><p>内置算子默认已安装，可以直接使用。</p><h4 id=安装第三方算子>安装第三方算子<a class=td-heading-self-link href=#%e5%ae%89%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><ol><li>在算子详情页，点击 <strong>安装</strong> 按钮</li><li>等待安装完成</li><li>安装后可以在数据清洗等模块中使用</li></ol><h3 id=3-使用算子>3. 使用算子<a class=td-heading-self-link href=#3-%e4%bd%bf%e7%94%a8%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p>安装算子后，可以在以下场景使用：</p><h4 id=数据清洗>数据清洗<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97 aria-label="Heading self-link"></a></h4><ol><li>创建数据清洗任务</li><li>在清洗流程中添加算子节点</li><li>配置算子参数</li><li>执行清洗任务</li></ol><h4 id=流水线编排>流水线编排<a class=td-heading-self-link href=#%e6%b5%81%e6%b0%b4%e7%ba%bf%e7%bc%96%e6%8e%92 aria-label="Heading self-link"></a></h4><ol><li>创建流水线</li><li>添加算子节点</li><li>配置算子参数</li><li>执行流水线</li></ol><h3 id=4-开发自定义算子>4. 开发自定义算子<a class=td-heading-self-link href=#4-%e5%bc%80%e5%8f%91%e8%87%aa%e5%ae%9a%e4%b9%89%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><h4 id=创建算子>创建算子<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><ol><li>在算子市场页，点击 <strong>创建算子</strong> 按钮</li><li>填写算子信息：<ul><li><strong>算子名称</strong>：例如 <code>my_text_cleaner</code></li><li><strong>算子类别</strong>：选择类别</li><li><strong>功能描述</strong>：描述算子功能</li><li><strong>版本号</strong>：例如 <code>1.0.0</code></li></ul></li></ol><h4 id=编写算子代码>编写算子代码<a class=td-heading-self-link href=#%e7%bc%96%e5%86%99%e7%ae%97%e5%ad%90%e4%bb%a3%e7%a0%81 aria-label="Heading self-link"></a></h4><p><strong>Python 算子示例</strong>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Any</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>MyTextCleaner</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;自定义文本清洗算子&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>config</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>str</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>]):</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        初始化算子
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        Args:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>            config: 算子配置
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>                - remove_special_chars: 是否去除特殊字符
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>                - to_lowercase: 是否转为小写
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>remove_special_chars</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>config</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;remove_special_chars&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>to_lowercase</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>config</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;to_lowercase&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>process</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        处理数据
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        Args:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>            data: 输入数据
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        Returns:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>            处理后的数据
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>isinstance</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>            <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>data</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>if</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>to_lowercase</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>result</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>lower</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>if</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>remove_special_chars</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic># 去除特殊字符</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>re</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>re</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sub</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>r</span><span style=color:#4e9a06>&#39;[^\w\s]&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>data</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_config_schema</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Dict</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>str</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Any</span><span style=color:#000;font-weight:700>]:</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        获取配置模式
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        Returns:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>            配置模式定义
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;object&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;properties&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;remove_special_chars&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;boolean&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;去除特殊字符&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>True</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;to_lowercase&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;boolean&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;转为小写&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                    <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>True</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=打包算子>打包算子<a class=td-heading-self-link href=#%e6%89%93%e5%8c%85%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><ol><li>创建算子目录结构：</li></ol><pre tabindex=0><code>my_text_cleaner/
├── __init__.py
├── operator.py       # 算子代码
├── config.json       # 配置文件
├── README.md         # 说明文档
└── requirements.txt  # 依赖列表
</code></pre><ol start=2><li>打包为 ZIP 文件</li></ol><h4 id=发布算子>发布算子<a class=td-heading-self-link href=#%e5%8f%91%e5%b8%83%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h4><ol><li>在创建算子页，上传算子包</li><li>填写算子信息</li><li>点击 <strong>发布</strong> 按钮</li></ol><h4 id=发布选项>发布选项<a class=td-heading-self-link href=#%e5%8f%91%e5%b8%83%e9%80%89%e9%a1%b9 aria-label="Heading self-link"></a></h4><ul><li><strong>私有算子</strong>：仅自己可见</li><li><strong>公开算子</strong>：所有人可见</li><li><strong>团队共享</strong>：团队成员可见</li></ul><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=算子版本管理>算子版本管理<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=创建新版本>创建新版本<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e6%96%b0%e7%89%88%e6%9c%ac aria-label="Heading self-link"></a></h4><ol><li>进入算子详情页</li><li>点击 <strong>版本</strong> 标签</li><li>点击 <strong>创建版本</strong></li><li>上传新版本代码</li><li>填写版本说明</li></ol><h4 id=版本回退>版本回退<a class=td-heading-self-link href=#%e7%89%88%e6%9c%ac%e5%9b%9e%e9%80%80 aria-label="Heading self-link"></a></h4><p>如果新版本有问题，可以回退到旧版本。</p><h3 id=算子测试>算子测试<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><h4 id=单元测试>单元测试<a class=td-heading-self-link href=#%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h4><p>为算子编写单元测试：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>unittest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMyTextCleaner</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>unittest</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>TestCase</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>setUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#000>config</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#39;remove_special_chars&#39;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#39;to_lowercase&#39;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>True</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>cleaner</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>MyTextCleaner</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_lowercase</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#000>input_text</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Hello World&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>output</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>cleaner</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>process</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input_text</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>output</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_remove_special_chars</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#000>input_text</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Hello!!! World...&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>output</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>cleaner</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>process</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input_text</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>output</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h4 id=在线测试>在线测试<a class=td-heading-self-link href=#%e5%9c%a8%e7%ba%bf%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h4><p>在算详情页，点击 <strong>测试</strong> 按钮：</p><ol><li>输入测试数据</li><li>配置算子参数</li><li>执行测试</li><li>查看输出结果</li></ol><h3 id=算子权限管理>算子权限管理<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e6%9d%83%e9%99%90%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=权限级别>权限级别<a class=td-heading-self-link href=#%e6%9d%83%e9%99%90%e7%ba%a7%e5%88%ab aria-label="Heading self-link"></a></h4><table><thead><tr><th>级别</th><th>说明</th></tr></thead><tbody><tr><td>私有</td><td>仅创建者可见和使用</td></tr><tr><td>团队</td><td>团队成员可见和使用</td></tr><tr><td>公开</td><td>所有用户可见和使用</td></tr></tbody></table><h4 id=权限设置>权限设置<a class=td-heading-self-link href=#%e6%9d%83%e9%99%90%e8%ae%be%e7%bd%ae aria-label="Heading self-link"></a></h4><ol><li>进入算子详情页</li><li>点击 <strong>设置</strong> 标签</li><li>修改权限级别</li><li>保存设置</li></ol><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-算子设计>1. 算子设计<a class=td-heading-self-link href=#1-%e7%ae%97%e5%ad%90%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h3><p>好的算子设计：</p><ul><li><strong>单一职责</strong>：每个算子只做一件事</li><li><strong>可配置</strong>：提供丰富的配置选项</li><li><strong>错误处理</strong>：完善的错误处理机制</li><li><strong>性能优化</strong>：考虑大数据量场景</li></ul><h3 id=2-文档编写>2. 文档编写<a class=td-heading-self-link href=#2-%e6%96%87%e6%a1%a3%e7%bc%96%e5%86%99 aria-label="Heading self-link"></a></h3><p>完善的文档应该包含：</p><ul><li><strong>功能说明</strong>：清晰描述算子功能</li><li><strong>使用示例</strong>：提供使用示例</li><li><strong>参数说明</strong>：详细说明每个参数</li><li><strong>注意事项</strong>：说明使用注意事项</li></ul><h3 id=3-测试覆盖>3. 测试覆盖<a class=td-heading-self-link href=#3-%e6%b5%8b%e8%af%95%e8%a6%86%e7%9b%96 aria-label="Heading self-link"></a></h3><p>充分的测试：</p><ul><li><strong>单元测试</strong>：测试核心功能</li><li><strong>边界测试</strong>：测试边界情况</li><li><strong>性能测试</strong>：测试大数据量场景</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-算子执行失败怎么办>Q: 算子执行失败怎么办？<a class=td-heading-self-link href=#q-%e7%ae%97%e5%ad%90%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 排查步骤：</p><ol><li><strong>查看日志</strong>：查看详细错误信息</li><li><strong>检查配置</strong>：确认参数配置正确</li><li><strong>检查数据</strong>：确认输入数据格式正确</li><li><strong>本地测试</strong>：在本地环境测试算子</li></ol><h3 id=q-如何优化算子性能>Q: 如何优化算子性能？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e4%bc%98%e5%8c%96%e7%ae%97%e5%ad%90%e6%80%a7%e8%83%bd aria-label="Heading self-link"></a></h3><p>A: 优化建议：</p><ol><li><strong>减少内存使用</strong>：使用生成器、迭代器</li><li><strong>并行处理</strong>：使用多进程/多线程</li><li><strong>批量处理</strong>：批量处理数据</li><li><strong>缓存结果</strong>：缓存重复计算</li></ol><h3 id=q-如何分享算子>Q: 如何分享算子？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%88%86%e4%ba%ab%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p>A: 分享方式：</p><ol><li><strong>公开发布</strong>：发布为公开算子</li><li><strong>团队共享</strong>：团队内共享</li><li><strong>导出分享</strong>：导出算子包文件分享</li></ol><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 使用算子进行数据清洗</li><li><a href=/datamate-docs/docs/user-guide/orchestration/>流水线编排</a> - 在流水线中使用算子</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-b5c0120d3c53b8b9f8998b17f3d9a42e>3.9 - 流水线编排</h1><div class=lead>使用 DataMate 进行可视化流程编排</div><div class="pageinfo pageinfo-primary"><p>流水线编排模块提供拖拽式可视化界面，帮助您设计和管理复杂的数据处理流程。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>流水线编排模块提供：</p><ul><li><strong>可视化设计器</strong>：拖拽式流程设计</li><li><strong>丰富的节点类型</strong>：数据处理、条件判断、循环等</li><li><strong>流程执行</strong>：自动执行和监控流程</li><li><strong>模板管理</strong>：保存和复用流程模板</li><li><strong>版本管理</strong>：流程版本控制</li></ul><h2 id=节点类型>节点类型<a class=td-heading-self-link href=#%e8%8a%82%e7%82%b9%e7%b1%bb%e5%9e%8b aria-label="Heading self-link"></a></h2><h3 id=数据节点>数据节点<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h3><table><thead><tr><th>节点</th><th>功能</th><th>配置</th></tr></thead><tbody><tr><td>输入数据集</td><td>从数据集读取数据</td><td>选择数据集</td></tr><tr><td>输出数据集</td><td>写入数据到数据集</td><td>选择数据集</td></tr><tr><td>数据采集</td><td>执行数据采集任务</td><td>选择采集任务</td></tr><tr><td>数据清洗</td><td>执行数据清洗任务</td><td>选择清洗任务</td></tr><tr><td>数据标注</td><td>执行数据标注任务</td><td>选择标注任务</td></tr><tr><td>数据合成</td><td>执行数据合成任务</td><td>选择合成任务</td></tr><tr><td>数据评估</td><td>执行数据评估任务</td><td>选择评估任务</td></tr></tbody></table><h3 id=逻辑节点>逻辑节点<a class=td-heading-self-link href=#%e9%80%bb%e8%be%91%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h3><table><thead><tr><th>节点</th><th>功能</th><th>配置</th></tr></thead><tbody><tr><td>条件分支</td><td>根据条件执行不同分支</td><td>条件表达式</td></tr><tr><td>循环</td><td>重复执行节点</td><td>循环次数/条件</td></tr><tr><td>并行</td><td>并行执行多个分支</td><td>分支数量</td></tr><tr><td>等待</td><td>等待指定时间</td><td>等待时长</td></tr><tr><td>跳转</td><td>跳转到指定节点</td><td>目标节点</td></tr></tbody></table><h3 id=算子节点>算子节点<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h3><table><thead><tr><th>节点</th><th>功能</th><th>配置</th></tr></thead><tbody><tr><td>清洗算子</td><td>执行单个清洗算子</td><td>算子类型、参数</td></tr><tr><td>合成算子</td><td>执行数据合成</td><td>指令模板、参数</td></tr><tr><td>自定义算子</td><td>执行自定义算子</td><td>算子文件、参数</td></tr></tbody></table><h3 id=集成节点>集成节点<a class=td-heading-self-link href=#%e9%9b%86%e6%88%90%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h3><table><thead><tr><th>节点</th><th>功能</th><th>配置</th></tr></thead><tbody><tr><td>HTTP 请求</td><td>发送 HTTP 请求</td><td>URL、方法、参数</td></tr><tr><td>API 调用</td><td>调用 DataMate API</td><td>API 端点、参数</td></tr><tr><td>消息队列</td><td>发送/接收消息</td><td>队列配置</td></tr><tr><td>Webhook</td><td>触发 Webhook</td><td>Webhook URL</td></tr></tbody></table><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-创建流水线>1. 创建流水线<a class=td-heading-self-link href=#1-%e5%88%9b%e5%bb%ba%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入流水线编排页面>步骤 1：进入流水线编排页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%b5%81%e6%b0%b4%e7%ba%bf%e7%bc%96%e6%8e%92%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在左侧导航栏选择 <strong>流水线编排</strong>。</p><h4 id=步骤-2创建流水线>步骤 2：创建流水线<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e5%88%9b%e5%bb%ba%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>创建流水线</strong> 按钮。</p><h4 id=步骤-3填写基本信息>步骤 3：填写基本信息<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e5%a1%ab%e5%86%99%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h4><ul><li><strong>流水线名称</strong>：例如 <code>data_processing_pipeline</code></li><li><strong>流水线描述</strong>：描述流水线用途（可选）</li><li><strong>标签</strong>：添加标签（可选）</li></ul><h4 id=步骤-4进入流程设计器>步骤 4：进入流程设计器<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e8%bf%9b%e5%85%a5%e6%b5%81%e7%a8%8b%e8%ae%be%e8%ae%a1%e5%99%a8 aria-label="Heading self-link"></a></h4><p>点击 <strong>创建</strong> 后，自动进入流程设计器。</p><h3 id=2-设计流程>2. 设计流程<a class=td-heading-self-link href=#2-%e8%ae%be%e8%ae%a1%e6%b5%81%e7%a8%8b aria-label="Heading self-link"></a></h3><h4 id=步骤-1添加节点>步骤 1：添加节点<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e6%b7%bb%e5%8a%a0%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h4><ol><li>从左侧节点库拖拽节点到画布</li><li>或双击节点库中的节点</li></ol><p>示例流程：</p><pre tabindex=0><code>输入数据集 → 数据清洗 → 条件分支
                              ├── 满足条件 → 数据标注 → 输出数据集
                              └── 不满足条件 → 数据合成 → 输出数据集
</code></pre><h4 id=步骤-2配置节点>步骤 2：配置节点<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e9%85%8d%e7%bd%ae%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h4><p>点击节点，在右侧配置面板填写参数：</p><p><strong>输入数据集节点</strong>：</p><ul><li>选择数据集：<code>raw_data</code></li><li>数据过滤：（可选）</li></ul><p><strong>数据清洗节点</strong>：</p><ul><li>清洗任务：选择已创建的清洗任务</li><li>失败策略：跳过 / 终止</li></ul><p><strong>条件分支节点</strong>：</p><ul><li>条件表达式：<code>{quality_score} > 0.8</code></li></ul><h4 id=步骤-3连接节点>步骤 3：连接节点<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e8%bf%9e%e6%8e%a5%e8%8a%82%e7%82%b9 aria-label="Heading self-link"></a></h4><ol><li>从源节点的输出端口拖拽到目标节点的输入端口</li><li>或选择两个节点后点击连接按钮</li></ol><h4 id=步骤-4保存流程>步骤 4：保存流程<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-4%e4%bf%9d%e5%ad%98%e6%b5%81%e7%a8%8b aria-label="Heading self-link"></a></h4><p>点击右上角 <strong>保存</strong> 按钮保存流程。</p><h3 id=3-执行流水线>3. 执行流水线<a class=td-heading-self-link href=#3-%e6%89%a7%e8%a1%8c%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h3><h4 id=步骤-1进入执行页面>步骤 1：进入执行页面<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-1%e8%bf%9b%e5%85%a5%e6%89%a7%e8%a1%8c%e9%a1%b5%e9%9d%a2 aria-label="Heading self-link"></a></h4><p>在流水线列表页，点击流水线名称进入详情。</p><h4 id=步骤-2执行流水线>步骤 2：执行流水线<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-2%e6%89%a7%e8%a1%8c%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h4><p>点击 <strong>立即执行</strong> 按钮。</p><h4 id=步骤-3监控执行>步骤 3：监控执行<a class=td-heading-self-link href=#%e6%ad%a5%e9%aa%a4-3%e7%9b%91%e6%8e%a7%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h4><p>在执行监控页面可以看到：</p><ul><li><strong>执行状态</strong>：运行中 / 已完成 / 失败</li><li><strong>执行进度</strong>：当前节点、总进度</li><li><strong>节点状态</strong>：每个节点的执行状态</li><li><strong>执行日志</strong>：详细的执行日志</li></ul><p>示例执行状态：</p><pre tabindex=0><code>[✓] 输入数据集 - 已完成 (1000 条记录)
[✓] 数据清洗 - 已完成 (950 条记录)
[→] 条件分支 - 运行中
  [→] 分支 1 (满足条件) - 等待中
  [→] 分支 2 (不满足条件) - 运行中
    [✓] 数据合成 - 已完成 (500 条记录)
    [→] 输出数据集 - 运行中
</code></pre><h3 id=4-管理流水线>4. 管理流水线<a class=td-heading-self-link href=#4-%e7%ae%a1%e7%90%86%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h3><h4 id=查看流水线列表>查看流水线列表<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e6%b5%81%e6%b0%b4%e7%ba%bf%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h4><p>在流水线编排页面，可以看到所有流水线：</p><table><thead><tr><th>流水线名称</th><th>状态</th><th>最后执行时间</th><th>执行次数</th><th>操作</th></tr></thead><tbody><tr><td>数据处理流程</td><td>已启用</td><td>2024-01-15</td><td>15</td><td>执行 编辑</td></tr><tr><td>模型训练流程</td><td>已禁用</td><td>2024-01-14</td><td>8</td><td>执行 编辑</td></tr></tbody></table><h4 id=编辑流水线>编辑流水线<a class=td-heading-self-link href=#%e7%bc%96%e8%be%91%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h4><p>点击 <strong>编辑</strong> 按钮可以修改流程设计。</p><h4 id=启用禁用流水线>启用/禁用流水线<a class=td-heading-self-link href=#%e5%90%af%e7%94%a8%e7%a6%81%e7%94%a8%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h4><p>点击 <strong>启用/禁用</strong> 按钮切换流水线状态。</p><h4 id=删除流水线>删除流水线<a class=td-heading-self-link href=#%e5%88%a0%e9%99%a4%e6%b5%81%e6%b0%b4%e7%ba%bf aria-label="Heading self-link"></a></h4><p>点击 <strong>删除</strong> 按钮删除流水线（需确认）。</p><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=流程模板>流程模板<a class=td-heading-self-link href=#%e6%b5%81%e7%a8%8b%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h3><h4 id=保存为模板>保存为模板<a class=td-heading-self-link href=#%e4%bf%9d%e5%ad%98%e4%b8%ba%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>设计好流程后</li><li>点击 <strong>保存为模板</strong></li><li>输入模板名称和描述</li><li>点击保存</li></ol><h4 id=使用模板>使用模板<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><ol><li>创建流水线时，点击 <strong>使用模板</strong></li><li>从模板列表选择模板</li><li>系统加载模板到设计器</li></ol><h3 id=参数化流程>参数化流程<a class=td-heading-self-link href=#%e5%8f%82%e6%95%b0%e5%8c%96%e6%b5%81%e7%a8%8b aria-label="Heading self-link"></a></h3><p>流程中可以使用参数，实现动态配置：</p><h4 id=定义参数>定义参数<a class=td-heading-self-link href=#%e5%ae%9a%e4%b9%89%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><p>在流水线配置中定义参数：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;parameters&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;input_dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;required&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;输入数据集&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;threshold&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;number&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;default&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0.8</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;质量阈值&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=使用参数>使用参数<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h4><p>在节点配置中使用参数：</p><pre tabindex=0><code>条件表达式：{quality_score} &gt; ${threshold}
</code></pre><h3 id=定时执行>定时执行<a class=td-heading-self-link href=#%e5%ae%9a%e6%97%b6%e6%89%a7%e8%a1%8c aria-label="Heading self-link"></a></h3><p>配置定时执行流水线：</p><ol><li>在流水线详情页，点击 <strong>定时执行</strong></li><li>添加定时规则：<ul><li>Cron 表达式：<code>0 0 2 * * ?</code>（每天凌晨 2 点）</li><li>执行参数：填写参数值</li></ul></li><li>启用定时任务</li></ol><h3 id=事件触发>事件触发<a class=td-heading-self-link href=#%e4%ba%8b%e4%bb%b6%e8%a7%a6%e5%8f%91 aria-label="Heading self-link"></a></h3><p>配置事件触发：</p><ol><li>在流水线详情页，点击 <strong>事件触发</strong></li><li>添加触发事件：<ul><li>数据上传完成</li><li>任务执行完成</li><li>Webhook 触发</li></ul></li><li>配置触发条件</li></ol><h3 id=错误处理>错误处理<a class=td-heading-self-link href=#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=节点级错误处理>节点级错误处理<a class=td-heading-self-link href=#%e8%8a%82%e7%82%b9%e7%ba%a7%e9%94%99%e8%af%af%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h4><p>为每个节点配置失败策略：</p><ul><li><strong>跳过</strong>：跳过失败节点，继续执行</li><li><strong>重试</strong>：自动重试（可配置重试次数）</li><li><strong>终止</strong>：终止整个流程</li></ul><h4 id=流程级错误处理>流程级错误处理<a class=td-heading-self-link href=#%e6%b5%81%e7%a8%8b%e7%ba%a7%e9%94%99%e8%af%af%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h4><p>配置全局错误处理：</p><ul><li><strong>失败通知</strong>：发送通知（邮件、Webhook）</li><li><strong>回滚操作</strong>：执行回滚流程</li><li><strong>记录日志</strong>：详细记录错误信息</li></ul><h3 id=版本管理>版本管理<a class=td-heading-self-link href=#%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><h4 id=创建版本>创建版本<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e7%89%88%e6%9c%ac aria-label="Heading self-link"></a></h4><p>在流水线编辑页，点击 <strong>保存版本</strong>：</p><ul><li>输入版本号：v1.0.0</li><li>输入版本说明</li><li>点击保存</li></ul><h4 id=查看版本历史>查看版本历史<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e7%89%88%e6%9c%ac%e5%8e%86%e5%8f%b2 aria-label="Heading self-link"></a></h4><p>在流水线详情页，点击 <strong>版本历史</strong>：</p><table><thead><tr><th>版本</th><th>创建时间</th><th>创建者</th><th>说明</th><th>操作</th></tr></thead><tbody><tr><td>v1.0.0</td><td>2024-01-15</td><td>admin</td><td>初始版本</td><td>查看 恢复</td></tr><tr><td>v1.1.0</td><td>2024-01-16</td><td>admin</td><td>添加数据清洗</td><td>查看 恢复</td></tr></tbody></table><h4 id=恢复版本>恢复版本<a class=td-heading-self-link href=#%e6%81%a2%e5%a4%8d%e7%89%88%e6%9c%ac aria-label="Heading self-link"></a></h4><p>点击版本的 <strong>恢复</strong> 按钮，将流程恢复到该版本。</p><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-流程设计>1. 流程设计<a class=td-heading-self-link href=#1-%e6%b5%81%e7%a8%8b%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h3><p>推荐的设计原则：</p><ul><li><strong>模块化</strong>：将复杂流程拆分为多个子流程</li><li><strong>可重用</strong>：使用模板和参数化</li><li><strong>可维护</strong>：添加注释和说明</li><li><strong>可测试</strong>：先测试单个节点再组合</li></ul><h3 id=2-性能优化>2. 性能优化<a class=td-heading-self-link href=#2-%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><p>优化流程性能：</p><ul><li><strong>并行执行</strong>：使用并行节点提高效率</li><li><strong>减少数据传输</strong>：尽量在数据所在位置处理</li><li><strong>批量处理</strong>：使用批量操作代替循环</li><li><strong>缓存中间结果</strong>：避免重复计算</li></ul><h3 id=3-错误处理>3. 错误处理<a class=td-heading-self-link href=#3-%e9%94%99%e8%af%af%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h3><p>完善的错误处理：</p><ul><li><strong>设置超时</strong>：为每个节点设置合理的超时时间</li><li><strong>配置重试</strong>：对可能失败的操作配置重试</li><li><strong>记录日志</strong>：详细记录执行日志</li><li><strong>通知机制</strong>：关键节点失败时发送通知</li></ul><h3 id=4-监控和调试>4. 监控和调试<a class=td-heading-self-link href=#4-%e7%9b%91%e6%8e%a7%e5%92%8c%e8%b0%83%e8%af%95 aria-label="Heading self-link"></a></h3><p>有效的监控调试：</p><ul><li><strong>实时监控</strong>：监控流程执行状态</li><li><strong>查看日志</strong>：查看详细的执行日志</li><li><strong>断点调试</strong>：在关键节点设置断点</li><li><strong>数据预览</strong>：预览中间结果</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-流程执行失败怎么办>Q: 流程执行失败怎么办？<a class=td-heading-self-link href=#q-%e6%b5%81%e7%a8%8b%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 排查步骤：</p><ol><li><strong>查看执行日志</strong>：获取详细错误信息</li><li><strong>检查节点配置</strong>：确认节点参数正确</li><li><strong>检查数据</strong>：确认输入数据格式正确</li><li><strong>单独测试</strong>：单独执行问题节点</li><li><strong>检查依赖</strong>：确认依赖服务正常</li></ol><h3 id=q-如何优化流程性能>Q: 如何优化流程性能？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e4%bc%98%e5%8c%96%e6%b5%81%e7%a8%8b%e6%80%a7%e8%83%bd aria-label="Heading self-link"></a></h3><p>A: 优化建议：</p><ol><li><strong>并行化</strong>：使用并行节点并行执行</li><li><strong>批量操作</strong>：合并多个小操作</li><li><strong>减少数据传输</strong>：尽量在本地处理</li><li><strong>缓存结果</strong>：缓存中间结果避免重复计算</li><li><strong>优化节点顺序</strong>：先过滤数据再处理</li></ol><h3 id=q-如何处理复杂的条件逻辑>Q: 如何处理复杂的条件逻辑？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86%e5%a4%8d%e6%9d%82%e7%9a%84%e6%9d%a1%e4%bb%b6%e9%80%bb%e8%be%91 aria-label="Heading self-link"></a></h3><p>A: 处理复杂逻辑：</p><ol><li><strong>使用多个条件节点</strong>：拆分复杂条件</li><li><strong>使用表达式</strong>：编写复杂的条件表达式</li><li><strong>自定义脚本</strong>：使用自定义算子处理复杂逻辑</li><li><strong>子流程</strong>：将复杂逻辑封装为子流程</li></ol><h3 id=q-流程可以嵌套吗>Q: 流程可以嵌套吗？<a class=td-heading-self-link href=#q-%e6%b5%81%e7%a8%8b%e5%8f%af%e4%bb%a5%e5%b5%8c%e5%a5%97%e5%90%97 aria-label="Heading self-link"></a></h3><p>A: 支持流程嵌套：</p><ol><li><strong>子流程节点</strong>：调用其他流程作为子流程</li><li><strong>参数传递</strong>：在父子流程间传递参数</li><li><strong>返回值</strong>：子流程可以返回结果给父流程</li></ol><h3 id=q-如何调试流程>Q: 如何调试流程？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e8%b0%83%e8%af%95%e6%b5%81%e7%a8%8b aria-label="Heading self-link"></a></h3><p>A: 调试方法：</p><ol><li><strong>单步执行</strong>：逐步执行流程观察中间结果</li><li><strong>数据预览</strong>：预览每个节点的输入输出</li><li><strong>日志查看</strong>：查看详细的执行日志</li><li><strong>断点设置</strong>：在关键节点设置断点</li><li><strong>模拟执行</strong>：使用测试数据模拟执行</li></ol><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-collection/>数据采集</a> - 数据采集节点</li><li><a href=/datamate-docs/docs/user-guide/data-cleansing/>数据清洗</a> - 数据清洗节点</li><li><a href=/datamate-docs/docs/user-guide/data-synthesis/>数据合成</a> - 数据合成节点</li><li><a href=/datamate-docs/docs/user-guide/operator-market/>算子市场</a> - 获取更多算子</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-22481a161ee01b17ca5f4dc37b47f854>3.10 - Agent 对话</h1><div class=lead>使用 DataMate Agent 进行智能对话</div><div class="pageinfo pageinfo-primary"><p>Agent 对话模块集成大语言模型，提供智能问答和知识库检索能力。</p></div><h2 id=功能概述>功能概述<a class=td-heading-self-link href=#%e5%8a%9f%e8%83%bd%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>Agent 对话模块提供：</p><ul><li><strong>智能对话</strong>：基于大模型的自然语言对话</li><li><strong>知识库问答</strong>：集成 RAG 的知识库问答</li><li><strong>多轮对话</strong>：支持上下文的多轮对话</li><li><strong>对话管理</strong>：对话历史和管理</li><li><strong>快捷指令</strong>：常用操作的快捷指令</li></ul><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-访问-agent>1. 访问 Agent<a class=td-heading-self-link href=#1-%e8%ae%bf%e9%97%ae-agent aria-label="Heading self-link"></a></h3><p>在左侧导航栏选择 <strong>Agent 对话</strong>，或直接访问：</p><ul><li><strong>本地部署</strong>：http://localhost:30000/chat</li><li><strong>生产环境</strong>：https://your-domain/chat</li></ul><h3 id=2-开始对话>2. 开始对话<a class=td-heading-self-link href=#2-%e5%bc%80%e5%a7%8b%e5%af%b9%e8%af%9d aria-label="Heading self-link"></a></h3><p>在对话框中输入问题，例如：</p><pre tabindex=0><code>用户：DataMate 支持哪些数据格式？

助手：DataMate 支持多种数据格式：

图像：JPG、PNG、GIF、BMP、WebP
文本：TXT、MD、JSON、CSV
音频：MP3、WAV、FLAC、AAC
视频：MP4、AVI、MOV、MKV

这些格式可以在数据管理模块中上传和管理。
</code></pre><h3 id=3-使用知识库问答>3. 使用知识库问答<a class=td-heading-self-link href=#3-%e4%bd%bf%e7%94%a8%e7%9f%a5%e8%af%86%e5%ba%93%e9%97%ae%e7%ad%94 aria-label="Heading self-link"></a></h3><h4 id=启用知识库>启用知识库<a class=td-heading-self-link href=#%e5%90%af%e7%94%a8%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h4><ol><li>点击 <strong>设置</strong> 按钮</li><li>在 <strong>知识库</strong> 设置中，选择要使用的知识库</li><li>保存设置</li></ol><h4 id=进行知识库问答>进行知识库问答<a class=td-heading-self-link href=#%e8%bf%9b%e8%a1%8c%e7%9f%a5%e8%af%86%e5%ba%93%e9%97%ae%e7%ad%94 aria-label="Heading self-link"></a></h4><pre tabindex=0><code>用户：如何创建数据清洗任务？

助手：根据知识库文档，创建数据清洗任务步骤如下：

1. 进入数据清洗页面（数据 → 数据清洗）
2. 点击创建任务按钮
3. 配置基本信息（任务名称、源数据集、输出数据集）
4. 配置清洗流程（拖拽算子到画布）
5. 配置执行参数
6. 创建并执行任务

详细的配置说明请参考用户指南。

[来源：user_guide.md, data_cleansing.md]
</code></pre><h2 id=高级功能>高级功能<a class=td-heading-self-link href=#%e9%ab%98%e7%ba%a7%e5%8a%9f%e8%83%bd aria-label="Heading self-link"></a></h2><h3 id=对话模式>对话模式<a class=td-heading-self-link href=#%e5%af%b9%e8%af%9d%e6%a8%a1%e5%bc%8f aria-label="Heading self-link"></a></h3><h4 id=通用对话>通用对话<a class=td-heading-self-link href=#%e9%80%9a%e7%94%a8%e5%af%b9%e8%af%9d aria-label="Heading self-link"></a></h4><p>使用大模型进行通用对话，不使用知识库：</p><ul><li>适合：闲聊、常识性问题、创意任务</li><li>模型：GPT-4、Claude 3、文心一言等</li></ul><h4 id=知识库问答>知识库问答<a class=td-heading-self-link href=#%e7%9f%a5%e8%af%86%e5%ba%93%e9%97%ae%e7%ad%94 aria-label="Heading self-link"></a></h4><p>基于知识库内容回答问题：</p><ul><li>适合：产品文档、技术文档、企业知识</li><li>特点：答案基于知识库，标注来源</li></ul><h4 id=混合模式>混合模式<a class=td-heading-self-link href=#%e6%b7%b7%e5%90%88%e6%a8%a1%e5%bc%8f aria-label="Heading self-link"></a></h4><p>结合通用对话和知识库问答：</p><ul><li>先检索知识库</li><li>如果知识库中没有相关信息，使用通用对话</li></ul><h3 id=快捷指令>快捷指令<a class=td-heading-self-link href=#%e5%bf%ab%e6%8d%b7%e6%8c%87%e4%bb%a4 aria-label="Heading self-link"></a></h3><p>使用快捷指令快速执行操作：</p><table><thead><tr><th>指令</th><th>功能</th><th>示例</th></tr></thead><tbody><tr><td><code>/dataset</code></td><td>查询数据集</td><td><code>/dataset list</code></td></tr><tr><td><code>/task</code></td><td>查询任务</td><td><code>/task status</code></td></tr><tr><td><code>/help</code></td><td>显示帮助</td><td><code>/help</code></td></tr><tr><td><code>/clear</code></td><td>清空对话</td><td><code>/clear</code></td></tr></tbody></table><h3 id=对话历史>对话历史<a class=td-heading-self-link href=#%e5%af%b9%e8%af%9d%e5%8e%86%e5%8f%b2 aria-label="Heading self-link"></a></h3><h4 id=查看历史>查看历史<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e5%8e%86%e5%8f%b2 aria-label="Heading self-link"></a></h4><ol><li>点击左侧 <strong>历史记录</strong> 标签</li><li>选择历史对话</li><li>查看对话内容</li></ol><h4 id=继续对话>继续对话<a class=td-heading-self-link href=#%e7%bb%a7%e7%bb%ad%e5%af%b9%e8%af%9d aria-label="Heading self-link"></a></h4><p>点击历史对话可以继续之前的对话。</p><h4 id=导出对话>导出对话<a class=td-heading-self-link href=#%e5%af%bc%e5%87%ba%e5%af%b9%e8%af%9d aria-label="Heading self-link"></a></h4><p>导出对话记录：</p><ul><li><strong>Markdown</strong>：导出为 Markdown 文件</li><li><strong>JSON</strong>：导出为 JSON 格式</li><li><strong>PDF</strong>：导出为 PDF 文件</li></ul><h3 id=提示词模板>提示词模板<a class=td-heading-self-link href=#%e6%8f%90%e7%a4%ba%e8%af%8d%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h3><p>创建提示词模板用于特定场景：</p><h4 id=技术支持模板>技术支持模板<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%94%af%e6%8c%81%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><pre tabindex=0><code>你是一个专业的技术支持助手。请基于 DataMate 知识库回答用户问题。

要求：
1. 只基于知识库内容回答
2. 如果知识库中没有相关信息，明确告知用户
3. 回答要准确、详细
4. 提供操作步骤时，要清晰明了
5. 标注信息来源

用户问题：{question}

知识库内容：
{context}

请回答：
</code></pre><h4 id=数据分析模板>数据分析模板<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%88%86%e6%9e%90%e6%a8%a1%e6%9d%bf aria-label="Heading self-link"></a></h4><pre tabindex=0><code>你是一个数据分析专家。请分析以下数据并提供洞察。

数据：
{data}

分析要求：
1. 数据概览
2. 关键发现
3. 趋势分析
4. 建议和结论

请提供分析报告：
</code></pre><h2 id=最佳实践>最佳实践<a class=td-heading-self-link href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="Heading self-link"></a></h2><h3 id=1-有效的提问>1. 有效的提问<a class=td-heading-self-link href=#1-%e6%9c%89%e6%95%88%e7%9a%84%e6%8f%90%e9%97%ae aria-label="Heading self-link"></a></h3><p>获得更好的回答：</p><ul><li><strong>明确具体</strong>：问题描述要清晰明确</li><li><strong>提供上下文</strong>：提供相关的背景信息</li><li><strong>分步骤提问</strong>：复杂问题拆分为多个小问题</li></ul><p>好的提问示例：</p><pre tabindex=0><code>❌ 怎么用 DataMate？
✅ 如何在 DataMate 中创建一个数据清洗任务，清洗包含空值和重复值的 CSV 文件？
</code></pre><h3 id=2-知识库使用>2. 知识库使用<a class=td-heading-self-link href=#2-%e7%9f%a5%e8%af%86%e5%ba%93%e4%bd%bf%e7%94%a8 aria-label="Heading self-link"></a></h3><p>充分利用知识库：</p><ul><li><strong>选择合适知识库</strong>：根据问题选择对应的知识库</li><li><strong>查看来源</strong>：查看答案来源文档</li><li><strong>验证信息</strong>：重要信息要验证来源文档</li></ul><h3 id=3-对话管理>3. 对话管理<a class=td-heading-self-link href=#3-%e5%af%b9%e8%af%9d%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><p>管理对话历史：</p><ul><li><strong>定期清理</strong>：删除不需要的对话历史</li><li><strong>重要对话</strong>：导出保存重要对话</li><li><strong>使用标题</strong>：为对话添加描述性标题</li></ul><h2 id=常见问题>常见问题<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=q-agent-回答不准确怎么办>Q: Agent 回答不准确怎么办？<a class=td-heading-self-link href=#q-agent-%e5%9b%9e%e7%ad%94%e4%b8%8d%e5%87%86%e7%a1%ae%e6%80%8e%e4%b9%88%e5%8a%9e aria-label="Heading self-link"></a></h3><p>A: 改进建议：</p><ol><li><strong>优化提问</strong>：更明确、更具体的问题</li><li><strong>检查知识库</strong>：确认知识库中有相关信息</li><li><strong>更换模型</strong>：尝试使用更强大的模型</li><li><strong>提供上下文</strong>：提供更多背景信息</li><li><strong>分步提问</strong>：将复杂问题拆分</li></ol><h3 id=q-agent-不回答我的问题>Q: Agent 不回答我的问题？<a class=td-heading-self-link href=#q-agent-%e4%b8%8d%e5%9b%9e%e7%ad%94%e6%88%91%e7%9a%84%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h3><p>A: 可能原因：</p><ol><li><strong>知识库中没有</strong>：检查知识库是否有相关内容</li><li><strong>问题不明确</strong>：重新表述问题</li><li><strong>知识库未启用</strong>：检查知识库设置</li><li><strong>模型限制</strong>：某些模型可能有内容限制</li></ol><h3 id=q-如何切换知识库>Q: 如何切换知识库？<a class=td-heading-self-link href=#q-%e5%a6%82%e4%bd%95%e5%88%87%e6%8d%a2%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="Heading self-link"></a></h3><p>A: 切换步骤：</p><ol><li>点击 <strong>设置</strong> 按钮</li><li>在知识库设置中，选择其他知识库</li><li>保存设置</li><li>开始新的对话</li></ol><h3 id=q-对话历史保存在哪里>Q: 对话历史保存在哪里？<a class=td-heading-self-link href=#q-%e5%af%b9%e8%af%9d%e5%8e%86%e5%8f%b2%e4%bf%9d%e5%ad%98%e5%9c%a8%e5%93%aa%e9%87%8c aria-label="Heading self-link"></a></h3><p>A: 存储位置：</p><ul><li><strong>本地存储</strong>：存储在浏览器本地</li><li><strong>云端存储</strong>：（可选）存储在服务器</li><li><strong>导出保存</strong>：导出为文件保存</li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/knowledge-base/>知识库管理</a> - 创建和管理知识库</li><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 管理知识库文档</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-b5568d681972077a2a3f45e40a59d61a>4 - API 参考</h1><div class=lead>DataMate API 文档</div><div class="pageinfo pageinfo-primary"><p>DataMate 提供完整的 REST API，支持所有核心功能的编程访问。</p></div><h2 id=api-概述>API 概述<a class=td-heading-self-link href=#api-%e6%a6%82%e8%bf%b0 aria-label="Heading self-link"></a></h2><p>DataMate API 基于 REST 架构设计，提供以下服务：</p><ul><li><strong>数据管理 API</strong>：数据集和文件管理</li><li><strong>数据清洗 API</strong>：数据清洗任务管理</li><li><strong>数据采集 API</strong>：数据采集任务管理</li><li><strong>数据标注 API</strong>：数据标注任务管理</li><li><strong>数据合成 API</strong>：数据合成任务管理</li><li><strong>数据评估 API</strong>：数据评估任务管理</li><li><strong>算子市场 API</strong>：算子管理</li><li><strong>RAG 索引 API</strong>：知识库和向量检索</li><li><strong>流水线编排 API</strong>：流程编排管理</li></ul><h2 id=认证方式>认证方式<a class=td-heading-self-link href=#%e8%ae%a4%e8%af%81%e6%96%b9%e5%bc%8f aria-label="Heading self-link"></a></h2><p>DataMate 支持两种认证方式：</p><h3 id=jwt-认证推荐>JWT 认证（推荐）<a class=td-heading-self-link href=#jwt-%e8%ae%a4%e8%af%81%e6%8e%a8%e8%8d%90 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /api/v1/data-management/datasets
</span></span></span><span style=display:flex><span><span style=color:#a40000>Authorization: Bearer &lt;your-jwt-token&gt;
</span></span></span></code></pre></div><p>获取 JWT Token：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /api/v1/auth/login
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;username&#34;: &#34;admin&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;password&#34;: &#34;password&#34;
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><p>响应：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;token&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;expiresIn&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>86400</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=api-key-认证>API Key 认证<a class=td-heading-self-link href=#api-key-%e8%ae%a4%e8%af%81 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /api/v1/data-management/datasets
</span></span></span><span style=display:flex><span><span style=color:#a40000>X-API-Key: &lt;your-api-key&gt;
</span></span></span></code></pre></div><h2 id=通用响应格式>通用响应格式<a class=td-heading-self-link href=#%e9%80%9a%e7%94%a8%e5%93%8d%e5%ba%94%e6%a0%bc%e5%bc%8f aria-label="Heading self-link"></a></h2><h3 id=成功响应>成功响应<a class=td-heading-self-link href=#%e6%88%90%e5%8a%9f%e5%93%8d%e5%ba%94 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>200</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;success&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;data&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// 响应数据
</span></span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=错误响应>错误响应<a class=td-heading-self-link href=#%e9%94%99%e8%af%af%e5%93%8d%e5%ba%94 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>400</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Bad Request&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;error&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Invalid parameter: datasetId&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:30:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/api/v1/data-management/datasets&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=分页响应>分页响应<a class=td-heading-self-link href=#%e5%88%86%e9%a1%b5%e5%93%8d%e5%ba%94 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;page&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;size&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalElements&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalPages&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;first&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;last&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=api-端点>API 端点<a class=td-heading-self-link href=#api-%e7%ab%af%e7%82%b9 aria-label="Heading self-link"></a></h2><h3 id=数据管理>数据管理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/data-management/datasets</code></td><td>GET</td><td>获取数据集列表</td></tr><tr><td><code>/data-management/datasets</code></td><td>POST</td><td>创建数据集</td></tr><tr><td><code>/data-management/datasets/{id}</code></td><td>GET</td><td>获取数据集详情</td></tr><tr><td><code>/data-management/datasets/{id}</code></td><td>PUT</td><td>更新数据集</td></tr><tr><td><code>/data-management/datasets/{id}</code></td><td>DELETE</td><td>删除数据集</td></tr><tr><td><code>/data-management/datasets/{id}/files</code></td><td>GET</td><td>获取文件列表</td></tr><tr><td><code>/data-management/datasets/{id}/files/upload</code></td><td>POST</td><td>上传文件</td></tr></tbody></table><p>详细文档：<a href=/datamate-docs/docs/api-reference/data-management/>数据管理 API</a></p><h3 id=数据清洗>数据清洗<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97 aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/data-cleaning/tasks</code></td><td>GET</td><td>获取清洗任务列表</td></tr><tr><td><code>/data-cleaning/tasks</code></td><td>POST</td><td>创建清洗任务</td></tr><tr><td><code>/data-cleaning/tasks/{id}</code></td><td>GET</td><td>获取任务详情</td></tr><tr><td><code>/data-cleaning/tasks/{id}</code></td><td>PUT</td><td>更新任务</td></tr><tr><td><code>/data-cleaning/tasks/{id}</code></td><td>DELETE</td><td>删除任务</td></tr><tr><td><code>/data-cleaning/tasks/{id}/execute</code></td><td>POST</td><td>执行任务</td></tr></tbody></table><p>详细文档：<a href=/docs/api-reference/data-cleaning/>数据清洗 API</a></p><h3 id=数据采集>数据采集<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%87%87%e9%9b%86 aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/data-collection/tasks</code></td><td>GET</td><td>获取采集任务列表</td></tr><tr><td><code>/data-collection/tasks</code></td><td>POST</td><td>创建采集任务</td></tr><tr><td><code>/data-collection/tasks/{id}</code></td><td>GET</td><td>获取任务详情</td></tr><tr><td><code>/data-collection/tasks/{id}/execute</code></td><td>POST</td><td>执行采集任务</td></tr></tbody></table><p>详细文档：<a href=/docs/api-reference/data-collection/>数据采集 API</a></p><h3 id=数据合成>数据合成<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%90%88%e6%88%90 aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/data-synthesis/tasks</code></td><td>GET</td><td>获取合成任务列表</td></tr><tr><td><code>/data-synthesis/tasks</code></td><td>POST</td><td>创建合成任务</td></tr><tr><td><code>/data-synthesis/templates</code></td><td>GET</td><td>获取指令模板列表</td></tr><tr><td><code>/data-synthesis/templates</code></td><td>POST</td><td>创建指令模板</td></tr></tbody></table><p>详细文档：<a href=/docs/api-reference/data-synthesis/>数据合成 API</a></p><h3 id=算子市场>算子市场<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e5%b8%82%e5%9c%ba aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/operator-market/operators</code></td><td>GET</td><td>获取算子列表</td></tr><tr><td><code>/operator-market/operators</code></td><td>POST</td><td>发布算子</td></tr><tr><td><code>/operator-market/operators/{id}</code></td><td>GET</td><td>获取算子详情</td></tr><tr><td><code>/operator-market/operators/{id}/install</code></td><td>POST</td><td>安装算子</td></tr></tbody></table><p>详细文档：<a href=/docs/api-reference/operator-market/>算子市场 API</a></p><h3 id=rag-索引>RAG 索引<a class=td-heading-self-link href=#rag-%e7%b4%a2%e5%bc%95 aria-label="Heading self-link"></a></h3><table><thead><tr><th>端点</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>/rag/knowledge-bases</code></td><td>GET</td><td>获取知识库列表</td></tr><tr><td><code>/rag/knowledge-bases</code></td><td>POST</td><td>创建知识库</td></tr><tr><td><code>/rag/knowledge-bases/{id}/documents</code></td><td>POST</td><td>上传文档</td></tr><tr><td><code>/rag/knowledge-bases/{id}/search</code></td><td>POST</td><td>向量检索</td></tr></tbody></table><p>详细文档：<a href=/docs/api-reference/rag-indexer/>RAG 索引 API</a></p><h2 id=sdk-和客户端>SDK 和客户端<a class=td-heading-self-link href=#sdk-%e5%92%8c%e5%ae%a2%e6%88%b7%e7%ab%af aria-label="Heading self-link"></a></h2><p>DataMate 提供多种语言的 SDK：</p><h3 id=python-sdk>Python SDK<a class=td-heading-self-link href=#python-sdk aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>datamate</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>DataMateClient</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 初始化客户端</span>
</span></span><span style=display:flex><span><span style=color:#000>client</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>DataMateClient</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>base_url</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;http://localhost:8080&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>api_key</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;your-api-key&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 获取数据集列表</span>
</span></span><span style=display:flex><span><span style=color:#000>datasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_datasets</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 创建数据集</span>
</span></span><span style=display:flex><span><span style=color:#000>dataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>create_dataset</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;my_dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>description</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;My dataset&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 上传文件</span>
</span></span><span style=display:flex><span><span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>upload_file</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>dataset_id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>file_path</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;/path/to/file.txt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=javascript-sdk>JavaScript SDK<a class=td-heading-self-link href=#javascript-sdk aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>DataMateClient</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#39;@datamate/sdk&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 初始化客户端
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>client</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DataMateClient</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>baseURL</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;http://localhost:8080&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>apiKey</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;your-api-key&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 获取数据集列表
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>datasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getDatasets</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 创建数据集
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>dataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>createDataset</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;my_dataset&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>description</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;My dataset&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 上传文件
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>uploadFile</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000>dataset</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#39;/path/to/file.txt&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=错误码>错误码<a class=td-heading-self-link href=#%e9%94%99%e8%af%af%e7%a0%81 aria-label="Heading self-link"></a></h2><table><thead><tr><th>错误码</th><th>说明</th></tr></thead><tbody><tr><td>200</td><td>成功</td></tr><tr><td>201</td><td>创建成功</td></tr><tr><td>400</td><td>请求参数错误</td></tr><tr><td>401</td><td>未认证</td></tr><tr><td>403</td><td>无权限</td></tr><tr><td>404</td><td>资源不存在</td></tr><tr><td>409</td><td>资源冲突</td></tr><tr><td>500</td><td>服务器内部错误</td></tr></tbody></table><h2 id=速率限制>速率限制<a class=td-heading-self-link href=#%e9%80%9f%e7%8e%87%e9%99%90%e5%88%b6 aria-label="Heading self-link"></a></h2><p>API 调用速率限制：</p><ul><li><strong>默认限制</strong>：1000 次/小时</li><li><strong>突发限制</strong>：100 次/分钟</li></ul><p>超过限制返回 <code>429 Too Many Requests</code>。</p><p>响应头包含速率限制信息：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>X-RateLimit-Limit: 1000
</span></span></span><span style=display:flex><span><span style=color:#a40000>X-RateLimit-Remaining: 999
</span></span></span><span style=display:flex><span><span style=color:#a40000>X-RateLimit-Reset: 1642252800
</span></span></span></code></pre></div><h2 id=版本管理>版本管理<a class=td-heading-self-link href=#%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><p>API 版本通过 URL 路径指定：</p><ul><li>当前版本：<code>/api/v1/</code></li><li>未来版本：<code>/api/v2/</code></li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/developer-guide/>开发者指南</a> - 架构和开发指南</li><li><a href=https://github.com/ModelEngine-Group/DataMate/tree/main/backend/openapi/specs>OpenAPI 规范</a> - 完整的 OpenAPI 规范</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-0cadcf42d67715228dd8742bd09bda93>4.1 - 数据管理 API</h1><div class=lead>数据集和文件管理 API</div><div class="pageinfo pageinfo-primary"><p>数据管理 API 提供数据集和文件的创建、查询、更新和删除功能。</p></div><h2 id=基础信息>基础信息<a class=td-heading-self-link href=#%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h2><ul><li><strong>Base URL</strong>: <code>http://localhost:8092/api/v1/data-management</code></li><li><strong>认证方式</strong>: JWT / API Key</li><li><strong>Content-Type</strong>: <code>application/json</code></li></ul><h2 id=数据集管理>数据集管理<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=获取数据集列表>获取数据集列表<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e9%9b%86%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets?page=0&amp;size=20&amp;type=text&amp;status=ACTIVE
</span></span></span></code></pre></div><p><strong>查询参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>page</td><td>integer</td><td>否</td><td>页码，从 0 开始，默认 0</td></tr><tr><td>size</td><td>integer</td><td>否</td><td>每页大小，默认 20</td></tr><tr><td>type</td><td>string</td><td>否</td><td>数据集类型过滤</td></tr><tr><td>tags</td><td>string</td><td>否</td><td>标签过滤，逗号分隔</td></tr><tr><td>keyword</td><td>string</td><td>否</td><td>关键词搜索</td></tr><tr><td>status</td><td>string</td><td>否</td><td>状态过滤</td></tr></tbody></table><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dataset-001&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text_dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;文本数据集&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;TEXT&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;文本&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;supportedFormats&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;txt&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;md&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;json&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ACTIVE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;tags&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;tag-001&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;training&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;#FF0000&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;fileCount&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;totalSize&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1073741824</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;completionRate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>85.5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;createdAt&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:00:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;createdBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;admin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;page&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;size&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalElements&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalPages&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;first&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;last&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=创建数据集>创建数据集<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /data-management/datasets
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;name&#34;: &#34;my_dataset&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;description&#34;: &#34;My dataset description&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;type&#34;: &#34;TEXT&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;tags&#34;: [&#34;training&#34;, &#34;nlp&#34;],
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;dataSource&#34;: &#34;/data/input&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;targetLocation&#34;: &#34;/data/output&#34;
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><p><strong>请求体参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>是</td><td>数据集名称，1-100 字符</td></tr><tr><td>description</td><td>string</td><td>否</td><td>数据集描述，最多 500 字符</td></tr><tr><td>type</td><td>string</td><td>是</td><td>数据集类型代码</td></tr><tr><td>tags</td><td>array</td><td>否</td><td>标签列表</td></tr><tr><td>dataSource</td><td>string</td><td>否</td><td>数据源</td></tr><tr><td>targetLocation</td><td>string</td><td>否</td><td>目标位置</td></tr></tbody></table><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dataset-002&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;my_dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;My dataset description&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;TEXT&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;文本&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ACTIVE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;tags&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fileCount&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalSize&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completionRate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;createdAt&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T11:00:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;createdBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;admin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=获取数据集详情>获取数据集详情<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e9%9b%86%e8%af%a6%e6%83%85 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets/{datasetId}
</span></span></span></code></pre></div><p><strong>路径参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>datasetId</td><td>string</td><td>是</td><td>数据集 ID</td></tr></tbody></table><p><strong>响应</strong>: 同创建数据集响应</p><h3 id=更新数据集>更新数据集<a class=td-heading-self-link href=#%e6%9b%b4%e6%96%b0%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>PUT /data-management/datasets/{datasetId}
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;name&#34;: &#34;updated_dataset&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;description&#34;: &#34;Updated description&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;tags&#34;: [&#34;training&#34;, &#34;updated&#34;]
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><p><strong>请求体参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>否</td><td>数据集名称</td></tr><tr><td>description</td><td>string</td><td>否</td><td>数据集描述</td></tr><tr><td>tags</td><td>array</td><td>否</td><td>标签列表</td></tr><tr><td>status</td><td>string</td><td>否</td><td>数据集状态</td></tr></tbody></table><h3 id=删除数据集>删除数据集<a class=td-heading-self-link href=#%e5%88%a0%e9%99%a4%e6%95%b0%e6%8d%ae%e9%9b%86 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>DELETE /data-management/datasets/{datasetId}
</span></span></span></code></pre></div><p><strong>响应</strong>: 204 No Content</p><h2 id=文件管理>文件管理<a class=td-heading-self-link href=#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=获取文件列表>获取文件列表<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets/{datasetId}/files?page=0&amp;size=20
</span></span></span></code></pre></div><p><strong>查询参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>page</td><td>integer</td><td>否</td><td>页码，从 0 开始</td></tr><tr><td>size</td><td>integer</td><td>否</td><td>每页大小</td></tr><tr><td>fileType</td><td>string</td><td>否</td><td>文件类型过滤</td></tr><tr><td>status</td><td>string</td><td>否</td><td>状态过滤</td></tr></tbody></table><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;content&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;file-001&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;fileName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;document.txt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;originalName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;document.txt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;fileType&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;txt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;fileSize&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1024</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;COMPLETED&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;filePath&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/dataset-001/document.txt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;uploadTime&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:30:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;uploadedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;admin&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;page&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;size&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalElements&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalPages&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=上传文件预上传>上传文件（预上传）<a class=td-heading-self-link href=#%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6%e9%a2%84%e4%b8%8a%e4%bc%a0 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /data-management/datasets/{datasetId}/files/upload/pre-upload
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;hasArchive&#34;: false,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;totalFileNum&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;totalSize&#34;: 1024,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;prefix&#34;: &#34;documents/&#34;
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><p><strong>请求体参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>hasArchive</td><td>boolean</td><td>否</td><td>是否为压缩包</td></tr><tr><td>totalFileNum</td><td>integer</td><td>是</td><td>总文件数</td></tr><tr><td>totalSize</td><td>integer</td><td>是</td><td>总文件大小（字节）</td></tr><tr><td>prefix</td><td>string</td><td>否</td><td>目标子目录前缀</td></tr></tbody></table><p><strong>响应</strong>: 请求 ID (string)</p><h3 id=上传文件分片上传>上传文件（分片上传）<a class=td-heading-self-link href=#%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6%e5%88%86%e7%89%87%e4%b8%8a%e4%bc%a0 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /data-management/datasets/{datasetId}/files/upload/chunk
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: multipart/form-data
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>reqId: &lt;pre-upload-request-id&gt;
</span></span></span><span style=display:flex><span><span style=color:#a40000>fileNo: 1
</span></span></span><span style=display:flex><span><span style=color:#a40000>fileName: document.txt
</span></span></span><span style=display:flex><span><span style=color:#a40000>totalChunkNum: 3
</span></span></span><span style=display:flex><span><span style=color:#a40000>chunkNo: 1
</span></span></span><span style=display:flex><span><span style=color:#a40000>file: &lt;binary-data&gt;
</span></span></span><span style=display:flex><span><span style=color:#a40000>checkSumHex: &lt;checksum&gt;
</span></span></span></code></pre></div><p><strong>表单参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>reqId</td><td>string</td><td>是</td><td>预上传请求 ID</td></tr><tr><td>fileNo</td><td>integer</td><td>是</td><td>文件编号</td></tr><tr><td>fileName</td><td>string</td><td>是</td><td>文件名</td></tr><tr><td>totalChunkNum</td><td>integer</td><td>是</td><td>总分片数</td></tr><tr><td>chunkNo</td><td>integer</td><td>是</td><td>当前分片编号（从 1 开始）</td></tr><tr><td>file</td><td>file</td><td>是</td><td>分片二进制数据</td></tr><tr><td>checkSumHex</td><td>string</td><td>否</td><td>分片校验和</td></tr></tbody></table><h3 id=下载文件>下载文件<a class=td-heading-self-link href=#%e4%b8%8b%e8%bd%bd%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets/{datasetId}/files/{fileId}/download
</span></span></span></code></pre></div><p><strong>响应</strong>: 文件二进制内容</p><h3 id=批量下载文件zip>批量下载文件（ZIP）<a class=td-heading-self-link href=#%e6%89%b9%e9%87%8f%e4%b8%8b%e8%bd%bd%e6%96%87%e4%bb%b6zip aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets/{datasetId}/files/download
</span></span></span></code></pre></div><p><strong>响应</strong>: ZIP 压缩包</p><h3 id=删除文件>删除文件<a class=td-heading-self-link href=#%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>DELETE /data-management/datasets/{datasetId}/files/{fileId}
</span></span></span></code></pre></div><p><strong>响应</strong>: 204 No Content</p><h3 id=创建目录>创建目录<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e7%9b%ae%e5%bd%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /data-management/datasets/{datasetId}/files/directories
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;parentPrefix&#34;: &#34;documents/&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;directoryName&#34;: &#34;subfolder&#34;
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><h2 id=数据集类型>数据集类型<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e7%b1%bb%e5%9e%8b aria-label="Heading self-link"></a></h2><h3 id=获取数据集类型列表>获取数据集类型列表<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e9%9b%86%e7%b1%bb%e5%9e%8b%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/dataset-types
</span></span></span></code></pre></div><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;TEXT&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;文本&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;文本数据集&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;supportedFormats&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;txt&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;md&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;json&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;csv&#34;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;file-text&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;IMAGE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;图像&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;图像数据集&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;supportedFormats&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;jpg&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;png&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;gif&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;bmp&#34;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;file-image&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h2 id=标签管理>标签管理<a class=td-heading-self-link href=#%e6%a0%87%e7%ad%be%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=获取标签列表>获取标签列表<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%a0%87%e7%ad%be%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/tags?keyword=training
</span></span></span></code></pre></div><p><strong>查询参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>keyword</td><td>string</td><td>否</td><td>标签名称关键词</td></tr></tbody></table><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;tag-001&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;training&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;#FF0000&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;训练数据&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;usageCount&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>15</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h3 id=创建标签>创建标签<a class=td-heading-self-link href=#%e5%88%9b%e5%bb%ba%e6%a0%87%e7%ad%be aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>POST /data-management/tags
</span></span></span><span style=display:flex><span><span style=color:#a40000>Content-Type: application/json
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>{
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;name&#34;: &#34;validation&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;color&#34;: &#34;#00FF00&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a40000>  &#34;description&#34;: &#34;验证数据&#34;
</span></span></span><span style=display:flex><span><span style=color:#a40000>}
</span></span></span></code></pre></div><p><strong>请求体参数</strong>:</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>是</td><td>标签名称，1-50 字符</td></tr><tr><td>color</td><td>string</td><td>否</td><td>标签颜色，十六进制</td></tr><tr><td>description</td><td>string</td><td>否</td><td>标签描述，最多 200 字符</td></tr></tbody></table><h2 id=统计信息>统计信息<a class=td-heading-self-link href=#%e7%bb%9f%e8%ae%a1%e4%bf%a1%e6%81%af aria-label="Heading self-link"></a></h2><h3 id=获取数据集统计>获取数据集统计<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e9%9b%86%e7%bb%9f%e8%ae%a1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a40000>GET /data-management/datasets/{datasetId}/statistics
</span></span></span></code></pre></div><p><strong>响应示例</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalFiles&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completedFiles&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>850</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;totalSize&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1073741824</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completionRate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>85.0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fileTypeDistribution&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;txt&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;md&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>250</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;json&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>150</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;statusDistribution&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;COMPLETED&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>850</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;PROCESSING&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;ERROR&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>50</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=错误响应>错误响应<a class=td-heading-self-link href=#%e9%94%99%e8%af%af%e5%93%8d%e5%ba%94 aria-label="Heading self-link"></a></h2><h3 id=400-bad-request>400 Bad Request<a class=td-heading-self-link href=#400-bad-request aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;error&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;INVALID_PARAMETER&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Invalid parameter: datasetId&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:30:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/api/v1/data-management/datasets&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=404-not-found>404 Not Found<a class=td-heading-self-link href=#404-not-found aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;error&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;DATASET_NOT_FOUND&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Dataset not found: dataset-001&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2024-01-15T10:30:00Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/api/v1/data-management/datasets/dataset-001&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=sdk-使用示例>SDK 使用示例<a class=td-heading-self-link href=#sdk-%e4%bd%bf%e7%94%a8%e7%a4%ba%e4%be%8b aria-label="Heading self-link"></a></h2><h3 id=python>Python<a class=td-heading-self-link href=#python aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>datamate</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>DataMateClient</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>client</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>DataMateClient</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>base_url</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;http://localhost:8080&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>api_key</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;your-api-key&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 获取数据集列表</span>
</span></span><span style=display:flex><span><span style=color:#000>datasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_datasets</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;TEXT&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>status</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;ACTIVE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 创建数据集</span>
</span></span><span style=display:flex><span><span style=color:#000>dataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>create_dataset</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;my_dataset&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;TEXT&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>description</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;My dataset&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 上传文件</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>with</span> <span style=color:#204a87>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;document.txt&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;rb&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>f</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>data_management</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>upload_file</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#000>dataset_id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>file</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>f</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>file_name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;document.txt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=javascript>JavaScript<a class=td-heading-self-link href=#javascript aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>DataMateClient</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#39;@datamate/sdk&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>client</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DataMateClient</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>baseURL</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;http://localhost:8080&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>apiKey</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;your-api-key&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 获取数据集列表
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>datasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getDatasets</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;TEXT&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>status</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;ACTIVE&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 创建数据集
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>dataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>createDataset</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;my_dataset&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;TEXT&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>description</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;My dataset&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 上传文件
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>uploadFile</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000>dataset</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#39;document.txt&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>fileData</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=curl>cURL<a class=td-heading-self-link href=#curl aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 获取数据集列表</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#4e9a06>&#34;http://localhost:8092/api/v1/data-management/datasets?page=0&amp;size=20&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -H <span style=color:#4e9a06>&#34;Authorization: Bearer your-jwt-token&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 创建数据集</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#4e9a06>&#34;http://localhost:8092/api/v1/data-management/datasets&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -H <span style=color:#4e9a06>&#34;Authorization: Bearer your-jwt-token&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -H <span style=color:#4e9a06>&#34;Content-Type: application/json&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -d <span style=color:#4e9a06>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;name&#34;: &#34;my_dataset&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;type&#34;: &#34;TEXT&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;description&#34;: &#34;My dataset&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  }&#39;</span>
</span></span></code></pre></div><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/user-guide/data-management/>数据管理</a> - 用户指南</li><li><a href=https://github.com/ModelEngine-Group/DataMate/blob/main/backend/openapi/specs/data-management.yaml>OpenAPI 规范</a> - 完整规范</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a7c9e10a31abdecaec5a338462a220a8>5 - 开发者指南</h1><div class=lead>DataMate 架构和开发指南</div><div class="pageinfo pageinfo-primary"><p>开发者指南介绍 DataMate 的技术架构、开发环境和贡献流程。</p></div><p>DataMate 是一个企业级的数据处理平台，采用微服务架构，支持大规模数据处理和自定义扩展。</p><h2 id=架构文档>架构文档<a class=td-heading-self-link href=#%e6%9e%b6%e6%9e%84%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/developer-guide/backend-architecture/>后端架构</a> - Java 微服务架构设计</li><li><a href=/datamate-docs/docs/developer-guide/frontend-architecture/>前端架构</a> - React 前端架构设计</li><li><a href=/docs/developer-guide/database-schema/>数据库设计</a> - 数据库表结构设计</li></ul><h2 id=开发指南>开发指南<a class=td-heading-self-link href=#%e5%bc%80%e5%8f%91%e6%8c%87%e5%8d%97 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/development/>开发环境搭建</a> - 本地开发环境配置</li><li><a href=/docs/developer-guide/contribute/>贡献指南</a> - 代码贡献流程</li><li><a href=/docs/developer-guide/deployment/>部署指南</a> - 生产环境部署</li></ul><h2 id=技术栈>技术栈<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%a0%88 aria-label="Heading self-link"></a></h2><h3 id=前端>前端<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>说明</th></tr></thead><tbody><tr><td>React</td><td>18.x</td><td>UI 框架</td></tr><tr><td>TypeScript</td><td>5.x</td><td>类型安全</td></tr><tr><td>Ant Design</td><td>5.x</td><td>UI 组件库</td></tr><tr><td>Redux Toolkit</td><td>2.x</td><td>状态管理</td></tr><tr><td>Vite</td><td>5.x</td><td>构建工具</td></tr></tbody></table><h3 id=后端-java>后端 (Java)<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af-java aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>说明</th></tr></thead><tbody><tr><td>Java</td><td>21</td><td>运行时环境</td></tr><tr><td>Spring Boot</td><td>3.5.6</td><td>应用框架</td></tr><tr><td>Spring Cloud</td><td>2023.x</td><td>微服务框架</td></tr><tr><td>MyBatis Plus</td><td>3.x</td><td>ORM 框架</td></tr></tbody></table><h3 id=后端-python>后端 (Python)<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af-python aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>说明</th></tr></thead><tbody><tr><td>Python</td><td>3.11+</td><td>运行时环境</td></tr><tr><td>FastAPI</td><td>0.100+</td><td>Web 框架</td></tr><tr><td>LangChain</td><td>0.1+</td><td>LLM 框架</td></tr><tr><td>Ray</td><td>2.x</td><td>分布式计算</td></tr></tbody></table><h2 id=项目结构>项目结构<a class=td-heading-self-link href=#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84 aria-label="Heading self-link"></a></h2><pre tabindex=0><code>DataMate/
├── backend/                 # Java 后端
│   ├── services/           # 微服务模块
│   ├── openapi/            # OpenAPI 规范
│   └── scripts/            # 构建脚本
├── frontend/               # React 前端
│   ├── src/
│   │   ├── components/    # 公共组件
│   │   ├── pages/         # 页面组件
│   │   ├── services/      # API 服务
│   │   └── store/         # Redux store
│   └── package.json
├── runtime/                # Python 运行时
│   └── datamate/          # DataMate 运行时
└── deployment/             # 部署配置
    ├── docker/            # Docker 配置
    └── helm/              # Helm Charts
</code></pre><h2 id=快速开始>快速开始<a class=td-heading-self-link href=#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b aria-label="Heading self-link"></a></h2><h3 id=1-克隆代码>1. 克隆代码<a class=td-heading-self-link href=#1-%e5%85%8b%e9%9a%86%e4%bb%a3%e7%a0%81 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/ModelEngine-Group/DataMate.git
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> DataMate
</span></span></code></pre></div><h3 id=2-启动服务>2. 启动服务<a class=td-heading-self-link href=#2-%e5%90%af%e5%8a%a8%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动基础服务</span>
</span></span><span style=display:flex><span>make install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 访问前端</span>
</span></span><span style=display:flex><span>open http://localhost:30000
</span></span></code></pre></div><h3 id=3-开发模式>3. 开发模式<a class=td-heading-self-link href=#3-%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 后端开发</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> backend/services/main-application
</span></span><span style=display:flex><span>mvn spring-boot:run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 前端开发</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> frontend
</span></span><span style=display:flex><span>pnpm dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Python 服务开发</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> runtime/datamate
</span></span><span style=display:flex><span>python operator_runtime.py --port <span style=color:#0000cf;font-weight:700>8081</span>
</span></span></code></pre></div><h2 id=核心概念>核心概念<a class=td-heading-self-link href=#%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5 aria-label="Heading self-link"></a></h2><h3 id=微服务架构>微服务架构<a class=td-heading-self-link href=#%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%9e%b6%e6%9e%84 aria-label="Heading self-link"></a></h3><p>DataMate 采用微服务架构，每个服务负责特定的业务功能：</p><ul><li><strong>API Gateway</strong>：统一入口、路由、认证</li><li><strong>Main Application</strong>：核心业务逻辑</li><li><strong>Data Management Service</strong>：数据集管理</li><li><strong>Data Cleaning Service</strong>：数据清洗</li><li><strong>Data Synthesis Service</strong>：数据合成</li><li><strong>Runtime Service</strong>：算子执行</li></ul><h3 id=算子系统>算子系统<a class=td-heading-self-link href=#%e7%ae%97%e5%ad%90%e7%b3%bb%e7%bb%9f aria-label="Heading self-link"></a></h3><p>算子是数据处理的基本单元：</p><ul><li><strong>内置算子</strong>：平台提供的常用算子</li><li><strong>自定义算子</strong>：用户开发的自定义算子</li><li><strong>算子执行</strong>：由 Runtime Service 执行</li></ul><h3 id=流水线编排>流水线编排<a class=td-heading-self-link href=#%e6%b5%81%e6%b0%b4%e7%ba%bf%e7%bc%96%e6%8e%92 aria-label="Heading self-link"></a></h3><p>流水线通过可视化编排实现：</p><ul><li><strong>节点</strong>：数据处理的基本单元</li><li><strong>连接</strong>：节点间的数据流</li><li><strong>执行</strong>：按流程自动执行</li></ul><h2 id=扩展开发>扩展开发<a class=td-heading-self-link href=#%e6%89%a9%e5%b1%95%e5%bc%80%e5%8f%91 aria-label="Heading self-link"></a></h2><h3 id=开发自定义算子>开发自定义算子<a class=td-heading-self-link href=#%e5%bc%80%e5%8f%91%e8%87%aa%e5%ae%9a%e4%b9%89%e7%ae%97%e5%ad%90 aria-label="Heading self-link"></a></h3><p>算子开发指南：</p><ol><li><a href=/datamate-docs/docs/user-guide/operator-market/>算子市场</a> - 算子使用指南</li><li>Python 算子开发示例</li><li>算子测试和调试</li></ol><h3 id=集成外部系统>集成外部系统<a class=td-heading-self-link href=#%e9%9b%86%e6%88%90%e5%a4%96%e9%83%a8%e7%b3%bb%e7%bb%9f aria-label="Heading self-link"></a></h3><ul><li><strong>API 集成</strong>：通过 REST API 集成</li><li><strong>Webhook</strong>：事件通知</li><li><strong>插件系统</strong>：（即将推出）</li></ul><h2 id=测试>测试<a class=td-heading-self-link href=#%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h2><h3 id=单元测试>单元测试<a class=td-heading-self-link href=#%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 后端测试</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> backend
</span></span><span style=display:flex><span>mvn <span style=color:#204a87>test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 前端测试</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> frontend
</span></span><span style=display:flex><span>pnpm <span style=color:#204a87>test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Python 测试</span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> runtime
</span></span><span style=display:flex><span>pytest
</span></span></code></pre></div><h3 id=集成测试>集成测试<a class=td-heading-self-link href=#%e9%9b%86%e6%88%90%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 启动测试环境</span>
</span></span><span style=display:flex><span>make test-env-up
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 运行集成测试</span>
</span></span><span style=display:flex><span>make integration-test
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 清理测试环境</span>
</span></span><span style=display:flex><span>make test-env-down
</span></span></code></pre></div><h2 id=性能优化>性能优化<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h2><h3 id=后端优化>后端优化<a class=td-heading-self-link href=#%e5%90%8e%e7%ab%af%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>数据库连接池配置</li><li>查询优化</li><li>缓存策略</li><li>异步处理</li></ul><h3 id=前端优化>前端优化<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>代码分割</li><li>懒加载</li><li>缓存策略</li></ul><h2 id=安全>安全<a class=td-heading-self-link href=#%e5%ae%89%e5%85%a8 aria-label="Heading self-link"></a></h2><h3 id=认证授权>认证授权<a class=td-heading-self-link href=#%e8%ae%a4%e8%af%81%e6%8e%88%e6%9d%83 aria-label="Heading self-link"></a></h3><ul><li>JWT 认证</li><li>RBAC 权限控制</li><li>API Key 认证</li></ul><h3 id=数据安全>数据安全<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8 aria-label="Heading self-link"></a></h3><ul><li>传输加密（HTTPS/TLS）</li><li>存储加密</li><li>敏感数据脱敏</li></ul><h2 id=相关资源>相关资源<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e8%b5%84%e6%ba%90 aria-label="Heading self-link"></a></h2><ul><li><a href=https://github.com/ModelEngine-Group/DataMate>GitHub 仓库</a></li><li><a href=https://github.com/ModelEngine-Group/DataMate/issues>Issue 追踪</a></li><li><a href=https://github.com/ModelEngine-Group/DataMate/tree/main/backend/openapi/specs>OpenAPI 规范</a></li><li><a href=/datamate-docs/docs/api-reference/>API 参考</a> - 完整的 API 文档</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c768b6c585558f98a900da28e99b9672>5.1 - 后端架构</h1><div class=lead>DataMate Java 后端架构设计</div><div class="pageinfo pageinfo-primary"><p>DataMate 后端采用微服务架构，基于 Spring Boot 3.x 和 Spring Cloud 构建。</p></div><h2 id=架构概览>架构概览<a class=td-heading-self-link href=#%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88 aria-label="Heading self-link"></a></h2><p>DataMate 后端采用微服务架构，将系统拆分为多个独立的服务：</p><pre tabindex=0><code>┌─────────────────────────────────────────────┐
│              API Gateway                    │
│         (Spring Cloud Gateway)              │
│              Port: 8080                     │
└──────────────┬──────────────────────────────┘
               │
       ┌───────┴───────┬───────────────┐
       ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│   Main       │ │  Data        │ │  Data        │
│ Application  │ │  Management  │ │  Collection  │
└──────────────┘ └──────────────┘ └──────────────┘
       │               │               │
       └───────────────┴───────────────┘
                       │
                       ▼
              ┌────────────────┐
              │   PostgreSQL   │
              │   Port: 5432   │
              └────────────────┘
</code></pre><h2 id=技术栈>技术栈<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%a0%88 aria-label="Heading self-link"></a></h2><h3 id=核心框架>核心框架<a class=td-heading-self-link href=#%e6%a0%b8%e5%bf%83%e6%a1%86%e6%9e%b6 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>Java</td><td>21</td><td>编程语言</td></tr><tr><td>Spring Boot</td><td>3.5.6</td><td>应用框架</td></tr><tr><td>Spring Cloud</td><td>2023.x</td><td>微服务框架</td></tr><tr><td>MyBatis Plus</td><td>3.5.x</td><td>ORM 框架</td></tr><tr><td>PostgreSQL Driver</td><td>42.7.x</td><td>数据库驱动</td></tr></tbody></table><h3 id=支持组件>支持组件<a class=td-heading-self-link href=#%e6%94%af%e6%8c%81%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>Redis</td><td>5.x</td><td>缓存和消息队列</td></tr><tr><td>MinIO</td><td>8.x</td><td>对象存储</td></tr><tr><td>Milvus SDK</td><td>2.3.x</td><td>向量数据库</td></tr><tr><td>OpenAI API</td><td>-</td><td>LLM 集成</td></tr></tbody></table><h2 id=微服务列表>微服务列表<a class=td-heading-self-link href=#%e5%be%ae%e6%9c%8d%e5%8a%a1%e5%88%97%e8%a1%a8 aria-label="Heading self-link"></a></h2><h3 id=api-gateway>API Gateway<a class=td-heading-self-link href=#api-gateway aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 8080</p><p><strong>功能</strong>:</p><ul><li>统一入口</li><li>路由转发</li><li>认证授权</li><li>限流熔断</li></ul><p><strong>技术</strong>:</p><ul><li>Spring Cloud Gateway</li><li>JWT 认证</li><li>限流：Redis + Lua</li></ul><h3 id=main-application>Main Application<a class=td-heading-self-link href=#main-application aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 无（内部服务）</p><p><strong>功能</strong>:</p><ul><li>用户管理</li><li>权限管理</li><li>系统配置</li><li>任务调度</li></ul><p><strong>核心模块</strong>:</p><pre tabindex=0><code>com.datamate.main
├── auth            # 认证授权
├── user            # 用户管理
├── permission      # 权限管理
├── config          # 配置管理
└── scheduler       # 任务调度
</code></pre><h3 id=data-management-service>Data Management Service<a class=td-heading-self-link href=#data-management-service aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 8092</p><p><strong>功能</strong>:</p><ul><li>数据集管理</li><li>文件管理</li><li>标签管理</li><li>统计分析</li></ul><p><strong>API 端点</strong>:</p><ul><li><code>/data-management/datasets</code> - 数据集管理</li><li><code>/data-management/datasets/{id}/files</code> - 文件管理</li><li><code>/data-management/tags</code> - 标签管理</li></ul><p><strong>核心模块</strong>:</p><pre tabindex=0><code>com.datamate.data.management
├── dataset         # 数据集管理
├── file            # 文件管理
├── tag             # 标签管理
└── statistics      # 统计分析
</code></pre><h3 id=data-collection-service>Data Collection Service<a class=td-heading-self-link href=#data-collection-service aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 无（内部服务）</p><p><strong>功能</strong>:</p><ul><li>数据采集任务管理</li><li>DataX 集成</li><li>任务执行监控</li></ul><p><strong>核心模块</strong>:</p><pre tabindex=0><code>com.datamate.data.collection
├── task            # 任务管理
├── execution       # 执行管理
└── datax           # DataX 集成
</code></pre><h3 id=data-cleaning-service>Data Cleaning Service<a class=td-heading-self-link href=#data-cleaning-service aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 无（内部服务）</p><p><strong>功能</strong>:</p><ul><li>数据清洗任务管理</li><li>清洗模板管理</li><li>算子调用</li></ul><p><strong>核心模块</strong>:</p><pre tabindex=0><code>com.datamate.data.cleaning
├── task            # 任务管理
├── template        # 模板管理
└── operator        # 算子调用
</code></pre><h3 id=data-synthesis-service>Data Synthesis Service<a class=td-heading-self-link href=#data-synthesis-service aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 无（内部服务）</p><p><strong>功能</strong>:</p><ul><li>数据合成任务管理</li><li>指令模板管理</li><li>LLM 集成</li></ul><p><strong>核心模块</strong>:</p><pre tabindex=0><code>com.datamate.data.synthesis
├── task            # 任务管理
├── template        # 模板管理
└── llm             # LLM 集成
</code></pre><h3 id=runtime-service>Runtime Service<a class=td-heading-self-link href=#runtime-service aria-label="Heading self-link"></a></h3><p><strong>端口</strong>: 8081</p><p><strong>功能</strong>:</p><ul><li>算子执行</li><li>Ray 集成</li><li>任务调度</li></ul><p><strong>技术</strong>:</p><ul><li>Python + Ray</li><li>FastAPI</li><li>算子插件系统</li></ul><h2 id=数据库设计>数据库设计<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h2><h3 id=主要数据表>主要数据表<a class=td-heading-self-link href=#%e4%b8%bb%e8%a6%81%e6%95%b0%e6%8d%ae%e8%a1%a8 aria-label="Heading self-link"></a></h3><h4 id=用户表-users>用户表 (users)<a class=td-heading-self-link href=#%e7%94%a8%e6%88%b7%e8%a1%a8-users aria-label="Heading self-link"></a></h4><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>主键</td></tr><tr><td>username</td><td>VARCHAR(50)</td><td>用户名</td></tr><tr><td>password</td><td>VARCHAR(255)</td><td>密码（加密）</td></tr><tr><td>email</td><td>VARCHAR(100)</td><td>邮箱</td></tr><tr><td>role</td><td>VARCHAR(20)</td><td>角色</td></tr><tr><td>created_at</td><td>TIMESTAMP</td><td>创建时间</td></tr></tbody></table><h4 id=数据集表-datasets>数据集表 (datasets)<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e8%a1%a8-datasets aria-label="Heading self-link"></a></h4><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>id</td><td>VARCHAR(50)</td><td>主键</td></tr><tr><td>name</td><td>VARCHAR(100)</td><td>名称</td></tr><tr><td>description</td><td>TEXT</td><td>描述</td></tr><tr><td>type</td><td>VARCHAR(20)</td><td>类型</td></tr><tr><td>status</td><td>VARCHAR(20)</td><td>状态</td></tr><tr><td>created_by</td><td>VARCHAR(50)</td><td>创建者</td></tr><tr><td>created_at</td><td>TIMESTAMP</td><td>创建时间</td></tr></tbody></table><h4 id=任务表-tasks>任务表 (tasks)<a class=td-heading-self-link href=#%e4%bb%bb%e5%8a%a1%e8%a1%a8-tasks aria-label="Heading self-link"></a></h4><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>id</td><td>VARCHAR(50)</td><td>主键</td></tr><tr><td>name</td><td>VARCHAR(100)</td><td>名称</td></tr><tr><td>type</td><td>VARCHAR(20)</td><td>任务类型</td></tr><tr><td>status</td><td>VARCHAR(20)</td><td>状态</td></tr><tr><td>config</td><td>JSON</td><td>配置</td></tr><tr><td>created_at</td><td>TIMESTAMP</td><td>创建时间</td></tr></tbody></table><h3 id=数据库连接配置>数据库连接配置<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>jdbc:postgresql://localhost:5432/datamate</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${DB_PASSWORD:password}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>driver-class-name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>org.postgresql.Driver</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hikari</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>maximum-pool-size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>minimum-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>connection-timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30000</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=服务通信>服务通信<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h2><h3 id=同步通信>同步通信<a class=td-heading-self-link href=#%e5%90%8c%e6%ad%a5%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h3><p>服务间使用 HTTP/REST 进行同步通信：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 Feign Client</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@FeignClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;data-management-service&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>DataManagementClient</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#5c35cc;font-weight:700>@GetMapping</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/data-management/datasets/{id}&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>DatasetResponse</span><span style=color:#f8f8f8> </span><span style=color:#000>getDataset</span><span style=color:#000;font-weight:700>(</span><span style=color:#5c35cc;font-weight:700>@PathVariable</span><span style=color:#f8f8f8> </span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>id</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=异步通信>异步通信<a class=td-heading-self-link href=#%e5%bc%82%e6%ad%a5%e9%80%9a%e4%bf%a1 aria-label="Heading self-link"></a></h3><p>使用 Redis 实现异步消息队列：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 发送消息</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000>redisTemplate</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>convertAndSend</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;task.created&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>taskMessage</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 接收消息</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@RedisListener</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;task.created&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8> </span><span style=color:#000>handleTaskCreated</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>TaskMessage</span><span style=color:#f8f8f8> </span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic>// 处理任务创建事件</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=认证授权>认证授权<a class=td-heading-self-link href=#%e8%ae%a4%e8%af%81%e6%8e%88%e6%9d%83 aria-label="Heading self-link"></a></h2><h3 id=jwt-认证>JWT 认证<a class=td-heading-self-link href=#jwt-%e8%ae%a4%e8%af%81 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// JWT 配置</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Configuration</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>JwtConfig</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#5c35cc;font-weight:700>@Value</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;${datamate.jwt.secret}&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>private</span><span style=color:#f8f8f8> </span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>secret</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#5c35cc;font-weight:700>@Value</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;${datamate.jwt.expiration}&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>private</span><span style=color:#f8f8f8> </span><span style=color:#000>Long</span><span style=color:#f8f8f8> </span><span style=color:#000>expiration</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// JWT 工具类</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>JwtUtil</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>generateToken</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>User</span><span style=color:#f8f8f8> </span><span style=color:#000>user</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic>// 生成 JWT Token</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>Claims</span><span style=color:#f8f8f8> </span><span style=color:#000>parseToken</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>token</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic>// 解析 JWT Token</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=权限控制>权限控制<a class=td-heading-self-link href=#%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// RBAC 权限控制</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@PreAuthorize</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hasRole(&#39;ADMIN&#39;)&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8> </span><span style=color:#000>adminOperation</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic>// 管理员操作</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@PreAuthorize</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hasAnyRole(&#39;ADMIN&#39;, &#39;USER&#39;)&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8> </span><span style=color:#000>userOperation</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic>// 用户操作</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=异常处理>异常处理<a class=td-heading-self-link href=#%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=统一异常处理>统一异常处理<a class=td-heading-self-link href=#%e7%bb%9f%e4%b8%80%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@RestControllerAdvice</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>GlobalExceptionHandler</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#5c35cc;font-weight:700>@ExceptionHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ValidationException</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>ResponseEntity</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ErrorResponse</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#000>handleValidation</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ValidationException</span><span style=color:#f8f8f8> </span><span style=color:#000>e</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>return</span><span style=color:#f8f8f8> </span><span style=color:#000>ResponseEntity</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>badRequest</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>body</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8> </span><span style=color:#000>ErrorResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;INVALID_PARAMETER&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>e</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>getMessage</span><span style=color:#000;font-weight:700>()));</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#5c35cc;font-weight:700>@ExceptionHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ResourceNotFoundException</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>ResponseEntity</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ErrorResponse</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#000>handleNotFound</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ResourceNotFoundException</span><span style=color:#f8f8f8> </span><span style=color:#000>e</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>return</span><span style=color:#f8f8f8> </span><span style=color:#000>ResponseEntity</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>status</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>HttpStatus</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>NOT_FOUND</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>body</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8> </span><span style=color:#000>ErrorResponse</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;NOT_FOUND&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>e</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>getMessage</span><span style=color:#000;font-weight:700>()));</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=配置管理>配置管理<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=配置文件>配置文件<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># application.yml</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>application</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>data-management-service</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>profiles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>active</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${SPRING_PROFILES_ACTIVE:dev}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># application-dev.yml</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>jdbc:postgresql://localhost:5432/datamate</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># application-prod.yml</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=配置中心>配置中心<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e4%b8%ad%e5%bf%83 aria-label="Heading self-link"></a></h3><p>使用 Spring Cloud Config 进行配置管理：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>cloud</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>config</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>uri</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>http://config-server:8888</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${spring.application.name}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>profile</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${spring.profiles.active}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=日志管理>日志管理<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h2><h3 id=日志配置>日志配置<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;!-- logback-spring.xml --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;appender</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span style=color:#204a87;font-weight:700>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;appender</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;FILE&#34;</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;file&gt;</span>/var/log/datamate/backend/app.log<span style=color:#204a87;font-weight:700>&lt;/file&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;rollingPolicy</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;fileNamePattern&gt;</span>/var/log/datamate/backend/app-%d{yyyy-MM-dd}.log<span style=color:#204a87;font-weight:700>&lt;/fileNamePattern&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/rollingPolicy&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;root</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;appender-ref</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span> <span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;appender-ref</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;FILE&#34;</span> <span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/root&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/configuration&gt;</span>
</span></span></code></pre></div><h2 id=性能优化>性能优化<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h2><h3 id=数据库优化>数据库优化<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h3><ul><li>连接池配置</li><li>查询优化</li><li>索引优化</li><li>分页查询</li></ul><h3 id=缓存策略>缓存策略<a class=td-heading-self-link href=#%e7%bc%93%e5%ad%98%e7%ad%96%e7%95%a5 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 Redis 缓存</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Cacheable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;datasets&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>key</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;#id&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#000>Dataset</span><span style=color:#f8f8f8> </span><span style=color:#000>getDataset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>return</span><span style=color:#f8f8f8> </span><span style=color:#000>datasetRepository</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>findById</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@CacheEvict</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;datasets&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>key</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;#id&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>void</span><span style=color:#f8f8f8> </span><span style=color:#000>deleteDataset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span><span style=color:#f8f8f8> </span><span style=color:#000>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>datasetRepository</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>deleteById</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/developer-guide/frontend-architecture/>前端架构</a> - 前端架构设计</li><li><a href=/docs/developer-guide/database-schema/>数据库设计</a> - 数据库表结构</li><li><a href=/datamate-docs/docs/getting-started/development/>开发环境搭建</a> - 开发环境配置</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a57f86b7d183589939dcda6681c444dc>5.2 - 前端架构</h1><div class=lead>DataMate React 前端架构设计</div><div class="pageinfo pageinfo-primary"><p>DataMate 前端基于 React 18 和 TypeScript 构建，采用现代化前端架构。</p></div><h2 id=架构概览>架构概览<a class=td-heading-self-link href=#%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88 aria-label="Heading self-link"></a></h2><p>DataMate 前端采用 SPA（单页应用）架构，使用 React 18 + TypeScript + Ant Design 技术栈：</p><pre tabindex=0><code>┌─────────────────────────────────────────────┐
│              Browser                        │
└──────────────────┬──────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────┐
│              React App                      │
│  ┌──────────────────────────────────────┐  │
│  │         Components                   │  │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐│  │
│  │  │  Pages  │ │Common UI│ │ Forms   ││  │
│  │  └─────────┘ └─────────┘ └─────────┘│  │
│  └──────────────────────────────────────┘  │
│  ┌──────────────────────────────────────┐  │
│  │         State Management             │  │
│  │         (Redux Toolkit)              │  │
│  └──────────────────────────────────────┘  │
│  ┌──────────────────────────────────────┐  │
│  │         Services (API)               │  │
│  │         (Axios)                      │  │
│  └──────────────────────────────────────┘  │
│  ┌──────────────────────────────────────┐  │
│  │         Routing                      │  │
│  │         (React Router)               │  │
│  └──────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
</code></pre><h2 id=技术栈>技术栈<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%a0%88 aria-label="Heading self-link"></a></h2><h3 id=核心框架>核心框架<a class=td-heading-self-link href=#%e6%a0%b8%e5%bf%83%e6%a1%86%e6%9e%b6 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>React</td><td>18.x</td><td>UI 框架</td></tr><tr><td>TypeScript</td><td>5.x</td><td>类型安全</td></tr><tr><td>Ant Design</td><td>5.x</td><td>UI 组件库</td></tr><tr><td>Tailwind CSS</td><td>3.x</td><td>样式框架</td></tr></tbody></table><h3 id=状态管理>状态管理<a class=td-heading-self-link href=#%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86 aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>Redux Toolkit</td><td>2.x</td><td>全局状态管理</td></tr><tr><td>React Query</td><td>5.x</td><td>服务器状态管理</td></tr></tbody></table><h3 id=路由和构建>路由和构建<a class=td-heading-self-link href=#%e8%b7%af%e7%94%b1%e5%92%8c%e6%9e%84%e5%bb%ba aria-label="Heading self-link"></a></h3><table><thead><tr><th>技术</th><th>版本</th><th>用途</th></tr></thead><tbody><tr><td>React Router</td><td>6.x</td><td>路由管理</td></tr><tr><td>Vite</td><td>5.x</td><td>构建工具</td></tr></tbody></table><h2 id=项目结构>项目结构<a class=td-heading-self-link href=#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84 aria-label="Heading self-link"></a></h2><pre tabindex=0><code>frontend/
├── public/              # 静态资源
├── src/
│   ├── assets/         # 资源文件
│   ├── components/     # 公共组件
│   │   ├── layout/    # 布局组件
│   │   ├── common/    # 通用组件
│   │   └── charts/    # 图表组件
│   ├── pages/          # 页面组件
│   │   ├── DataCollection/
│   │   ├── DataManagement/
│   │   ├── DataCleansing/
│   │   ├── DataAnnotation/
│   │   ├── SynthesisTask/
│   │   ├── RatioTask/
│   │   ├── DataEvaluation/
│   │   ├── KnowledgeBase/
│   │   ├── OperatorMarket/
│   │   ├── Orchestration/
│   │   └── Agent/
│   ├── services/       # API 服务
│   │   ├── api/      # API 定义
│   │   └── types/    # TypeScript 类型
│   ├── store/          # Redux store
│   │   ├── slices/   # Redux slices
│   │   └── index.ts  # Store 配置
│   ├── hooks/          # 自定义 Hooks
│   ├── utils/          # 工具函数
│   ├── constants/      # 常量定义
│   ├── routes/         # 路由配置
│   ├── App.tsx        # 根组件
│   └── main.tsx       # 入口文件
├── index.html
├── vite.config.ts
├── tailwind.config.js
├── tsconfig.json
└── package.json
</code></pre><h2 id=路由设计>路由设计<a class=td-heading-self-link href=#%e8%b7%af%e7%94%b1%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h2><h3 id=路由结构>路由结构<a class=td-heading-self-link href=#%e8%b7%af%e7%94%b1%e7%bb%93%e6%9e%84 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// routes/routes.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>router</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>createBrowserRouter</span><span style=color:#000;font-weight:700>([</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>Home</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/chat&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>AgentPage</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/orchestration&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>children</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>SmartOrchestrationPage</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;create-workflow&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>WorkflowEditor</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;/data&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>MainLayout</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>children</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;collection&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>children</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span> <span style=color:#000>index</span>: <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>DataCollection</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;create-task&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>CollectionTaskCreate</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;management&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>children</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span> <span style=color:#000>index</span>: <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>DatasetManagement</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;create/:id?&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>DatasetCreate</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;detail/:id&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>DatasetDetail</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// ... 其他路由
</span></span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]);</span>
</span></span></code></pre></div><h3 id=路由守卫>路由守卫<a class=td-heading-self-link href=#%e8%b7%af%e7%94%b1%e5%ae%88%e5%8d%ab aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// hooks/useAuthGuard.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>useAuthGuard</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>location</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useLocation</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>navigate</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useNavigate</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>isAuthenticated</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useAuth</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>useEffect</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>isAuthenticated</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>navigate</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/login&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>state</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>from</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>location</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>isAuthenticated</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>location</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>navigate</span><span style=color:#000;font-weight:700>]);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><h2 id=状态管理-1>状态管理<a class=td-heading-self-link href=#%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86-1 aria-label="Heading self-link"></a></h2><h3 id=redux-toolkit-配置>Redux Toolkit 配置<a class=td-heading-self-link href=#redux-toolkit-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// store/index.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>configureStore</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@reduxjs/toolkit&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>dataManagementSlice</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;./slices/dataManagementSlice&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>userSlice</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;./slices/userSlice&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>store</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>configureStore</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>reducer</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>dataManagement</span>: <span style=color:#204a87;font-weight:700>dataManagementSlice</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>user</span>: <span style=color:#204a87;font-weight:700>userSlice</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000>middleware</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>getDefaultMiddleware</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>getDefaultMiddleware</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>      <span style=color:#000>serializableCheck</span>: <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}),</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>RootState</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ReturnType</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typeof</span> <span style=color:#c4a000>store.getState</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>AppDispatch</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>typeof</span> <span style=color:#000>store</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dispatch</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=slice-示例>Slice 示例<a class=td-heading-self-link href=#slice-%e7%a4%ba%e4%be%8b aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// store/slices/dataManagementSlice.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>createSlice</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>createAsyncThunk</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@reduxjs/toolkit&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>getDatasets</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>createDataset</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/services/api/dataManagement&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>DataManagementState</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>datasets</span>: <span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>[];</span>
</span></span><span style=display:flex><span>  <span style=color:#000>loading</span>: <span style=color:#204a87;font-weight:700>boolean</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>error</span>: <span style=color:#204a87;font-weight:700>string</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>initialState</span>: <span style=color:#204a87;font-weight:700>DataManagementState</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>datasets</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#000>loading</span>: <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>error</span>: <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>fetchDatasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>createAsyncThunk</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#39;dataManagement/fetchDatasets&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>async</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>params</span>: <span style=color:#204a87;font-weight:700>GetDatasetsParams</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>getDatasets</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>params</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>dataManagementSlice</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>createSlice</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;dataManagement&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>initialState</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>reducers</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>clearError</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000>extraReducers</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>builder</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>builder</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>.</span><span style=color:#000>addCase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fetchDatasets</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pending</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>loading</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>.</span><span style=color:#000>addCase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fetchDatasets</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fulfilled</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>action</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>loading</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>action</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>.</span><span style=color:#000>addCase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fetchDatasets</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rejected</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>action</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>loading</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>action</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#4e9a06>&#39;Failed to fetch datasets&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>clearError</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>dataManagementSlice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>actions</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>default</span> <span style=color:#000>dataManagementSlice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reducer</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h2 id=组件设计>组件设计<a class=td-heading-self-link href=#%e7%bb%84%e4%bb%b6%e8%ae%be%e8%ae%a1 aria-label="Heading self-link"></a></h2><h3 id=页面组件>页面组件<a class=td-heading-self-link href=#%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// pages/DataManagement/Home/DataManagement.tsx
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>React</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>useEffect</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;react&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>useAppDispatch</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>useAppSelector</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/store/hooks&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>fetchDatasets</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/store/slices/dataManagementSlice&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>DataTable</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@/components/common/DataTable&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DataManagement</span>: <span style=color:#204a87;font-weight:700>React.FC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>dispatch</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useAppDispatch</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>datasets</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>loading</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useAppSelector</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dataManagement</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>useEffect</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>dispatch</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fetchDatasets</span><span style=color:#000;font-weight:700>({</span> <span style=color:#000>page</span>: <span style=color:#204a87;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>size</span>: <span style=color:#204a87;font-weight:700>20</span> <span style=color:#000;font-weight:700>}));</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>dispatch</span><span style=color:#000;font-weight:700>]);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;p-6&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>h1</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text-2xl font-bold mb-6&#34;</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#a40000>数据集管理</span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>h1</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>DataTable</span> <span style=color:#c4a000>data</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>datasets</span><span style=color:#000;font-weight:700>}</span> <span style=color:#c4a000>loading</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>loading</span><span style=color:#000;font-weight:700>}</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><h3 id=公共组件>公共组件<a class=td-heading-self-link href=#%e5%85%ac%e5%85%b1%e7%bb%84%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// components/common/DataTable.tsx
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>React</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;react&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Table</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;antd&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>DataTableProps</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>data</span>: <span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>[];</span>
</span></span><span style=display:flex><span>  <span style=color:#000>loading</span>: <span style=color:#204a87;font-weight:700>boolean</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DataTable</span>: <span style=color:#204a87;font-weight:700>React.FC</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>DataTableProps</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>({</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>loading</span> <span style=color:#000;font-weight:700>})</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>columns</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span> <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;名称&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dataIndex</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>key</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;name&#39;</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span> <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;类型&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dataIndex</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;type&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>key</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;type&#39;</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span> <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;状态&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dataIndex</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;status&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>key</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;status&#39;</span> <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Table</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>columns</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>columns</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>dataSource</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>loading</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>loading</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#c4a000>rowKey</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;id&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><h2 id=api-服务>API 服务<a class=td-heading-self-link href=#api-%e6%9c%8d%e5%8a%a1 aria-label="Heading self-link"></a></h2><h3 id=axios-配置>Axios 配置<a class=td-heading-self-link href=#axios-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// services/api/request.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>axios</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;axios&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>request</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>axios</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>create</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>baseURL</span>: <span style=color:#204a87;font-weight:700>import.meta.env.VITE_API_BASE_URL</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#4e9a06>&#39;http://localhost:8080&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>timeout</span>: <span style=color:#204a87;font-weight:700>30000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 请求拦截器
</span></span></span><span style=display:flex><span><span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>interceptors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>use</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>(</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>token</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>localStorage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;token&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>token</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Authorization</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>`Bearer </span><span style=color:#4e9a06>${</span><span style=color:#000>token</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>`</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>config</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>(</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Promise</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 响应拦截器
</span></span></span><span style=display:flex><span><span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>interceptors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>use</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>(</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>response</span><span style=color:#ce5c00;font-weight:700>?</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>status</span> <span style=color:#ce5c00;font-weight:700>===</span> <span style=color:#0000cf;font-weight:700>401</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// 跳转到登录页
</span></span></span><span style=display:flex><span>      <span style=color:#204a87>window</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>location</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>href</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;/login&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Promise</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>default</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=api-定义>API 定义<a class=td-heading-self-link href=#api-%e5%ae%9a%e4%b9%89 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// services/api/dataManagement.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>request</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;./request&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Dataset</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>CreateDatasetRequest</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;./types&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>getDatasets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>params</span>: <span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>get</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000;font-weight:700>{</span> <span style=color:#000>content</span>: <span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000;font-weight:700>}</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/data-management/datasets&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>params</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>getDataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#4e9a06>`/data-management/datasets/</span><span style=color:#4e9a06>${</span><span style=color:#000>id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>`</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>createDataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span>: <span style=color:#204a87;font-weight:700>CreateDatasetRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>post</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#4e9a06>&#39;/data-management/datasets&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>updateDataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span>: <span style=color:#204a87;font-weight:700>Partial</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>&gt;)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>put</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Dataset</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#4e9a06>`/data-management/datasets/</span><span style=color:#4e9a06>${</span><span style=color:#000>id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>`</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>deleteDataset</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>`/data-management/datasets/</span><span style=color:#4e9a06>${</span><span style=color:#000>id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>`</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><h2 id=typescript-类型定义>TypeScript 类型定义<a class=td-heading-self-link href=#typescript-%e7%b1%bb%e5%9e%8b%e5%ae%9a%e4%b9%89 aria-label="Heading self-link"></a></h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// services/types/dataManagement.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>Dataset</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>description</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>DatasetType</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>status</span>: <span style=color:#204a87;font-weight:700>DatasetStatus</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>tags</span>: <span style=color:#204a87;font-weight:700>Tag</span><span style=color:#000;font-weight:700>[];</span>
</span></span><span style=display:flex><span>  <span style=color:#000>fileCount</span>: <span style=color:#204a87;font-weight:700>number</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>totalSize</span>: <span style=color:#204a87;font-weight:700>number</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>completionRate</span>: <span style=color:#204a87;font-weight:700>number</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>createdAt</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>createdBy</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>DatasetType</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>code</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>description</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>supportedFormats</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>[];</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>Tag</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>id</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>color</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>DatasetStatus</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;ACTIVE&#39;</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#4e9a06>&#39;INACTIVE&#39;</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#4e9a06>&#39;PROCESSING&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>interface</span> <span style=color:#000>CreateDatasetRequest</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>name</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>description?</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>tags?</span>: <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>[];</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=样式方案>样式方案<a class=td-heading-self-link href=#%e6%a0%b7%e5%bc%8f%e6%96%b9%e6%a1%88 aria-label="Heading self-link"></a></h2><h3 id=tailwind-css>Tailwind CSS<a class=td-heading-self-link href=#tailwind-css aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 Tailwind CSS
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;flex items-center justify-between p-4 bg-white rounded-lg shadow&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>h2</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text-lg font-semibold&#34;</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#a40000>标题</span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>h2</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>button</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#a40000>按钮</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>button</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><h3 id=ant-design>Ant Design<a class=td-heading-self-link href=#ant-design aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 Ant Design 组件
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Button</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Table</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Modal</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;antd&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Modal</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>title</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;创建数据集&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>open</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>visible</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>onOk</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>handleOk</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#c4a000>onCancel</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>handleCancel</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Form.Item</span> <span style=color:#c4a000>label</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;名称&#34;</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;name&#34;</span> <span style=color:#c4a000>rules</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{[{</span> <span style=color:#000>required</span>: <span style=color:#204a87;font-weight:700>true</span> <span style=color:#000;font-weight:700>}]}&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>Input</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>Form.Item</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>Form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>Modal</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><h2 id=性能优化>性能优化<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="Heading self-link"></a></h2><h3 id=代码分割>代码分割<a class=td-heading-self-link href=#%e4%bb%a3%e7%a0%81%e5%88%86%e5%89%b2 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 路由懒加载
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>lazy</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;react&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DataManagement</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>lazy</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#204a87;font-weight:700>import</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;@/pages/DataManagement/Home/DataManagement&#39;</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>router</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>createBrowserRouter</span><span style=color:#000;font-weight:700>([</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;/data/management&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>lazy</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#204a87;font-weight:700>import</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;@/pages/Layout/MainLayout&#39;</span><span style=color:#000;font-weight:700>)),</span>
</span></span><span style=display:flex><span>    <span style=color:#000>children</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>index</span>: <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>Component</span>: <span style=color:#204a87;font-weight:700>DataManagement</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]);</span>
</span></span></code></pre></div><h3 id=reactmemo>React.memo<a class=td-heading-self-link href=#reactmemo aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 React.memo 避免不必要的重渲染
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DataCard</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>React</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>memo</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>DataCardProps</span><span style=color:#000;font-weight:700>&gt;(({</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>})</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;{</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>}&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span></code></pre></div><h3 id=usememo-和-usecallback>useMemo 和 useCallback<a class=td-heading-self-link href=#usememo-%e5%92%8c-usecallback aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 useMemo 缓存计算结果
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>filteredData</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useMemo</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>item</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000>item</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>status</span> <span style=color:#ce5c00;font-weight:700>===</span> <span style=color:#4e9a06>&#39;ACTIVE&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>]);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 使用 useCallback 缓存函数
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>handleClick</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>useCallback</span><span style=color:#000;font-weight:700>(()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;clicked&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[]);</span>
</span></span></code></pre></div><h2 id=测试>测试<a class=td-heading-self-link href=#%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h2><h3 id=组件测试>组件测试<a class=td-heading-self-link href=#%e7%bb%84%e4%bb%b6%e6%b5%8b%e8%af%95 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// DataManagement.test.tsx
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>render</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>screen</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;@testing-library/react&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>DataManagement</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#39;./DataManagement&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>test</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;renders data management page&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>render</span><span style=color:#000;font-weight:700>(&lt;</span><span style=color:#204a87;font-weight:700>DataManagement</span> <span style=color:#000;font-weight:700>/&gt;);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>expect</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>screen</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getByText</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;数据集管理&#39;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#000>toBeInTheDocument</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span></code></pre></div><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/developer-guide/backend-architecture/>后端架构</a> - 后端架构设计</li><li><a href=/datamate-docs/docs/getting-started/development/>开发环境搭建</a> - 开发环境配置</li><li><a href=https://ant.design/components/overview/>组件文档</a> - Ant Design 组件</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6d3695a8bc8582995ad4b17a0b19e419>6 - 附录</h1><div class=lead>配置、故障排查等参考信息</div><div class="pageinfo pageinfo-primary"><p>附录包含配置参数、故障排查和其他参考信息。</p></div><h2 id=附录内容>附录内容<a class=td-heading-self-link href=#%e9%99%84%e5%bd%95%e5%86%85%e5%ae%b9 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/appendix/configuration/>配置参数</a> - 系统配置参数说明</li><li><a href=/datamate-docs/docs/appendix/troubleshooting/>故障排查</a> - 常见问题和解决方案</li></ul><h2 id=配置参数>配置参数<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h2><p>详细的系统配置说明：</p><ul><li><strong>环境变量</strong>：所有可配置的环境变量</li><li><strong>application.yml</strong>：Spring Boot 配置文件</li><li><strong>Docker Compose</strong>：容器配置</li><li><strong>Kubernetes</strong>：K8s 配置</li></ul><h2 id=故障排查>故障排查<a class=td-heading-self-link href=#%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5 aria-label="Heading self-link"></a></h2><p>常见问题的排查步骤和解决方案：</p><ul><li><strong>服务启动问题</strong>：容器启动失败等</li><li><strong>数据库连接问题</strong>：数据库连接失败等</li><li><strong>前端问题</strong>：页面加载、API 请求等</li><li><strong>任务执行问题</strong>：任务卡住、执行失败等</li><li><strong>性能问题</strong>：系统响应缓慢、内存溢出等</li></ul><h2 id=其他参考>其他参考<a class=td-heading-self-link href=#%e5%85%b6%e4%bb%96%e5%8f%82%e8%80%83 aria-label="Heading self-link"></a></h2><h3 id=相关资源>相关资源<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e8%b5%84%e6%ba%90 aria-label="Heading self-link"></a></h3><ul><li><a href=https://github.com/ModelEngine-Group/DataMate>GitHub 仓库</a> - 源代码</li><li><a href=https://github.com/ModelEngine-Group/DataMate/issues>Issue 追踪</a> - 问题反馈</li><li><a href=https://github.com/ModelEngine-Group/DataMate/blob/main/CHANGELOG.md>更新日志</a> - 版本更新</li></ul><h3 id=技术支持>技术支持<a class=td-heading-self-link href=#%e6%8a%80%e6%9c%af%e6%94%af%e6%8c%81 aria-label="Heading self-link"></a></h3><p>如果遇到问题：</p><ol><li>查看 <a href=/datamate-docs/docs/appendix/troubleshooting/>故障排查</a> 文档</li><li>搜索 <a href=https://github.com/ModelEngine-Group/DataMate/issues>GitHub Issues</a></li><li>提交新的 Issue 并附上详细信息</li></ol><h3 id=贡献指南>贡献指南<a class=td-heading-self-link href=#%e8%b4%a1%e7%8c%ae%e6%8c%87%e5%8d%97 aria-label="Heading self-link"></a></h3><p>欢迎为 DataMate 贡献：</p><ul><li>报告 Bug</li><li>提出新功能建议</li><li>提交代码贡献</li><li>改进文档</li></ul><p>详见 <a href=/docs/developer-guide/contribute/>贡献指南</a>。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-91328b5917bfb7073458e7099a934d68>6.1 - 配置参数</h1><div class=lead>DataMate 系统配置参数说明</div><div class="pageinfo pageinfo-primary"><p>本文档详细说明 DataMate 的各种配置参数。</p></div><h2 id=环境变量>环境变量<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label="Heading self-link"></a></h2><h3 id=通用配置>通用配置<a class=td-heading-self-link href=#%e9%80%9a%e7%94%a8%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>DB_PASSWORD</code></td><td><code>password</code></td><td>数据库密码</td></tr><tr><td><code>DATAMATE_JWT_ENABLE</code></td><td><code>false</code></td><td>是否启用 JWT 认证</td></tr><tr><td><code>REGISTRY</code></td><td><code>ghcr.io/modelengine-group/</code></td><td>镜像仓库地址</td></tr><tr><td><code>VERSION</code></td><td><code>latest</code></td><td>镜像版本标签</td></tr></tbody></table><h3 id=数据库配置>数据库配置<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>DB_HOST</code></td><td><code>datamate-database</code></td><td>数据库主机</td></tr><tr><td><code>DB_PORT</code></td><td><code>5432</code></td><td>数据库端口</td></tr><tr><td><code>DB_NAME</code></td><td><code>datamate</code></td><td>数据库名称</td></tr><tr><td><code>DB_USER</code></td><td><code>postgres</code></td><td>数据库用户名</td></tr><tr><td><code>DB_PASSWORD</code></td><td><code>password</code></td><td>数据库密码</td></tr></tbody></table><h3 id=redis-配置>Redis 配置<a class=td-heading-self-link href=#redis-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>REDIS_HOST</code></td><td><code>datamate-redis</code></td><td>Redis 主机</td></tr><tr><td><code>REDIS_PORT</code></td><td><code>6379</code></td><td>Redis 端口</td></tr><tr><td><code>REDIS_PASSWORD</code></td><td>-</td><td>Redis 密码（可选）</td></tr><tr><td><code>REDIS_DB</code></td><td><code>0</code></td><td>Redis 数据库编号</td></tr></tbody></table><h3 id=milvus-配置>Milvus 配置<a class=td-heading-self-link href=#milvus-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>MILVUS_HOST</code></td><td><code>milvus</code></td><td>Milvus 主机</td></tr><tr><td><code>MILVUS_PORT</code></td><td><code>19530</code></td><td>Milvus 端口</td></tr><tr><td><code>MILVUS_INDEX_TYPE</code></td><td><code>IVF_FLAT</code></td><td>向量索引类型</td></tr><tr><td><code>MILVUS_EMBEDDING_DIM</code></td><td><code>768</code></td><td>向量维度</td></tr></tbody></table><h3 id=minio-配置>MinIO 配置<a class=td-heading-self-link href=#minio-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>MINIO_ENDPOINT</code></td><td><code>minio:9000</code></td><td>MinIO 端点</td></tr><tr><td><code>MINIO_ACCESS_KEY</code></td><td><code>minioadmin</code></td><td>访问密钥</td></tr><tr><td><code>MINIO_SECRET_KEY</code></td><td><code>minioadmin</code></td><td>秘密密钥</td></tr><tr><td><code>MINIO_BUCKET</code></td><td><code>datamate</code></td><td>存储桶名称</td></tr><tr><td><code>MINIO_USE_SSL</code></td><td><code>false</code></td><td>是否使用 SSL</td></tr></tbody></table><h3 id=llm-配置>LLM 配置<a class=td-heading-self-link href=#llm-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>OPENAI_API_KEY</code></td><td>-</td><td>OpenAI API 密钥</td></tr><tr><td><code>OPENAI_BASE_URL</code></td><td><code>https://api.openai.com/v1</code></td><td>API 基础 URL</td></tr><tr><td><code>OPENAI_MODEL</code></td><td><code>gpt-4</code></td><td>使用的模型</td></tr></tbody></table><h3 id=jwt-配置>JWT 配置<a class=td-heading-self-link href=#jwt-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>JWT_SECRET</code></td><td><code>default-insecure-key</code></td><td>JWT 密钥（生产环境必须修改）</td></tr><tr><td><code>JWT_EXPIRATION</code></td><td><code>86400</code></td><td>Token 过期时间（秒）</td></tr></tbody></table><h3 id=日志配置>日志配置<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>变量名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>LOG_LEVEL</code></td><td><code>INFO</code></td><td>日志级别</td></tr><tr><td><code>LOG_PATH</code></td><td><code>/var/log/datamate</code></td><td>日志路径</td></tr></tbody></table><h2 id=applicationyml-配置>application.yml 配置<a class=td-heading-self-link href=#applicationyml-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h2><h3 id=主配置文件>主配置文件<a class=td-heading-self-link href=#%e4%b8%bb%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># application.yml</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>datamate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>jwt</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>enable</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${DATAMATE_JWT_ENABLE:false}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>secret</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${JWT_SECRET:default-insecure-key}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>expiration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${JWT_EXPIRATION:86400}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>storage</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>minio </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio, local, s3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>endpoint</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${MINIO_ENDPOINT:minio:9000}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>access-key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${MINIO_ACCESS_KEY:minioadmin}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>secret-key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${MINIO_SECRET_KEY:minioadmin}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bucket</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${MINIO_BUCKET:datamate}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>llm</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>provider</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>openai</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>api-key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${OPENAI_API_KEY:}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>base-url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${OPENAI_BASE_URL:https://api.openai.com/v1}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>model</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${OPENAI_MODEL:gpt-4}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>temperature</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0.7</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>max-tokens</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2000</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=spring-boot-配置>Spring Boot 配置<a class=td-heading-self-link href=#spring-boot-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>application</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>data-management-service</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>jdbc:postgresql://${DB_HOST:datamate-database}:${DB_PORT:5432}/${DB_NAME:datamate}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${DB_USER:postgres}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${DB_PASSWORD:password}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>driver-class-name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>org.postgresql.Driver</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hikari</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>maximum-pool-size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>minimum-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>connection-timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>idle-timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>600000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>max-lifetime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1800000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>jpa</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hibernate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>ddl-auto</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>validate</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>show-sql</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>hibernate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>dialect</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>org.hibernate.dialect.PostgreSQLDialect</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>format_sql</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>redis</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${REDIS_HOST:datamate-redis}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${REDIS_PORT:6379}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${REDIS_PASSWORD:}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>${REDIS_DB:0}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>3000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>lettuce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>pool</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-active</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>min-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-wait</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>-<span style=color:#000>1ms</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>server</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8092</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>servlet</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>context-path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/api/v1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>compression</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>tomcat</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>max-threads</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>accept-count</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=日志配置-1>日志配置<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e9%85%8d%e7%bd%ae-1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;!-- logback-spring.xml --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;springProperty</span> <span style=color:#c4a000>scope=</span><span style=color:#4e9a06>&#34;context&#34;</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;LOG_LEVEL&#34;</span> <span style=color:#c4a000>source=</span><span style=color:#4e9a06>&#34;log.level&#34;</span> <span style=color:#c4a000>defaultValue=</span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;springProperty</span> <span style=color:#c4a000>scope=</span><span style=color:#4e9a06>&#34;context&#34;</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;LOG_PATH&#34;</span> <span style=color:#c4a000>source=</span><span style=color:#4e9a06>&#34;log.path&#34;</span> <span style=color:#c4a000>defaultValue=</span><span style=color:#4e9a06>&#34;/var/log/datamate&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;appender</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style=color:#204a87;font-weight:700>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;charset&gt;</span>UTF-8<span style=color:#204a87;font-weight:700>&lt;/charset&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;appender</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;FILE&#34;</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;file&gt;</span>${LOG_PATH}/backend/app.log<span style=color:#204a87;font-weight:700>&lt;/file&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span style=color:#204a87;font-weight:700>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;charset&gt;</span>UTF-8<span style=color:#204a87;font-weight:700>&lt;/charset&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;rollingPolicy</span> <span style=color:#c4a000>class=</span><span style=color:#4e9a06>&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;fileNamePattern&gt;</span>${LOG_PATH}/backend/app-%d{yyyy-MM-dd}.log<span style=color:#204a87;font-weight:700>&lt;/fileNamePattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;maxHistory&gt;</span>30<span style=color:#204a87;font-weight:700>&lt;/maxHistory&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&lt;totalSizeCap&gt;</span>10GB<span style=color:#204a87;font-weight:700>&lt;/totalSizeCap&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;/rollingPolicy&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;logger</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;com.datamate&#34;</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;${LOG_LEVEL}&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;logger</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;org.springframework&#34;</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;logger</span> <span style=color:#c4a000>name=</span><span style=color:#4e9a06>&#34;org.hibernate&#34;</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;root</span> <span style=color:#c4a000>level=</span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#204a87;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;appender-ref</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;CONSOLE&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;appender-ref</span> <span style=color:#c4a000>ref=</span><span style=color:#4e9a06>&#34;FILE&#34;</span><span style=color:#204a87;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/root&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/configuration&gt;</span>
</span></span></code></pre></div><h2 id=docker-compose-配置>Docker Compose 配置<a class=td-heading-self-link href=#docker-compose-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h2><h3 id=环境变量配置>环境变量配置<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># docker-compose.yml</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datamate-backend</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>environment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>DB_PASSWORD=${DB_PASSWORD:-password}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>DATAMATE_JWT_ENABLE=${DATAMATE_JWT_ENABLE:-false}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>LOG_LEVEL=${LOG_LEVEL:-INFO}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>volumes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>dataset_volume:/dataset</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>log_volume:/var/log/datamate</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=资源限制配置>资源限制配置<a class=td-heading-self-link href=#%e8%b5%84%e6%ba%90%e9%99%90%e5%88%b6%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datamate-backend</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>deploy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>cpus</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;2&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>4G</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>reservations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>cpus</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;1&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>2G</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=kubernetes-配置>Kubernetes 配置<a class=td-heading-self-link href=#kubernetes-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h2><h3 id=configmap>ConfigMap<a class=td-heading-self-link href=#configmap aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>v1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ConfigMap</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>datamate-config</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>DB_HOST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;datamate-database&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>DB_PORT</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;5432&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>REDIS_HOST</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;datamate-redis&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>REDIS_PORT</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;6379&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>LOG_LEVEL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;INFO&#34;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=secret>Secret<a class=td-heading-self-link href=#secret aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>v1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Secret</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>datamate-secret</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Opaque</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>DB_PASSWORD</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>cGFzc3dvcmQ= </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># base64 encoded</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>JWT_SECRET</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eW91ci1zZWNyZXQta2V5</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>OPENAI_API_KEY</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eW91ci1hcGkta2V5</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=环境变量引用>环境变量引用<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e5%bc%95%e7%94%a8 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>apps/v1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Deployment</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>datamate-backend</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>containers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>backend</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>env</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DB_PASSWORD</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>              </span><span style=color:#204a87;font-weight:700>valueFrom</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>secretKeyRef</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>datamate-secret</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DB_PASSWORD</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>            </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>LOG_LEVEL</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>              </span><span style=color:#204a87;font-weight:700>valueFrom</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>configMapKeyRef</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>datamate-config</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>LOG_LEVEL</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=前端配置>前端配置<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h2><h3 id=环境变量-1>环境变量<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f-1 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># .env.development</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_BASE_URL</span><span style=color:#ce5c00;font-weight:700>=</span>http://localhost:8080
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_TIMEOUT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>30000</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_APP_TITLE</span><span style=color:#ce5c00;font-weight:700>=</span>DataMate Dev
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># .env.production</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_BASE_URL</span><span style=color:#ce5c00;font-weight:700>=</span>https://api.datamate.com
</span></span><span style=display:flex><span><span style=color:#000>VITE_API_TIMEOUT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>30000</span>
</span></span><span style=display:flex><span><span style=color:#000>VITE_APP_TITLE</span><span style=color:#ce5c00;font-weight:700>=</span>DataMate
</span></span></code></pre></div><h3 id=vite-配置>Vite 配置<a class=td-heading-self-link href=#vite-%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// vite.config.ts
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>default</span> <span style=color:#000>defineConfig</span><span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>  <span style=color:#000>server</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>port</span>: <span style=color:#204a87;font-weight:700>3000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>proxy</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#4e9a06>&#39;/api&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>target</span>: <span style=color:#204a87;font-weight:700>env.VITE_API_BASE_URL</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>changeOrigin</span>: <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000>build</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>outDir</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;dist&#39;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>sourcemap</span>: <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>rollupOptions</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>output</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>manualChunks</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>vendor</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;react&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;react-dom&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;react-router-dom&#39;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>          <span style=color:#000>antd</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;antd&#39;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>});</span>
</span></span></code></pre></div><h2 id=python-运行时配置>Python 运行时配置<a class=td-heading-self-link href=#python-%e8%bf%90%e8%a1%8c%e6%97%b6%e9%85%8d%e7%bd%ae aria-label="Heading self-link"></a></h2><h3 id=环境变量-2>环境变量<a class=td-heading-self-link href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f-2 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Python 服务配置</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_HOST</span><span style=color:#ce5c00;font-weight:700>=</span>datamate-database
</span></span><span style=display:flex><span><span style=color:#000>PG_PORT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5432</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_USER</span><span style=color:#ce5c00;font-weight:700>=</span>postgres
</span></span><span style=display:flex><span><span style=color:#000>PG_PASSWORD</span><span style=color:#ce5c00;font-weight:700>=</span>password
</span></span><span style=display:flex><span><span style=color:#000>PG_DATABASE</span><span style=color:#ce5c00;font-weight:700>=</span>datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>log_level</span><span style=color:#ce5c00;font-weight:700>=</span>DEBUG
</span></span><span style=display:flex><span><span style=color:#000>datamate_jwt_enable</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>false</span>
</span></span></code></pre></div><h3 id=配置文件>配置文件<a class=td-heading-self-link href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># config.py</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Config</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># PostgreSQL</span>
</span></span><span style=display:flex><span>    <span style=color:#000>PG_HOST</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PG_HOST&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;datamate-database&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>PG_PORT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PG_PORT&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5432</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>    <span style=color:#000>PG_USER</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PG_USER&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;postgres&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>PG_PASSWORD</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PG_PASSWORD&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;password&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>PG_DATABASE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PG_DATABASE&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;datamate&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># 日志</span>
</span></span><span style=display:flex><span>    <span style=color:#000>LOG_LEVEL</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;log_level&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;INFO&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># JWT</span>
</span></span><span style=display:flex><span>    <span style=color:#000>JWT_ENABLE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;datamate_jwt_enable&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;false&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>lower</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;true&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Milvus</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MILVUS_HOST</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;MILVUS_HOST&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;milvus&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MILVUS_PORT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>os</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>getenv</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;MILVUS_PORT&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>19530</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><h2 id=性能调优参数>性能调优参数<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e8%b0%83%e4%bc%98%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h2><h3 id=数据库连接池>数据库连接池<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e6%b1%a0 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hikari</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>maximum-pool-size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># 最大连接数</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>minimum-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># 最小空闲连接数</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>connection-timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30000</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># 连接超时（毫秒）</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>idle-timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>600000</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># 空闲超时（毫秒）</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>max-lifetime</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1800000</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># 连接最大生命周期（毫秒）</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=redis-连接池>Redis 连接池<a class=td-heading-self-link href=#redis-%e8%bf%9e%e6%8e%a5%e6%b1%a0 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>spring</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>redis</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>lettuce</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>pool</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-active</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># 最大活跃连接数</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># 最大空闲连接数</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>min-idle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># 最小空闲连接数</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>max-wait</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>-<span style=color:#000>1ms    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># 最大等待时间</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=jvm-参数>JVM 参数<a class=td-heading-self-link href=#jvm-%e5%8f%82%e6%95%b0 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># JVM 调优参数</span>
</span></span><span style=display:flex><span><span style=color:#000>JAVA_OPTS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;-Xms2g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=200&#34;</span>
</span></span></code></pre></div><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/installation/>安装部署指南</a> - 部署配置说明</li><li><a href=/datamate-docs/docs/appendix/troubleshooting/>故障排查</a> - 常见问题解决</li><li><a href=/datamate-docs/docs/developer-guide/backend-architecture/>后端架构</a> - 后端架构设计</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-5e253169ae19ef26ef3bcec70fa224fd>6.2 - 故障排查</h1><div class=lead>DataMate 常见问题和解决方案</div><div class="pageinfo pageinfo-primary"><p>本文档提供 DataMate 常见问题的排查步骤和解决方案。</p></div><h2 id=服务启动问题>服务启动问题<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e5%90%af%e5%8a%a8%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=服务无法启动>服务无法启动<a class=td-heading-self-link href=#%e6%9c%8d%e5%8a%a1%e6%97%a0%e6%b3%95%e5%90%af%e5%8a%a8 aria-label="Heading self-link"></a></h3><h4 id=症状>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6 aria-label="Heading self-link"></a></h4><p>执行 <code>make install</code> 后，服务无法启动或立即退出。</p><h4 id=排查步骤>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4 aria-label="Heading self-link"></a></h4><ol><li><strong>检查端口占用</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查端口是否被占用</span>
</span></span><span style=display:flex><span>lsof -i :8080  <span style=color:#8f5902;font-style:italic># API Gateway</span>
</span></span><span style=display:flex><span>lsof -i :30000 <span style=color:#8f5902;font-style:italic># Frontend</span>
</span></span><span style=display:flex><span>lsof -i :5432  <span style=color:#8f5902;font-style:italic># PostgreSQL</span>
</span></span></code></pre></div><p>如果端口被占用：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查找占用进程</span>
</span></span><span style=display:flex><span>ps aux <span style=color:#000;font-weight:700>|</span> grep &lt;port&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 终止进程</span>
</span></span><span style=display:flex><span><span style=color:#204a87>kill</span> -9 &lt;PID&gt;
</span></span></code></pre></div><ol start=2><li><strong>查看容器日志</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看所有容器状态</span>
</span></span><span style=display:flex><span>docker ps -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看特定容器日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend
</span></span><span style=display:flex><span>docker logs datamate-frontend
</span></span><span style=display:flex><span>docker logs datamate-database
</span></span></code></pre></div><ol start=3><li><strong>检查 Docker 资源</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看 Docker 系统信息</span>
</span></span><span style=display:flex><span>docker system df
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 清理未使用的资源</span>
</span></span><span style=display:flex><span>docker system prune -a
</span></span></code></pre></div><h4 id=常见原因和解决方案>常见原因和解决方案<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e5%8e%9f%e5%9b%a0%e5%92%8c%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label="Heading self-link"></a></h4><table><thead><tr><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>端口被占用</td><td>终止占用进程或修改端口映射</td></tr><tr><td>内存不足</td><td>增加 Docker 内存限制</td></tr><tr><td>镜像未拉取</td><td>执行 <code>docker pull</code> 拉取镜像</td></tr><tr><td>网络问题</td><td>检查防火墙和网络配置</td></tr></tbody></table><h3 id=容器启动后立即退出>容器启动后立即退出<a class=td-heading-self-link href=#%e5%ae%b9%e5%99%a8%e5%90%af%e5%8a%a8%e5%90%8e%e7%ab%8b%e5%8d%b3%e9%80%80%e5%87%ba aria-label="Heading self-link"></a></h3><h4 id=排查步骤-1>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-1 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看容器退出码</span>
</span></span><span style=display:flex><span>docker ps -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看详细日志</span>
</span></span><span style=display:flex><span>docker logs &lt;container-name&gt; --tail <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查容器健康状态</span>
</span></span><span style=display:flex><span>docker inspect &lt;container-name&gt; <span style=color:#000;font-weight:700>|</span> grep -A <span style=color:#0000cf;font-weight:700>10</span> Health
</span></span></code></pre></div><h4 id=常见原因>常见原因<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e5%8e%9f%e5%9b%a0 aria-label="Heading self-link"></a></h4><ul><li><strong>配置错误</strong>：检查环境变量和配置文件</li><li><strong>依赖服务未启动</strong>：确保数据库等依赖服务已启动</li><li><strong>资源不足</strong>：检查内存和磁盘空间</li></ul><h2 id=数据库连接问题>数据库连接问题<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=无法连接到数据库>无法连接到数据库<a class=td-heading-self-link href=#%e6%97%a0%e6%b3%95%e8%bf%9e%e6%8e%a5%e5%88%b0%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="Heading self-link"></a></h3><h4 id=症状-1>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-1 aria-label="Heading self-link"></a></h4><p>后端服务日志显示数据库连接错误。</p><h4 id=排查步骤-2>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-2 aria-label="Heading self-link"></a></h4><ol><li><strong>检查数据库容器</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查数据库容器状态</span>
</span></span><span style=display:flex><span>docker ps <span style=color:#000;font-weight:700>|</span> grep datamate-database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看数据库日志</span>
</span></span><span style=display:flex><span>docker logs datamate-database
</span></span></code></pre></div><ol start=2><li><strong>测试数据库连接</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 进入数据库容器</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> -it datamate-database psql -U postgres -d datamate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或从本地连接</span>
</span></span><span style=display:flex><span>psql -h localhost -U postgres -d datamate
</span></span></code></pre></div><ol start=3><li><strong>检查数据库配置</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查环境变量</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-backend env <span style=color:#000;font-weight:700>|</span> grep DB_
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查配置文件</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-backend cat /app/application.yml <span style=color:#000;font-weight:700>|</span> grep datasource
</span></span></code></pre></div><h4 id=常见解决方案>常见解决方案<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label="Heading self-link"></a></h4><table><thead><tr><th>问题</th><th>解决方案</th></tr></thead><tbody><tr><td>密码错误</td><td>检查 <code>DB_PASSWORD</code> 环境变量</td></tr><tr><td>数据库未就绪</td><td>等待数据库完全启动</td></tr><tr><td>网络不通</td><td>检查 Docker 网络</td></tr><tr><td>连接池耗尽</td><td>增加连接池大小</td></tr></tbody></table><h3 id=数据库性能问题>数据库性能问题<a class=td-heading-self-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%80%a7%e8%83%bd%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h3><h4 id=症状-2>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-2 aria-label="Heading self-link"></a></h4><p>查询缓慢，数据库响应时间长。</p><h4 id=排查步骤-3>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-3 aria-label="Heading self-link"></a></h4><ol><li><strong>查看慢查询</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看慢查询
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>query</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>mean_exec_time</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>calls</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_statements</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ORDER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#000>mean_exec_time</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>DESC</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>LIMIT</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><ol start=2><li><strong>检查连接数</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看当前连接数
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_activity</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看最大连接数
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SHOW</span><span style=color:#f8f8f8> </span><span style=color:#000>max_connections</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><ol start=3><li><strong>分析表大小</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看表大小
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>relname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>table_name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_total_relation_size</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>relid</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_catalog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_statio_user_tables</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ORDER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_total_relation_size</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>relid</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>DESC</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h4 id=优化方案>优化方案<a class=td-heading-self-link href=#%e4%bc%98%e5%8c%96%e6%96%b9%e6%a1%88 aria-label="Heading self-link"></a></h4><ul><li>添加索引</li><li>优化查询语句</li><li>增加连接池大小</li><li>定期清理和分析表</li></ul><h2 id=前端问题>前端问题<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=前端无法访问>前端无法访问<a class=td-heading-self-link href=#%e5%89%8d%e7%ab%af%e6%97%a0%e6%b3%95%e8%ae%bf%e9%97%ae aria-label="Heading self-link"></a></h3><h4 id=症状-3>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-3 aria-label="Heading self-link"></a></h4><p>浏览器无法访问 http://localhost:30000</p><h4 id=排查步骤-4>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-4 aria-label="Heading self-link"></a></h4><ol><li><strong>检查前端容器</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>docker ps <span style=color:#000;font-weight:700>|</span> grep datamate-frontend
</span></span><span style=display:flex><span>docker logs datamate-frontend
</span></span></code></pre></div><ol start=2><li><strong>检查端口映射</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看端口映射</span>
</span></span><span style=display:flex><span>docker port datamate-frontend
</span></span></code></pre></div><ol start=3><li><strong>测试网络连接</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试容器内部服务</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-frontend wget -O- http://localhost:3000
</span></span></code></pre></div><h4 id=常见解决方案-1>常见解决方案<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-1 aria-label="Heading self-link"></a></h4><ul><li>检查端口是否正确映射</li><li>检查防火墙设置</li><li>查看浏览器控制台错误信息</li><li>清除浏览器缓存</li></ul><h3 id=api-请求失败>API 请求失败<a class=td-heading-self-link href=#api-%e8%af%b7%e6%b1%82%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><h4 id=症状-4>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-4 aria-label="Heading self-link"></a></h4><p>前端页面显示，但 API 请求失败。</p><h4 id=排查步骤-5>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-5 aria-label="Heading self-link"></a></h4><ol><li><strong>检查浏览器控制台</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 查看网络请求
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// 开发者工具 -&gt; Network 标签
</span></span></span></code></pre></div><ol start=2><li><strong>检查 API Gateway</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查 API Gateway 容器</span>
</span></span><span style=display:flex><span>docker ps <span style=color:#000;font-weight:700>|</span> grep datamate-gateway
</span></span><span style=display:flex><span>docker logs datamate-gateway
</span></span></code></pre></div><ol start=3><li><strong>测试 API</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试 API 连接</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/actuator/health
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 测试 API 端点</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/api/v1/data-management/datasets
</span></span></code></pre></div><h4 id=常见解决方案-2>常见解决方案<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-2 aria-label="Heading self-link"></a></h4><table><thead><tr><th>错误</th><th>解决方案</th></tr></thead><tbody><tr><td>CORS 错误</td><td>配置 API Gateway CORS</td></tr><tr><td>401 Unauthorized</td><td>检查认证配置</td></tr><tr><td>404 Not Found</td><td>检查 API 路径配置</td></tr><tr><td>503 Service Unavailable</td><td>检查后端服务状态</td></tr></tbody></table><h2 id=任务执行问题>任务执行问题<a class=td-heading-self-link href=#%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=任务卡住不动>任务卡住不动<a class=td-heading-self-link href=#%e4%bb%bb%e5%8a%a1%e5%8d%a1%e4%bd%8f%e4%b8%8d%e5%8a%a8 aria-label="Heading self-link"></a></h3><h4 id=症状-5>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-5 aria-label="Heading self-link"></a></h4><p>任务状态一直为"运行中"，但没有任何进展。</p><h4 id=排查步骤-6>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-6 aria-label="Heading self-link"></a></h4><ol><li><strong>查看任务日志</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看后端服务日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend --tail <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#000;font-weight:700>|</span> grep &lt;task-id&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看运行时日志</span>
</span></span><span style=display:flex><span>docker logs datamate-runtime --tail <span style=color:#0000cf;font-weight:700>100</span>
</span></span></code></pre></div><ol start=2><li><strong>检查任务状态</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 通过 API 查询任务状态</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/api/v1/data-cleaning/tasks/&lt;task-id&gt;
</span></span></code></pre></div><ol start=3><li><strong>检查系统资源</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查 CPU 和内存使用</span>
</span></span><span style=display:flex><span>docker stats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 检查磁盘空间</span>
</span></span><span style=display:flex><span>df -h
</span></span></code></pre></div><h4 id=常见原因和解决方案-1>常见原因和解决方案<a class=td-heading-self-link href=#%e5%b8%b8%e8%a7%81%e5%8e%9f%e5%9b%a0%e5%92%8c%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-1 aria-label="Heading self-link"></a></h4><table><thead><tr><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>算子执行失败</td><td>查看运行时日志，修复算子代码</td></tr><tr><td>数据量过大</td><td>分批处理</td></tr><tr><td>资源不足</td><td>增加容器资源限制</td></tr><tr><td>死锁</td><td>重启服务</td></tr></tbody></table><h3 id=任务执行失败>任务执行失败<a class=td-heading-self-link href=#%e4%bb%bb%e5%8a%a1%e6%89%a7%e8%a1%8c%e5%a4%b1%e8%b4%a5 aria-label="Heading self-link"></a></h3><h4 id=排查步骤-7>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-7 aria-label="Heading self-link"></a></h4><ol><li><strong>查看详细错误日志</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看任务执行日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend <span style=color:#000;font-weight:700>|</span> grep ERROR
</span></span></code></pre></div><ol start=2><li><strong>检查任务配置</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看任务配置</span>
</span></span><span style=display:flex><span>curl http://localhost:8080/api/v1/data-cleaning/tasks/&lt;task-id&gt;
</span></span></code></pre></div><ol start=3><li><strong>验证输入数据</strong></li></ol><p>检查输入数据格式和内容是否正确。</p><h2 id=性能问题>性能问题<a class=td-heading-self-link href=#%e6%80%a7%e8%83%bd%e9%97%ae%e9%a2%98 aria-label="Heading self-link"></a></h2><h3 id=系统响应缓慢>系统响应缓慢<a class=td-heading-self-link href=#%e7%b3%bb%e7%bb%9f%e5%93%8d%e5%ba%94%e7%bc%93%e6%85%a2 aria-label="Heading self-link"></a></h3><h4 id=排查步骤-8>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-8 aria-label="Heading self-link"></a></h4><ol><li><strong>检查系统资源</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看 CPU、内存使用</span>
</span></span><span style=display:flex><span>docker stats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看磁盘 I/O</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-backend iostat -x <span style=color:#0000cf;font-weight:700>1</span>
</span></span></code></pre></div><ol start=2><li><strong>检查数据库性能</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看活跃查询
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_activity</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;active&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- 查看锁等待
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_activity</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>wait_event_type</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;Lock&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><ol start=3><li><strong>检查 Redis 状态</strong></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看 Redis 信息</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-redis redis-cli INFO
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看慢查询</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> datamate-redis redis-cli SLOWLOG GET
</span></span></code></pre></div><h4 id=优化方案-1>优化方案<a class=td-heading-self-link href=#%e4%bc%98%e5%8c%96%e6%96%b9%e6%a1%88-1 aria-label="Heading self-link"></a></h4><ul><li>增加容器资源限制</li><li>优化数据库查询</li><li>启用缓存</li><li>使用负载均衡</li></ul><h3 id=内存溢出>内存溢出<a class=td-heading-self-link href=#%e5%86%85%e5%ad%98%e6%ba%a2%e5%87%ba aria-label="Heading self-link"></a></h3><h4 id=症状-6>症状<a class=td-heading-self-link href=#%e7%97%87%e7%8a%b6-6 aria-label="Heading self-link"></a></h4><p>容器因内存不足被 OOM Killer 终止。</p><h4 id=排查步骤-9>排查步骤<a class=td-heading-self-link href=#%e6%8e%92%e6%9f%a5%e6%ad%a5%e9%aa%a4-9 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看容器退出原因</span>
</span></span><span style=display:flex><span>docker inspect &lt;container&gt; <span style=color:#000;font-weight:700>|</span> grep OOMKilled
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看内存使用历史</span>
</span></span><span style=display:flex><span>docker stats --no-stream
</span></span></code></pre></div><h4 id=解决方案>解决方案<a class=td-heading-self-link href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label="Heading self-link"></a></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 增加内存限制</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>datamate-backend</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>deploy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>memory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>8G </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># 增加内存限制</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=日志查看>日志查看<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e6%9f%a5%e7%9c%8b aria-label="Heading self-link"></a></h2><h3 id=查看应用日志>查看应用日志<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e5%ba%94%e7%94%a8%e6%97%a5%e5%bf%97 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 后端日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend --tail <span style=color:#0000cf;font-weight:700>100</span> -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 前端日志</span>
</span></span><span style=display:flex><span>docker logs datamate-frontend --tail <span style=color:#0000cf;font-weight:700>100</span> -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 数据库日志</span>
</span></span><span style=display:flex><span>docker logs datamate-database --tail <span style=color:#0000cf;font-weight:700>100</span> -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 运行时日志</span>
</span></span><span style=display:flex><span>docker logs datamate-runtime --tail <span style=color:#0000cf;font-weight:700>100</span> -f
</span></span></code></pre></div><h3 id=查看特定级别日志>查看特定级别日志<a class=td-heading-self-link href=#%e6%9f%a5%e7%9c%8b%e7%89%b9%e5%ae%9a%e7%ba%a7%e5%88%ab%e6%97%a5%e5%bf%97 aria-label="Heading self-link"></a></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 只查看错误日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend 2&gt;<span style=color:#000;font-weight:700>&amp;</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>|</span> grep ERROR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看警告日志</span>
</span></span><span style=display:flex><span>docker logs datamate-backend 2&gt;<span style=color:#000;font-weight:700>&amp;</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>|</span> grep WARN
</span></span></code></pre></div><h3 id=日志文件位置>日志文件位置<a class=td-heading-self-link href=#%e6%97%a5%e5%bf%97%e6%96%87%e4%bb%b6%e4%bd%8d%e7%bd%ae aria-label="Heading self-link"></a></h3><table><thead><tr><th>服务</th><th>日志路径</th></tr></thead><tbody><tr><td>后端</td><td><code>/var/log/datamate/backend/app.log</code></td></tr><tr><td>前端</td><td><code>/var/log/datamate/frontend/</code></td></tr><tr><td>数据库</td><td><code>/var/log/datamate/database/</code></td></tr><tr><td>运行时</td><td><code>/var/log/datamate/runtime/</code></td></tr></tbody></table><h2 id=获取帮助>获取帮助<a class=td-heading-self-link href=#%e8%8e%b7%e5%8f%96%e5%b8%ae%e5%8a%a9 aria-label="Heading self-link"></a></h2><p>如果以上方法都无法解决问题：</p><ol><li><p><strong>收集信息</strong></p><ul><li>错误信息</li><li>日志文件</li><li>系统环境</li><li>复现步骤</li></ul></li><li><p><strong>搜索已有问题</strong></p></li></ol><p>访问 <a href=https://github.com/ModelEngine-Group/DataMate/issues>GitHub Issues</a> 搜索类似问题。</p><ol start=3><li><strong>提交新 Issue</strong></li></ol><p>在 GitHub 提交 Issue 时，请提供：</p><ul><li>DataMate 版本</li><li>操作系统版本</li><li>Docker 版本</li><li>详细的错误信息</li><li>复现步骤</li></ul><h2 id=相关文档>相关文档<a class=td-heading-self-link href=#%e7%9b%b8%e5%85%b3%e6%96%87%e6%a1%a3 aria-label="Heading self-link"></a></h2><ul><li><a href=/datamate-docs/docs/getting-started/installation/>安装部署指南</a> - 部署说明</li><li><a href=/datamate-docs/docs/appendix/configuration/>配置参数</a> - 配置说明</li><li><a href=/datamate-docs/docs/api-reference/>API 参考</a> - API 文档</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-54889070d33ff8ba421707b96841ef23>7 - 贡献指南</h1><div class=lead>欢迎来到 DataMate 项目，我们欢迎所有形式的贡献，包括但不限于文档、代码、测试、翻译等。</div><div class="pageinfo pageinfo-primary"><p>DataMate 是企业级数据处理开源项目，致力于为模型训练、AI
应用、数据飞轮等场景提供高效数据解决方案。我们欢迎所有开发者、文档创作者、测试工程师通过代码提交、文档优化、问题反馈、社区支持等方式参与贡献。</p><p>若你是首次参与开源项目，建议先阅读 <a href=https://opensource.guide/zh-hans/how-to-contribute/>开源贡献新手</a>
，再结合本指南开展操作。所有贡献均需遵循 <a href>DataMate 行为准则</a>。</p></div><h2 id=一贡献范围与方式>一、贡献范围与方式<a class=td-heading-self-link href=#%e4%b8%80%e8%b4%a1%e7%8c%ae%e8%8c%83%e5%9b%b4%e4%b8%8e%e6%96%b9%e5%bc%8f aria-label="Heading self-link"></a></h2><p>DataMate 开源项目的贡献覆盖以下核心场景，你可根据自身擅长领域选择参与方向：</p><table><thead><tr><th>贡献类型</th><th>具体内容</th><th>适合人群</th></tr></thead><tbody><tr><td>代码贡献</td><td>核心功能开发、Bug 修复、性能优化、新特性提案</td><td>后端 / 前端开发者、数据工程师</td></tr><tr><td>文档贡献</td><td>用户手册更新、API 文档完善、教程编写、贡献指南优化</td><td>技术文档创作者、资深用户</td></tr><tr><td>测试贡献</td><td>编写单元测试 / 集成测试、反馈测试问题、参与兼容性测试</td><td>测试工程师、质量保障人员</td></tr><tr><td>社区贡献</td><td>解答 GitHub Issues、参与社区讨论、分享使用案例</td><td>所有用户、技术爱好者</td></tr><tr><td>设计贡献</td><td>界面交互优化、Logo / 图标设计、文档视觉升级</td><td>UI/UX 设计师、视觉设计师</td></tr></tbody></table><p>感谢你选择参与 DataMate 开源项目的建设！无论是代码、文档还是社区支持，每一份贡献都将助力项目成长，推动企业级数据处理技术的发展。若在贡献过程中遇到任何问题，欢迎随时通过社区渠道寻求帮助。</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=ModelEngine aria-label=ModelEngine><a target=_blank rel=noopener href=https://modelengine-ai.net/#/home aria-label=ModelEngine><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=魔擎 aria-label=魔擎><a target=_blank rel=noopener href=https://mp.weixin.qq.com/s/isymVYr_P8m0MY79MAyn_A aria-label=魔擎><i class="fab fa-weixin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/ModelEngine-Group/DataMate aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=ModelEngine aria-label=ModelEngine><a target=_blank rel=noopener href=https://modelengine-ai.net/#/home aria-label=ModelEngine><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=魔擎 aria-label=魔擎><a target=_blank rel=noopener href=https://mp.weixin.qq.com/s/isymVYr_P8m0MY79MAyn_A aria-label=魔擎><i class="fab fa-weixin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/ModelEngine-Group/DataMate aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025&ndash;2026
<span class=td-footer__authors>DataMate Authors | <a href="https://github.com/ModelEngine-Group/DataMate?tab=License-1-ov-file#readme">MIT License</a> |</span></span><span class=td-footer__all_rights_reserved>保留所有权利</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></span></div></div></div></footer></div><script src=/datamate-docs/js/main.min.23245f9f90a264a7d9cca4185990efbffab16b84efa5ecc19c46606e57853789.js integrity="sha256-IyRfn5CiZKfZzKQYWZDvv/qxa4TvpezBnEZgbleFN4k=" crossorigin=anonymous></script><script defer src=/datamate-docs/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/datamate-docs/js/tabpane-persist.js></script></body></html>